"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[1743],{1743:(N,Z,n)=>{n.r(Z),n.d(Z,{BureauModule:()=>Se});var u=n(6814),t=n(9468),x=n(1227),l=n(95);let p=(()=>{class e{constructor(){}createForm(o){return new l.cw({code:new l.NI(o.code,{nonNullable:!0,validators:[l.kI.required]}),niveau:new l.NI(o.niveau,{nonNullable:!0,validators:[l.kI.required]}),batiment:new l.NI(o.batiment,{nonNullable:!0,validators:[l.kI.required]}),nomBatiment:new l.NI(o.nomBatiment),entreprise:new l.NI(o.entreprise),filiale:new l.NI(o.filiale),site:new l.NI(o.site),utilisateurModification:new l.NI(o.utilisateurModification),utilisateurCreation:new l.NI(o.utilisateurCreation),dateCreation:new l.NI(o.dateCreation),dateDerniereModification:new l.NI(o.dateDerniereModification)})}createSearchForm(){return new l.cw({code:new l.NI("",{nonNullable:!0,validators:[l.kI.required]}),niveau:new l.NI("",{nonNullable:!0,validators:[l.kI.required]})})}static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var C=n(2572),g=n(7398),i=n(676);const d="Bureau",I=(0,i.PH)(`[${d} API] Load All`),T=(0,i.PH)(`[${d} API] Load All Success`,(0,i.Ky)()),E=(0,i.PH)(`[${d} API] Create`,(0,i.Ky)()),L=(0,i.PH)(`[${d} API] Create Success`,(0,i.Ky)()),W=(0,i.PH)(`[${d} API] Load`,(0,i.Ky)()),j=(0,i.PH)(`[${d} API] Load Success`,(0,i.Ky)()),q=(0,i.PH)(`[${d} API] Create Error`,(0,i.Ky)()),V=(0,i.PH)(`[${d} API] Reset Error`),X=(0,i.PH)(`[${d} API] Reset Error Field`,(0,i.Ky)()),tt=(0,i.PH)(`[${d} API] Reset`),et=(0,i.PH)(`[${d} API] Delete`,(0,i.Ky)()),ot=(0,i.PH)(`[${d} API] Delete Success`,(0,i.Ky)()),s={loadItems:I,loadItemsSuccess:T,resetItem:tt,createItem:E,createItemSuccess:L,loadItem:W,loadItemSuccess:j,updateItem:(0,i.PH)(`[${d} API] Update`,(0,i.Ky)()),updateItemSuccess:(0,i.PH)(`[${d} API] Update Success`,(0,i.Ky)()),deleteItem:et,deleteItemSuccess:ot,setError:q,resetError:V,resetErrorField:X,loadFormModel:(0,i.PH)(`[${d} API] Load Form Model`),resetFormModel:(0,i.PH)(`[${d} API] Reset Form Model`),loadFormModelSuccess:(0,i.PH)(`[${d} API] Load Form Model Success`,(0,i.Ky)()),resetSearch:(0,i.PH)(`[${d} API] Reset Search`),search:(0,i.PH)(`[${d} API] Search`,(0,i.Ky)()),changePage:(0,i.PH)(`[${d} API] Change Page`,(0,i.Ky)()),changePageSize:(0,i.PH)(`[${d} API] Change Page Size`,(0,i.Ky)())},mt=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(s.loadItemsSuccess,(e,a)=>(console.log(a.items),{...e,items:a.items,totalElement:a.totalElement})),(0,i.on)(s.resetItem,(e,a)=>({...e,currentItem:null})),(0,i.on)(s.createItemSuccess,(e,a)=>({...e})),(0,i.on)(s.deleteItemSuccess,(e,a)=>({...e})),(0,i.on)(s.loadItemSuccess,(e,a)=>({...e,currentItem:a.item})),(0,i.on)(s.updateItemSuccess,(e,a)=>({...e})),(0,i.on)(s.loadFormModel,(e,a)=>({...e,formModel:null})),(0,i.on)(s.loadFormModelSuccess,(e,a)=>({...e,formModel:a.formModel})),(0,i.on)(s.resetSearch,(e,a)=>({...e,searchModel:{}})),(0,i.on)(s.search,(e,a)=>({...e,searchModel:a.searchModel})),(0,i.on)(s.changePage,(e,a)=>({...e,page:a.page})),(0,i.on)(s.changePageSize,(e,a)=>({...e,pageSize:a.pageSize})),(0,i.on)(s.setError,(e,a)=>({...e,errors:a.errors})),(0,i.on)(s.resetError,(e,a)=>({...e,errors:null})),(0,i.on)(s.resetErrorField,(e,a)=>{let o={};return null!==e.errors&&Object.entries(e.errors).forEach(([r,c])=>{r!==a.fieldName&&(o[`${r}`]=c)}),{...e,errors:o}})),B=(0,i.ZF)("bureaux"),ft=(0,i.P1)(B,e=>e.items),_t=(0,i.P1)(B,e=>e.currentItem),O=(0,i.P1)(B,e=>e.formModel),ht=(0,i.P1)(B,e=>e.searchModel),H=(0,i.P1)(B,e=>e.page),z=(0,i.P1)(B,e=>e.pageSize),gt=(0,i.P1)(B,e=>e.totalElement),Ct=(0,i.P1)(B,e=>e.errors);var bt=n(4849),A=n(8281),D=n(797),Y=n(3849),vt=n(7251),xt=n(166),Zt=n(6327),Tt=n(8564),Bt=n(8223),yt=n(602),It=n(1469),Mt=n(6326),G=n(8346),Q=n(1171),k=n(547),U=n(362);function St(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"R\xe9f\xe9rence"),t.qZA())}function Pt(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.refSys)}}function At(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Code"),t.qZA())}function Et(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.code)}}function Ft(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Niveau"),t.qZA())}function Nt(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.niveau)}}function Lt(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"B\xe2timent"),t.qZA())}function Ot(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.batiment.code)}}function Dt(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Site"),t.qZA())}function Ut(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.batiment.site.nomLong)}}function $t(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Filiale"),t.qZA())}function Jt(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.batiment.site.filiale.nomLong)}}function Kt(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Date cr\xe9ation"),t.qZA())}function Ht(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function zt(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1,"Date Derni\xe8re Modif"),t.qZA())}function Yt(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function Gt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"table",24),t.NdJ("itemSelected",function(c){t.CHM(o);const h=t.oxw(2);return t.KtG(h.itemSelected(c))}),t.ynx(1,25),t.YNc(2,St,2,0,"th",26),t.YNc(3,Pt,2,1,"td",27),t.BQk(),t.ynx(4,28),t.YNc(5,At,2,0,"th",26),t.YNc(6,Et,2,1,"td",27),t.BQk(),t.ynx(7,29),t.YNc(8,Ft,2,0,"th",26),t.YNc(9,Nt,2,1,"td",27),t.BQk(),t.ynx(10,30),t.YNc(11,Lt,2,0,"th",26),t.YNc(12,Ot,2,1,"td",27),t.BQk(),t.ynx(13,31),t.YNc(14,Dt,2,0,"th",26),t.YNc(15,Ut,2,1,"td",27),t.BQk(),t.ynx(16,32),t.YNc(17,$t,2,0,"th",26),t.YNc(18,Jt,2,1,"td",27),t.BQk(),t.ynx(19,33),t.YNc(20,Kt,2,0,"th",26),t.YNc(21,Ht,3,4,"td",34),t.BQk(),t.ynx(22,35),t.YNc(23,zt,2,0,"th",26),t.YNc(24,Yt,3,4,"td",34),t.BQk(),t.qZA()}if(2&e){const o=a.ngIf,r=t.oxw(2);t.Q6J("items",o)("headers",r.headerTable)("selectable",!0)}}function Qt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-crud-list",3),t.NdJ("searchButtonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.searchButtonClicked())})("refreshButtonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.refreshButtonClicked())})("pageSelected",function(c){t.CHM(o);const h=t.oxw();return t.KtG(h.pageSelected(c))})("pageSizeChange",function(c){t.CHM(o);const h=t.oxw();return t.KtG(h.pageSizeChange(c))})("closeButtonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.closeButtonClicked())}),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6),t._UZ(4,"app-form-label",7),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"app-custom-textfield",9),t.qZA()()(),t.TgZ(7,"div",10)(8,"div",11)(9,"div",6),t._UZ(10,"app-form-label",12),t.qZA(),t.TgZ(11,"div",8),t._UZ(12,"app-custom-textfield",13),t.qZA()()(),t.TgZ(13,"div",14)(14,"app-custom-button",15),t.NdJ("buttonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.addButtonClicked())}),t.qZA(),t.TgZ(15,"app-custom-button",16),t.NdJ("buttonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.editButtonClicked())}),t.qZA(),t.TgZ(16,"app-custom-button",17),t.NdJ("buttonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.deleteButtonClicked())}),t.qZA()(),t.TgZ(17,"div",18),t._UZ(18,"app-custom-button",19)(19,"app-custom-button",20),t.TgZ(20,"app-print-button",21),t.NdJ("printButtonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.printButtonClicked())}),t.qZA()(),t.TgZ(21,"div",22),t.YNc(22,Gt,25,3,"table",23),t.ALo(23,"async"),t.qZA()()}if(2&e){const o=a.ngIf,r=t.oxw();t.Q6J("itemSelected",r.isItemSelected())("pageSize",o.pageSize)("currentPage",o.page)("totalElements",o.totalElement),t.xp6(1),t.Q6J("formGroup",r.searchForm),t.xp6(6),t.Q6J("formGroup",r.searchForm),t.xp6(8),t.Q6J("disabled",!r.isItemSelected()),t.xp6(1),t.Q6J("disabled",!r.isItemSelected()),t.xp6(6),t.Q6J("ngIf",t.lcZ(23,9,r.items$))}}(0,u.qS)(x.Z,"fr-Fr");let kt=(()=>{class e{constructor(o,r,c,h){this.router=o,this.modalService=r,this.store=c,this.bureauFormService=h,this.headerTable=["R\xe9f\xe9rence","Code","Niveau","B\xe2timent","Site","Filiale","Date Cr\xe9ation","Date Derni\xe8re Modif"],this.items$=this.store.select(ft),this.page$=this.store.select(H),this.pageSize$=this.store.select(z),this.totalElement$=this.store.select(gt),this.data$=(0,C.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,g.U)(([M,J,m])=>({page:M,pageSize:J,totalElement:m}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.bureauFormService.createSearchForm(),this.store.dispatch(s.loadItems())}addButtonClicked(){this.router.navigate(["administration","bureaux","add"])}editButtonClicked(){const o=this.selectedItem?.id;o&&(this.store.dispatch(s.resetItem()),this.router.navigate(["administration","bureaux","edit",o]))}deleteButtonClicked(){const o=this.selectedItem;o&&this.modalService.openComponent(bt.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(r=>{r&&"yes"===r&&this.store.dispatch(s.deleteItem({item:o}))})}itemSelected(o){this.selectedItem=o}pageSelected(o){this.store.dispatch(s.changePage({page:o}))}pageSizeChange(o){this.store.dispatch(s.changePageSize({pageSize:o}))}closeButtonClicked(){this.router.navigate(["administration"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(s.resetSearch())}searchButtonClicked(){this.store.dispatch(s.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(A.F0),t.Y36(D.Z),t.Y36(i.yh),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-bureau-list"]],features:[t._Bn([p,{provide:t.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliations","pathLevelTwo","Bureaux","pathLevelThree","Liste"],["title","Liste des Bureaux",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Bureaux",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search-2"],["title","Code"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","code"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Niveau"],["placeholder","","otherclass","item-input","formControlName","niveau"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Ajouter",1,"me-1",3,"buttonClicked"],["icon","icon-edit-alt btn-icon-edit","title","Modifier",1,"me-1",3,"disabled","buttonClicked"],["icon","icon-trash btn-icon-delete","title","Supprimer",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Importer","url","import.svg"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Code"],["appCellDef","Niveau"],["appCellDef","B\xe2timent"],["appCellDef","Site"],["appCellDef","Filiale"],["appCellDef","Date Cr\xe9ation"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Date Derni\xe8re Modif"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template",""]],template:function(r,c){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,Qt,24,11,"app-crud-list",2),t.ALo(3,"async")),2&r&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,c.data$)))},dependencies:[u.O5,Y.L,l.JJ,l.JL,l.sg,l.u,vt._,xt.x,Zt.N,Tt.D,Bt.h,yt.u,It.O,Mt.q,G.W,Q.h,k.Z,U.V,u.Ov,u.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return e})();var wt=n(8819),Rt=n(9543),Wt=n(7426),jt=n(9887),qt=n(5973),Vt=n(4944),Xt=n(2093),te=n(6136),ee=n(8513),oe=n(586),re=n(1327),ie=n(5188);function ne(e,a){1&e&&(t.TgZ(0,"th",43),t._uU(1,"Code"),t.qZA())}function ae(e,a){if(1&e&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.code," ")}}function se(e,a){1&e&&(t.TgZ(0,"th",43),t._uU(1,"Nombre Niveau"),t.qZA())}function ce(e,a){if(1&e&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.nombreNiveau," ")}}function le(e,a){1&e&&(t.TgZ(0,"table",38),t.ynx(1,39),t.YNc(2,ne,2,0,"th",40),t.YNc(3,ae,2,1,"td",41),t.BQk(),t.ynx(4,42),t.YNc(5,se,2,0,"th",40),t.YNc(6,ce,2,1,"td",41),t.BQk(),t.qZA())}function ue(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-field-error-wrapper",35),t.NdJ("resetField",function(c){t.CHM(o);const h=t.oxw(2);return t.KtG(h.resetBackendError(c))}),t.TgZ(1,"app-item-search",36),t.YNc(2,le,7,0,"table",37),t.qZA()()}if(2&e){const o=a.ngIf,r=t.oxw(2);t.Q6J("errors",r.errors),t.xp6(1),t.Q6J("headers",r.batimentSelectItemsHeader)("items",o.batiments)("criterias",r.batimentItemCritterias)("itemDescription",r.batimentItemDescription)}}function pe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),t._UZ(5,"app-form-label",7),t.TgZ(6,"div",8),t._UZ(7,"app-custom-textfield",9),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"app-form-label",10),t.TgZ(10,"div",8),t._UZ(11,"app-custom-textfield",11),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6),t._UZ(14,"app-form-label",12),t.TgZ(15,"div",8),t._UZ(16,"app-custom-textfield",13),t.qZA()(),t.TgZ(17,"div",6),t._UZ(18,"app-form-label",14),t.TgZ(19,"div",8),t._UZ(20,"app-custom-textfield",15),t.qZA()()()(),t.TgZ(21,"app-panel-custom",16)(22,"div",5)(23,"div",6),t._UZ(24,"app-form-label",17),t.TgZ(25,"div",8)(26,"app-field-error-wrapper",18),t.NdJ("resetField",function(c){t.CHM(o);const h=t.oxw();return t.KtG(h.resetBackendError(c))}),t._UZ(27,"app-custom-textfield",19),t.qZA()()(),t.TgZ(28,"div",6),t._UZ(29,"app-form-label",20),t.TgZ(30,"div",8),t._UZ(31,"app-custom-textfield",21),t.qZA()()(),t.TgZ(32,"div",5)(33,"div",6),t._UZ(34,"app-form-label",22),t.TgZ(35,"div",23),t._UZ(36,"app-custom-textfield",24),t.qZA(),t.YNc(37,ue,3,5,"app-field-error-wrapper",25),t.ALo(38,"async"),t.qZA(),t.TgZ(39,"div",6),t._UZ(40,"app-form-label",26),t.TgZ(41,"div",8),t._UZ(42,"app-custom-textfield",27),t.qZA()()(),t.TgZ(43,"div",5)(44,"div",6),t._UZ(45,"app-form-label",28),t.TgZ(46,"div",8),t._UZ(47,"app-custom-textfield",29),t.qZA()(),t.TgZ(48,"div",6),t._UZ(49,"app-form-label",30),t.TgZ(50,"div",8),t._UZ(51,"app-custom-textfield",31),t.qZA()()()(),t.TgZ(52,"div",32)(53,"app-primary-button",33),t.NdJ("buttonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.submitForm())}),t.qZA(),t.TgZ(54,"app-cancel-button",34),t.NdJ("buttonClicked",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.returnToList())}),t.qZA()()()()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(6),t.Q6J("errors",o.errors),t.xp6(10),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(38,11,o.formModel$)),t.xp6(5),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0)}}let w=(()=>{class e{constructor(o,r,c,h){this.formService=o,this.modalService=r,this.router=c,this.store=h,this.formModel$=this.store.select(O),this.errors=null,this.formSubmitted=new t.vpe,this.batimentSelectItemsHeader=["Code","Nombre Niveau"],this.batimentItemDescription=M=>M.code,this.batimentItemCritterias={code:"Code",nombreNiveau:"Nombre Niveau"}}ngOnInit(){this.store.dispatch(s.loadFormModel()),this.store.select(Ct).subscribe(o=>{this.errors=o}),this.store.dispatch(s.resetError()),this.form=this.formService.createForm(this.bureau),this.formModel$.subscribe(o=>{console.log(o)}),this.form.get("batiment")?.valueChanges.subscribe(o=>{null!==o&&(this.form.get("entreprise")?.setValue(o.site.filiale.entreprise.nomLong),this.form.get("filiale")?.setValue(o.site.filiale.nomLong),this.form.get("nomBatiment")?.setValue(o.code),this.form.get("site")?.setValue(o.site.nomLong))})}ngOnDestroy(){}submitForm(){this.formSubmitted.emit(this.form.getRawValue())}returnToList(){this.router.navigateByUrl("administration/bureaux")}resetBackendError(o){this.store.dispatch(s.resetErrorField({fieldName:o}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(p),t.Y36(D.Z),t.Y36(A.F0),t.Y36(i.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-bureau-form"]],inputs:{bureau:"bureau"},outputs:{formSubmitted:"formSubmitted"},features:[t._Bn([p])],decls:2,vars:1,consts:[["id","main",1,"ps-3","pe-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Historique"],[1,"general-info"],[1,"input-container","col-4"],["title","Date Cr\xe9ation",1,"col-5","text-end"],[1,"input-textfield-container","col"],["otherclass","custom-style-form","placeholder","","formControlName","dateCreation",3,"readonly"],["title","Cr\xe9\xe9 Par",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurCreation",3,"readonly"],["title","Date Derni\xe8re Modif",1,"col-5","text-end"],["otherclass","custom-style-form","formControlName","dateDerniereModification","placeholder","",3,"readonly"],["title","Modifi\xe9 Par",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurModification",3,"readonly"],["icon","fa fa-angle-right","title","Informations g\xe9n\xe9rales"],["title","Code",1,"col-5","text-end"],[3,"errors","resetField"],["otherclass","custom-style-form","placeholder","","formControlName","code"],["title","Niveau",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","niveau"],["title","B\xe2timent",1,"col-5","text-end"],[1,"input-textfield-container","col","flex-column"],["otherclass","custom-style-form col","placeholder","","formControlName","nomBatiment",3,"readonly"],["class","col-auto",3,"errors","resetField",4,"ngIf"],["title","Site",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","site",3,"readonly"],["title","Filiale",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","filiale",3,"readonly"],["title","Entreprise",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","entreprise",3,"readonly"],[1,"form-actions"],["title","Enregistrer",1,"me-1",3,"buttonClicked"],["title","Annuler","otherclass","custom-cancel-button",3,"buttonClicked"],[1,"col-auto",3,"errors","resetField"],["otherclass","custom-style-item-selection-form","formControlName","batiment",1,"ml-2",3,"headers","items","criterias","itemDescription"],["app-item-search-template-attribute","",4,"appItemSearchTemplate"],["app-item-search-template-attribute",""],["appItemSearchCellDef","Code"],["app-item-search-header-def-template","","class","custom-head",4,"appItemSearchHeaderDefTemplate"],["app-item-search-cell-def-template","","class","custom-head",4,"appItemSearchCellDefTemplate"],["appItemSearchCellDef","Nombre Niveau"],["app-item-search-header-def-template","",1,"custom-head"],["app-item-search-cell-def-template","",1,"custom-head"]],template:function(r,c){1&r&&(t.TgZ(0,"div",0),t.YNc(1,pe,55,13,"form",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",c.form))},dependencies:[u.O5,l._Y,l.JJ,l.JL,l.sg,l.u,wt.F,G.W,Q.h,Rt.C,k.Z,Wt.p,jt.l,qt.v,Vt.K,Xt.d,te.D,ee.T,oe.o,re.g,ie.K,u.Ov],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return e})(),de=(()=>{class e{constructor(o){this.store=o,this.formModel$=this.store.select(O),this.bureau={id:"",code:"",niveau:"",entreprise:"",filiale:"",site:"",nomBatiment:"",batiment:null,dateDerniereModification:null,dateCreation:null,utilisateurCreation:"",utilisateurModification:""}}ngOnInit(){this.store.dispatch(s.resetItem()),this.store.dispatch(s.resetFormModel())}addBureau(o){this.store.dispatch(s.createItem({item:{code:o.code,niveau:o.niveau,batiment:o.batiment}}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(i.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-bureau-add"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliations","pathLevelTwo","Bureaux","pathLevelThree","Ajouter"],["id","main",3,"bureau","formSubmitted"]],template:function(r,c){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.TgZ(2,"app-bureau-form",2),t.NdJ("formSubmitted",function(M){return c.addBureau(M)}),t.qZA()),2&r&&(t.xp6(2),t.Q6J("bureau",c.bureau))},dependencies:[U.V,w],styles:["[_nghost-%COMP%]{width:100%}"]})}return e})();var me=n(7394);function fe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-bureau-form",3),t.NdJ("formSubmitted",function(c){t.CHM(o);const h=t.oxw();return t.KtG(h.editBureau(c))}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("bureau",o.bureauDto)}}let _e=(()=>{class e{constructor(o,r){this.store=o,this.route=r,this.formModel$=this.store.select(O),this.bureau$=this.store.select(_t),this.bureauDto=null,this.subscription=new me.w0}ngOnInit(){this.store.dispatch(s.resetFormModel()),this.subscription=this.route.params.subscribe(o=>{this.id=o.id,this.id&&this.store.dispatch(s.loadItem({id:this.id}))}),this.bureau$.subscribe(o=>{o&&(this.bureauDto={id:o.id,code:o.code,niveau:o.niveau,entreprise:null===o.batiment?null:o.batiment.site.filiale.entreprise.nomLong,filiale:null===o.batiment?null:o.batiment.site.filiale.nomLong,site:null===o.batiment?null:o.batiment.site.nomLong,nomBatiment:null===o.batiment?null:o.batiment.code,batiment:null===o.batiment?null:o.batiment,dateDerniereModification:null===o.dateDerniereModification?"":this.formatDate(o.dateDerniereModification),dateCreation:null===o.dateCreation?"":this.formatDate(o.dateCreation),utilisateurCreation:o.utilisateurCreation,utilisateurModification:o.utilisateurModification})})}formatDate(o){if(o){const r=new Date(o);return r.toLocaleDateString()+" \xe0 "+r.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}editBureau(o){const r={id:this.id,code:o.code,niveau:o.niveau,batiment:o.batiment};this.store.dispatch(s.updateItem({id:Number(this.id),item:r}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(i.yh),t.Y36(A.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-bureau-edit"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliations","pathLevelTwo","Bureaux","pathLevelThree","Editer"],[3,"bureau","formSubmitted",4,"ngIf"],[3,"bureau","formSubmitted"]],template:function(r,c){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,fe,1,1,"app-bureau-form",2)),2&r&&(t.xp6(2),t.Q6J("ngIf",c.bureauDto))},dependencies:[u.O5,U.V,w],styles:["[_nghost-%COMP%]{width:100%}"]})}return e})();var he=n(9207),f=n(6465),ge=n(2460),y=n(6328),Ce=n(9026),b=n(6063),S=n(6306),$=n(9397),be=n(1631),ve=n(9862),v=n(2096),xe=n(3186),Ze=n(4664),Te=n(9989),Be=n(1946);let R=(()=>{class e extends Te.v{getResourceBasePath(){return`${Be.y}/bureau`}static#t=this.\u0275fac=function(){let o;return function(c){return(o||(o=t.n5z(e)))(c||e)}}();static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var ye=n(6366);let Ie=(()=>{class e{constructor(o,r,c,h,M,J){this.bureauService=o,this.authService=r,this.actions$=c,this.router=h,this.modalService=M,this.store=J,this.loadItems$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.loadItems),(0,ge.M)(this.store.select(H),this.store.select(z),this.store.select(ht)),(0,y.b)(([m,_,F,K])=>(console.log(_),this.store.dispatch((0,b.Q)()),(0,Ce.$)(this.bureauService.getAllWithPagination(_,F,K),this.bureauService.count(K)).pipe((0,g.U)(([P,Pe])=>(this.store.dispatch((0,b.Z)()),s.loadItemsSuccess({items:P,totalElement:Pe}))),(0,S.K)(P=>(this.store.dispatch((0,b.Z)()),(0,v.of)(s.setError({errors:P})))))))),{dispatch:!0}),this.createItem$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.createItem),(0,y.b)(m=>(this.store.dispatch((0,b.Q)()),this.bureauService.add(m.item).pipe((0,$.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Bureau ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/bureaux")}),(0,g.U)(_=>s.createItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,b.Z)()),(0,v.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.loadItem$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.loadItem),(0,be.z)(m=>this.bureauService.findById(m.id).pipe((0,g.U)(_=>s.loadItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,b.Z)()),(0,v.of)(s.setError({errors:_}))))))),{dispatch:!0}),this.deleteItem$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.deleteItem),(0,y.b)(m=>this.bureauService.delete(m.item.id,m.item)),(0,$.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Bureau supprim\xe9 avec succ\xe8s"})}),(0,g.U)(()=>s.loadItems()),(0,S.K)(m=>(this.store.dispatch((0,b.Z)()),(0,v.of)(s.setError({errors:m}))))),{dispatch:!0}),this.updateItem$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.updateItem),(0,y.b)(m=>(this.store.dispatch((0,b.Q)()),this.bureauService.update(m.id,m.item).pipe((0,$.b)(()=>{this.store.dispatch((0,b.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Bureau modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/bureaux")}),(0,g.U)(_=>s.createItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,b.Z)()),(0,v.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.loadFormModel$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.loadFormModel),(0,y.b)(()=>this.bureauService.getFormModel()),(0,g.U)(m=>s.loadFormModelSuccess({formModel:m})),(0,S.K)(m=>(0,v.of)(s.setError({errors:m}))))),this.resetSearch$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.resetSearch),(0,y.b)(()=>(0,v.of)(s.changePage({page:1}))))),this.search$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.search),(0,y.b)(()=>(0,v.of)(s.changePage({page:1}))))),this.changePage$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.changePage),(0,g.U)(m=>s.loadItems()))),this.changePageSize$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.changePageSize),(0,y.b)(()=>(0,v.of)(s.changePage({page:1}))))),this.handleError$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(s.setError),(0,Ze.w)(m=>{if(this.store.dispatch((0,b.Q)()),m.errors instanceof ve.UA){if(422===m.errors.status){let _="",F=0;for(const[K,P]of Object.entries(m.errors.error))_+=0===F?P:"\n"+P,F++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:_})}if(403===m.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===m.errors.status)return this.authService.removeToken(),this.authService.removeUserInfo(),(0,v.of)(xe.jM())}return this.store.dispatch((0,b.Z)()),(0,v.of)({type:"noop"})})),{dispatch:!0})}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(R),t.LFG(ye.e),t.LFG(f.eX),t.LFG(A.F0),t.LFG(D.Z),t.LFG(i.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();const Me=[{path:"",component:kt,pathMatch:"prefix"},{path:"add",component:de,pathMatch:"prefix"},{path:"edit/:id",component:_e,pathMatch:"prefix"}];let Se=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({providers:[R],imports:[u.ez,Y.L,i.Aw.forFeature("bureaux",mt),f.sQ.forFeature(Ie),he.m,A.Bz.forChild(Me)]})}return e})()},8819:(N,Z,n)=>{n.d(Z,{F:()=>t});var u=n(9468);let t=(()=>{class x{constructor(){this.disabled=!1,this.buttonClicked=new u.vpe}emitButtonClicked(){this.buttonClicked.emit()}static#t=this.\u0275fac=function(C){return new(C||x)};static#e=this.\u0275cmp=u.Xpm({type:x,selectors:[["app-cancel-button"]],inputs:{title:"title",url:"url",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(C,g){1&C&&(u.TgZ(0,"button",0),u.NdJ("click",function(){return g.emitButtonClicked()}),u._uU(1),u.qZA()),2&C&&(u.Gre("cancel-button ",g.otherclass,""),u.Q6J("disabled",g.disabled),u.xp6(1),u.hij(" ",g.title,"\n"))},styles:[".cancel-button[_ngcontent-%COMP%]{color:#000;border:1px solid #6d7582;background-color:#fff;min-width:120px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:25px;padding:.75rem 0rem;border-radius:3px}"]})}return x})()},4849:(N,Z,n)=>{n.d(Z,{n:()=>g});var u=n(1892),t=n(6814),x=n(8666),l=n(2463),p=n(9468),C=n(166);let g=(()=>{class i{constructor(I,T){this.modalData=I,this.modalRef=T}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#t=this.\u0275fac=function(T){return new(T||i)(p.Y36(u.S),p.Y36(u.R))};static#e=this.\u0275cmp=p.Xpm({type:i,selectors:[["app-confirm-alert"]],standalone:!0,features:[p.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(T,E){1&T&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),p._uU(3,"Confirmation de Suppression"),p.qZA()()(),p.TgZ(4,"div",3)(5,"div",4)(6,"div",5),p._UZ(7,"img",6),p.qZA(),p.TgZ(8,"div",7),p._uU(9," Voulez-vous vraiment effectuer cette action ? "),p.qZA()(),p.TgZ(10,"div",8)(11,"app-custom-button",9),p.NdJ("buttonClicked",function(){return E.confirmAction()}),p.qZA(),p.TgZ(12,"app-custom-button",10),p.NdJ("buttonClicked",function(){return E.close()}),p.qZA()()())},dependencies:[t.ez,x.a,l.v,C.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return i})()},3849:(N,Z,n)=>{n.d(Z,{L:()=>p});var u=n(9468),t=n(2463),x=n(6814),l=n(166);let p=(()=>{class C{constructor(){this.printButtonClicked=new u.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#t=this.\u0275fac=function(d){return new(d||C)};static#e=this.\u0275cmp=u.Xpm({type:C,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[u.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(d,I){1&d&&(u.TgZ(0,"app-custom-button",0),u.NdJ("buttonClicked",function(){return I.emitPrintButtonClicked()}),u.qZA())},dependencies:[x.ez,t.v,l.x],styles:["[_nghost-%COMP%]{display:block}"]})}return C})()}}]);