"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[193],{3396:(C,h,r)=>{r.d(h,{B:()=>u});var t=r(6814),p=r(9207),m=r(9468);let u=(()=>{class c{static#e=this.\u0275fac=function(s){return new(s||c)};static#t=this.\u0275mod=m.oAB({type:c});static#r=this.\u0275inj=m.cJS({imports:[t.ez,p.m]})}return c})()},5779:(C,h,r)=>{r.d(h,{P:()=>m});var t=r(95),p=r(9468);let m=(()=>{class u{constructor(){}createFormActionSuggeree(d){return new t.cw({id:new t.NI(this.getActionSuggereeId(d),{nonNullable:!0,validators:[t.kI.required]}),libelle:new t.NI(this.getActionSuggereeLibelle(d),{nonNullable:!0,validators:[t.kI.required]}),statut:new t.NI(this.getActionSuggereeStatut(d),{nonNullable:!0,validators:[t.kI.required]}),description:new t.NI(this.getActionSuggereeDescription(d),{}),refSys:new t.NI(this.getActionSuggereeRefSys(d),{})})}createFormNewActionSuggeree(){return new t.cw({id:new t.NI("",{nonNullable:!0,validators:[t.kI.required]}),libelle:new t.NI("",{nonNullable:!0,validators:[t.kI.required]}),statut:new t.NI(null,{nonNullable:!0,validators:[t.kI.required]}),description:new t.NI("",{}),refSys:new t.NI("",{})})}getActionSuggereeId(d){return null!==d?d.id:0}getActionSuggereeLibelle(d){return null!==d?d.libelle:""}getActionSuggereeStatut(d){return null!==d?d.statut:null}getActionSuggereeDescription(d){return null!==d?d.description:""}getActionSuggereeRefSys(d){return null!==d?d.refSys:""}static#e=this.\u0275fac=function(i){return new(i||u)};static#t=this.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac})}return u})()},4970:(C,h,r)=>{r.d(h,{W:()=>u});var t=r(95),p=r(9468),m=r(5779);let u=(()=>{class c{constructor(i){this.actionSuggereeFormService=i}createFormEtape(i){return new t.cw({id:new t.NI(this.getEtapeId(i),{nonNullable:!0,validators:[t.kI.required]}),numeroEtape:new t.NI(this.getEtapeNumeroEtape(i),{nonNullable:!0,validators:[t.kI.required]}),actionSuggere:this.actionSuggereeFormService.createFormActionSuggeree(this.getEtapeActionSuggeree(i)),refSys:new t.NI(this.getEtapeRefSys(i),{})})}createFormNewEtape(){return new t.cw({id:new t.NI("",{nonNullable:!0,validators:[t.kI.required]}),numeroEtape:new t.NI(0,{nonNullable:!0,validators:[t.kI.required]}),actionSuggere:this.actionSuggereeFormService.createFormNewActionSuggeree(),refSys:new t.NI("",{})})}getEtapeId(i){return null!==i?i.id:""}getEtapeRefSys(i){return null!==i?i.refSys:""}getEtapeNumeroEtape(i){return null!==i?i.numeroEtape:0}getEtapeActionSuggeree(i){return null!==i?i.actionSuggere:null}static#e=this.\u0275fac=function(s){return new(s||c)(p.LFG(m.P))};static#t=this.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac})}return c})()},1793:(C,h,r)=>{r.d(h,{K:()=>K});var t=r(6814),p=r(9207),m=r(2984),u=r(676),c=r(198);const i=(0,u.Lq)({savedFile:null,errors:null},(0,u.on)(c.NY.importFileSuccess,(E,e)=>({...E,savedFile:e.fileUploadResult})),(0,u.on)(c.NY.resetErrorField,(E,e)=>{let M={};return null!==E.errors&&Object.entries(E.errors).forEach(([D,F])=>{D!==e.fieldName&&(M[`${D}`]=F)}),{...E,errors:M}}));(0,u.ZF)("file-imports");var o=r(6465),L=r(6063),B=r(7398),N=r(6306),$=r(8504),V=r(7634),y=r(9468),G=r(8281),Y=r(797);let U=(()=>{class E{constructor(M,D,F,W,z){this.fileService=M,this.actions$=D,this.router=F,this.modalService=W,this.store=z,this.importFile$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(c.NY.importFile),(0,V.z)(Z=>(this.store.dispatch((0,L.Q)()),this.fileService.import(Z.filePath).pipe((0,B.U)(A=>(console.log(A),this.store.dispatch((0,L.Z)()),c.NY.importFileSuccess({fileUploadResult:A,id:Z.id}))),(0,N.K)(A=>(console.log(A),(0,$._)(()=>A))))))),{dispatch:!0})}static#e=this.\u0275fac=function(D){return new(D||E)(y.LFG(m.I),y.LFG(o.eX),y.LFG(G.F0),y.LFG(Y.Z),y.LFG(u.yh))};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac})}return E})(),K=(()=>{class E{static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275mod=y.oAB({type:E});static#r=this.\u0275inj=y.cJS({providers:[m.I],imports:[t.ez,p.m,u.Aw.forFeature("file-imports",i),o.sQ.forFeature(U)]})}return E})()},2984:(C,h,r)=>{r.d(h,{I:()=>u});var t=r(1946),p=r(9468),m=r(9862);let u=(()=>{class c{constructor(i){this.http=i,this.url="http://192.168.1.120:8080/source_file_service-impl-1.0-SNAPSHOT/api",this.resourceBasePath="items-file"}getResourceBasePath(){return`${t.y}/incident`}import(i){const s=new FormData;return s.append("file",i),this.http.post(`${this.url}/${this.resourceBasePath}/upload`,s)}static#e=this.\u0275fac=function(s){return new(s||c)(p.LFG(m.eN))};static#t=this.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac})}return c})()},198:(C,h,r)=>{r.d(h,{NY:()=>s});var t=r(676);const p="FileUpload",s={importFile:(0,t.PH)(`[${p} API] Import File`,(0,t.Ky)()),importFileSuccess:(0,t.PH)(`[${p} API] Import File Success`,(0,t.Ky)()),setError:(0,t.PH)(`[${p} API] Create Error`,(0,t.Ky)()),resetError:(0,t.PH)(`[${p} API] Reset Error`),resetErrorField:(0,t.PH)(`[${p} API] Reset Error Field`,(0,t.Ky)())}},8510:(C,h,r)=>{r.d(h,{Y:()=>s});var t=r(6814),p=r(9207),m=r(2030),u=r(3396),c=r(1793),d=r(9468);let i=(()=>{class o{static#e=this.\u0275fac=function(N){return new(N||o)};static#t=this.\u0275mod=d.oAB({type:o});static#r=this.\u0275inj=d.cJS({imports:[t.ez,p.m]})}return o})(),s=(()=>{class o{static#e=this.\u0275fac=function(N){return new(N||o)};static#t=this.\u0275mod=d.oAB({type:o});static#r=this.\u0275inj=d.cJS({imports:[t.ez,p.m,m.h,i,u.B,c.K]})}return o})()},3096:(C,h,r)=>{r.d(h,{X:()=>u});var t=r(95),p=r(9468),m=r(3975);let u=(()=>{class c{constructor(i){this.solutionFormService=i}createForm(i,s,o){return this.currentIncident=o,this.currentOperationType=i,this.currentRoleIncident=s,console.log("Create Form : "+this.currentRoleIncident),new t.cw({titre:new t.NI(o.titre,{nonNullable:!0,validators:[t.kI.required]}),description:new t.NI(o.description,{nonNullable:!0,validators:[t.kI.required]}),equipement:new t.NI(o.equipement,{nonNullable:!0,validators:[t.kI.required]}),groupeEquipement:new t.NI(o.groupeEquipement),categorieEquipement:new t.NI(o.categorieEquipement),sousCategorieEquipement:new t.NI(o.sousCategorieEquipement),libelleEquipement:new t.NI(o.libelleEquipement),numeroSerie:new t.NI(o.numeroSerie),refSys:new t.NI(o.refSys),etapeIncident:new t.NI(o.etapeIncident),prioriteIncident:new t.NI(o.prioriteIncident,{}),typeIncident:new t.NI(o.typeIncident,{nonNullable:!0,validators:[t.kI.required]}),probleme:new t.NI(o.probleme,{nonNullable:"USER"!==this.currentRoleIncident,validators:[this.problemeValidator.bind(this)]}),impact:new t.NI(o.impact,{validators:[this.impactValidator.bind(this)]}),categorieIncident:new t.NI(o.categorieIncident,{validators:[this.categorieValidator.bind(this)]}),firstName:new t.NI(o.firstName),lastName:new t.NI(o.lastName),userName:new t.NI(o.userName),demandeur:new t.NI(o.demandeur,{validators:[this.demandeurValidator.bind(this)]}),firstNameGestionnaire:new t.NI(o.firstNameGestionnaire),lastNameGestionnaire:new t.NI(o.lastNameGestionnaire),userNameGestionnaire:new t.NI(o.userNameGestionnaire),firstNameSupport:new t.NI(o.firstNameSupport),lastNameSupport:new t.NI(o.lastNameSupport),userNameSupport:new t.NI(o.userNameSupport),test:new t.NI(o.test),gestionnaire:new t.NI(o.gestionnaire,{validators:[this.gestionnaireValidator.bind(this)]}),source:new t.NI(o.source,{nonNullable:!0,validators:[t.kI.required]}),severite:new t.NI(o.severite,{nonNullable:!0,validators:[t.kI.required]}),solution:this.solutionFormService.createFormSolution(this.currentOperationType,o.solution),dateCreation:new t.NI(o.dateCreation),dateDerniereModification:new t.NI(o.dateDerniereModification)})}createSearchForm(){return new t.cw({titre:new t.NI("",{nonNullable:!0})})}problemeValidator(i){return"USER"===this.currentRoleIncident?"ADD"===this.currentOperationType?null===i.value?null:{problemeInvalide:!0}:null===i.value?{problemeInvalide:!0}:null:(console.log(this.currentRoleIncident),null===i.value?{problemeInvalide:!0}:null)}impactValidator(i){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===i.value?null:{impactInvalide:!0}:null===i.value?{impactInvalide:!0}:null}gestionnaireValidator(i){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===i.value?null:{gestionnaireInvalide:!0}:null===i.value?{gestionnaireInvalide:!0}:null}demandeurValidator(i){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===i.value?null:{demandeurInvalide:!0}:null===i.value?{demandeurInvalide:!0}:null}categorieValidator(i){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===i.value?null:{categorieInvalide:!0}:null===i.value?{categorieInvalide:!0}:null}static#e=this.\u0275fac=function(s){return new(s||c)(p.LFG(m.x))};static#t=this.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac})}return c})()},3975:(C,h,r)=>{r.d(h,{x:()=>u});var t=r(95),p=r(9468),m=r(4970);let u=(()=>{class c{constructor(i){this.etapeFormService=i}createFormSolution(i,s){return new t.cw({id:new t.NI({value:this.getSolutionId(s),disabled:"BEING_RESOLVED"!==i},{nonNullable:!0,validators:[t.kI.required]}),code:new t.NI({value:this.getSolutionCode(s),disabled:"BEING_RESOLVED"!==i},{nonNullable:!0,validators:[t.kI.required]}),libelle:new t.NI({value:this.getSolutionLibelle(s),disabled:"BEING_RESOLVED"!==i},{nonNullable:!0,validators:[t.kI.required]}),refSys:new t.NI({value:this.getSolutionRefSys(s),disabled:"BEING_RESOLVED"!==i},{}),description:new t.NI({value:this.getSolutionDescription(s),disabled:"BEING_RESOLVED"!==i},{}),nombreEtape:new t.NI({value:this.getSolutionNumber(s),disabled:"BEING_RESOLVED"!==i},{nonNullable:!0,validators:[t.kI.required]}),etapes:new t.Oe(this.createEtapeForms(this.getSolutionEtapes(s)))})}getSolutionId(i){return i?i.id:""}getSolutionCode(i){return i?i.code:""}getSolutionRefSys(i){return i?i.refSys:""}getSolutionLibelle(i){return i?i.libelle:""}getSolutionDescription(i){return i?i.description:""}getSolutionNumber(i){return i?i.nombreEtape:0}getSolutionEtapes(i){return i?i.etapes:[]}createEtapeForms(i){return i.map(s=>this.etapeFormService.createFormEtape(s))}static#e=this.\u0275fac=function(s){return new(s||c)(p.LFG(m.W))};static#t=this.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac})}return c})()},2030:(C,h,r)=>{r.d(h,{h:()=>u});var t=r(6814),p=r(9207),m=r(9468);let u=(()=>{class c{static#e=this.\u0275fac=function(s){return new(s||c)};static#t=this.\u0275mod=m.oAB({type:c});static#r=this.\u0275inj=m.cJS({imports:[t.ez,p.m]})}return c})()},193:(C,h,r)=>{r.r(h),r.d(h,{IncidentsClosModule:()=>we});var t=r(6814),p=r(3096),m=r(2572),u=r(7398),c=r(4970),d=r(5779),i=r(3975),s=r(676),o=r(4972);const B=(0,s.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,s.on)(o.NY.loadItemsSuccess,(n,a)=>({...n,items:a.items,totalElement:a.totalElement})),(0,s.on)(o.NY.resetItem,(n,a)=>({...n,currentItem:null})),(0,s.on)(o.NY.createItemSuccess,(n,a)=>({...n})),(0,s.on)(o.NY.deleteItemSuccess,(n,a)=>({...n})),(0,s.on)(o.NY.loadItemSuccess,(n,a)=>({...n,currentItem:a.item})),(0,s.on)(o.NY.updateItemSuccess,(n,a)=>({...n})),(0,s.on)(o.NY.loadFormModel,(n,a)=>({...n,formModel:null})),(0,s.on)(o.NY.loadFormModelSuccess,(n,a)=>({...n,formModel:a.formModel})),(0,s.on)(o.NY.resetSearch,(n,a)=>({...n,searchModel:{}})),(0,s.on)(o.NY.search,(n,a)=>({...n,searchModel:a.searchModel})),(0,s.on)(o.NY.changePage,(n,a)=>({...n,page:a.page})),(0,s.on)(o.NY.changePageSize,(n,a)=>({...n,pageSize:a.pageSize})),(0,s.on)(o.NY.setError,(n,a)=>({...n,errors:a.errors})),(0,s.on)(o.NY.resetError,(n,a)=>({...n,errors:{}})),(0,s.on)(o.NY.resetErrorField,(n,a)=>{let l={};return null!==n.errors&&Object.entries(n.errors).forEach(([f,v])=>{f!==a.fieldName&&(l[`${f}`]=v)}),{...n,errors:l}})),N=(0,s.ZF)("incidents-clos"),$=(0,s.P1)(N,n=>n.items),G=((0,s.P1)(N,n=>n.currentItem),(0,s.P1)(N,n=>n.formModel),(0,s.P1)(N,n=>n.searchModel)),Y=(0,s.P1)(N,n=>n.page),U=(0,s.P1)(N,n=>n.pageSize),K=(0,s.P1)(N,n=>n.totalElement);(0,s.P1)(N,n=>n.errors);var e=r(9468),M=r(8281),D=r(3849),F=r(95),W=r(7251),z=r(166),Z=r(6327),A=r(8564),X=r(8223),k=r(602),q=r(1469),ee=r(6326),te=r(8346),re=r(1171),ne=r(547),ie=r(362);function oe(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"R\xe9f\xe9rence"),e.qZA())}function se(n,a){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(l.refSys)}}function le(n,a){1&n&&(e.TgZ(0,"th",34),e._uU(1,"Libell\xe9 Demande"),e.qZA())}function ae(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(l.titre)}}function ce(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Equipement"),e.qZA())}function ue(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(l.equipement.libelle)}}function de(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Statut"),e.qZA())}function pe(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(l.statutIncident)}}function me(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Demandeur"),e.qZA())}function he(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.AsE("",null==l.demandeur?null:l.demandeur.firstName," ",null==l.demandeur?null:l.demandeur.lastName,"")}}function fe(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Priorit\xe9"),e.qZA())}function _e(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(l.prioriteIncident)}}function ge(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"S\xe9v\xe9rit\xe9"),e.qZA())}function ve(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(null==l.severite?null:l.severite.libelle)}}function Ie(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Date Cr\xe9ation"),e.qZA())}function Ee(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,l.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function Ce(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Date Cl\xf4ture"),e.qZA())}function Ne(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,l.dateCloture,"dd/MM/y \xe0 HH:mm:ss"))}}function Se(n,a){1&n&&(e.TgZ(0,"th",32),e._uU(1,"Date Derni\xe8re Modif"),e.qZA())}function De(n,a){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const l=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,l.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function Pe(n,a){if(1&n){const l=e.EpF();e.TgZ(0,"table",17),e.NdJ("itemSelected",function(v){e.CHM(l);const T=e.oxw(2);return e.KtG(T.itemSelected(v))}),e.ynx(1,18),e.YNc(2,oe,2,0,"th",19),e.YNc(3,se,2,1,"td",20),e.BQk(),e.ynx(4,21),e.YNc(5,le,2,0,"th",22),e.YNc(6,ae,2,1,"td",23),e.BQk(),e.ynx(7,24),e.YNc(8,ce,2,0,"th",19),e.YNc(9,ue,2,1,"td",23),e.BQk(),e.ynx(10,25),e.YNc(11,de,2,0,"th",19),e.YNc(12,pe,2,1,"td",23),e.BQk(),e.ynx(13,26),e.YNc(14,me,2,0,"th",19),e.YNc(15,he,2,2,"td",23),e.BQk(),e.ynx(16,27),e.YNc(17,fe,2,0,"th",19),e.YNc(18,_e,2,1,"td",23),e.BQk(),e.ynx(19,28),e.YNc(20,ge,2,0,"th",19),e.YNc(21,ve,2,1,"td",23),e.BQk(),e.ynx(22,29),e.YNc(23,Ie,2,0,"th",19),e.YNc(24,Ee,3,4,"td",23),e.BQk(),e.ynx(25,30),e.YNc(26,Ce,2,0,"th",19),e.YNc(27,Ne,3,4,"td",23),e.BQk(),e.ynx(28,31),e.YNc(29,Se,2,0,"th",19),e.YNc(30,De,3,4,"td",23),e.BQk(),e.qZA()}if(2&n){const l=a.ngIf,f=e.oxw(2);e.Q6J("items",l)("headers",f.headerTable)("selectable",!0)}}function Me(n,a){if(1&n){const l=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.refreshButtonClicked())})("pageSelected",function(v){e.CHM(l);const T=e.oxw();return e.KtG(T.pageSelected(v))})("pageSizeChange",function(v){e.CHM(l);const T=e.oxw();return e.KtG(T.pageSizeChange(v))})("closeButtonClicked",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e._UZ(7,"div",10)(8,"div",11),e.TgZ(9,"div",12),e._UZ(10,"app-custom-button",13),e.TgZ(11,"app-print-button",14),e.NdJ("printButtonClicked",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.printButtonClicked())}),e.qZA()(),e.TgZ(12,"div",15),e.YNc(13,Pe,31,3,"table",16),e.ALo(14,"async"),e.qZA()()}if(2&n){const l=a.ngIf,f=e.oxw();e.Q6J("itemSelected",f.isItemSelected())("pageSize",l.pageSize)("currentPage",l.page)("totalElements",l.totalElement),e.xp6(1),e.Q6J("formGroup",f.searchForm),e.xp6(6),e.Q6J("formGroup",f.searchForm),e.xp6(6),e.Q6J("ngIf",e.lcZ(14,7,f.items$))}}let ye=(()=>{class n{constructor(l,f,v){this.router=l,this.store=f,this.incidentFormService=v,this.isUpdateActivated=!1,this.headerTable=["R\xe9f\xe9rence","Libell\xe9 Demande","Equipement","Statut","Priorit\xe9","S\xe9v\xe9rit\xe9","Impact","Demandeur","service/unit.Fonct","Date Cr\xe9ation","Date Cl\xf4ture","Date Dern modif"],this.items$=this.store.select($),this.page$=this.store.select(Y),this.pageSize$=this.store.select(U),this.totalElement$=this.store.select(K),this.data$=(0,m.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,u.U)(([T,Q,J])=>({page:T,pageSize:Q,totalElement:J}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.incidentFormService.createSearchForm(),this.store.dispatch(o.NY.loadItems())}validateButtonClicked(){const l=this.selectedItem?.id;l&&(this.store.dispatch(o.NY.resetItem()),this.router.navigate(["incidents","incidents-clotures","validate",l]))}itemSelected(l){this.selectedItem=l}pageSelected(l){this.store.dispatch(o.NY.changePage({page:l}))}pageSizeChange(l){this.store.dispatch(o.NY.changePageSize({pageSize:l}))}closeButtonClicked(){this.router.navigate(["incidents"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(o.NY.resetSearch())}searchButtonClicked(){this.store.dispatch(o.NY.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#e=this.\u0275fac=function(f){return new(f||n)(e.Y36(M.F0),e.Y36(s.yh),e.Y36(p.X))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-incident-clos-list"]],features:[e._Bn([p.X,i.x,c.W,d.P])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Support IT","pathLevelTwo","Incidents Cl\xf4tur\xe9s","pathLevelThree","Liste"],["title","Liste des Incidents Cl\xf4tur\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Incidents Cl\xf4tur\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","titre"],[1,"advance-search",3,"formGroup"],[1,"primary-actions"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Libell\xe9 Demande"],["app-header-attribute-def-template","","class","width-35",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","left",4,"appCellDefTemplate"],["appCellDef","Equipement"],["appCellDef","Statut"],["appCellDef","Demandeur"],["appCellDef","Priorit\xe9"],["appCellDef","S\xe9v\xe9rit\xe9"],["appCellDef","Date Cr\xe9ation"],["appCellDef","Date Cl\xf4ture"],["appCellDef","Date Modification"],["app-header-attribute-def-template",""],["app-cell-def-template",""],["app-header-attribute-def-template","",1,"width-35"],["app-cell-def-template","",1,"left"]],template:function(f,v){1&f&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,Me,15,9,"app-crud-list",2),e.ALo(3,"async")),2&f&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,v.data$)))},dependencies:[t.O5,D.L,F.JJ,F.JL,F.sg,F.u,W._,z.x,Z.N,A.D,X.h,k.u,q.O,ee.q,te.W,re.h,ne.Z,ie.V,t.Ov,t.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.left[_ngcontent-%COMP%]{text-align:left!important}"]})}return n})();var Te=r(8510),_=r(6465),Fe=r(9207),Oe=r(1793),Le=r(3396),Ae=r(2030),Be=r(9989),be=r(1946);let j=(()=>{class n extends Be.v{getResourceBasePath(){return`${be.y}/support-incident-clos`}getIdValue(l){return l.id}static#e=this.\u0275fac=function(){let l;return function(v){return(l||(l=e.n5z(n)))(v||n)}}();static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();var S=r(6063),xe=r(9862),Ye=r(2460),O=r(6328),Ue=r(9026),b=r(6306),w=r(9397),Ze=r(1631),P=r(2096),Re=r(3186),$e=r(4664),Ge=r(6366),Ke=r(797);let We=(()=>{class n{constructor(l,f,v,T,Q,J){this.incidentClosService=l,this.authService=f,this.actions$=v,this.router=T,this.modalService=Q,this.store=J,this.loadItems$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.loadItems),(0,Ye.M)(this.store.select(Y),this.store.select(U),this.store.select(G)),(0,O.b)(([g,I,R,H])=>(console.log(I),this.store.dispatch((0,S.Q)()),(0,Ue.$)(this.incidentClosService.getAllWithPagination(I,R,H),this.incidentClosService.count(H)).pipe((0,u.U)(([x,Qe])=>(this.store.dispatch((0,S.Z)()),o.NY.loadItemsSuccess({items:x,totalElement:Qe}))),(0,b.K)(x=>(this.store.dispatch((0,S.Z)()),(0,P.of)(o.NY.setError({errors:x})))))))),{dispatch:!0}),this.createItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.createItem),(0,O.b)(g=>(this.store.dispatch((0,S.Q)()),console.log(g.item),this.incidentClosService.add(g.item).pipe((0,w.b)(()=>{this.store.dispatch((0,S.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/incidents-clotures")}),(0,u.U)(I=>o.NY.createItemSuccess({item:I})),(0,b.K)(I=>(this.store.dispatch((0,S.Z)()),(0,P.of)(o.NY.setError({errors:I})))))))),{dispatch:!0}),this.loadItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.loadItem),(0,Ze.z)(g=>this.incidentClosService.findById(g.id).pipe((0,u.U)(I=>o.NY.loadItemSuccess({item:I})),(0,b.K)(I=>(this.store.dispatch((0,S.Z)()),(0,P.of)(o.NY.setError({errors:I}))))))),{dispatch:!0}),this.deleteItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.deleteItem),(0,O.b)(g=>this.incidentClosService.delete(g.item.id,g.item)),(0,w.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident supprim\xe9 avec succ\xe8s"})}),(0,u.U)(()=>o.NY.loadItems()),(0,b.K)(g=>(this.store.dispatch((0,S.Z)()),(0,P.of)(o.NY.setError({errors:g}))))),{dispatch:!0}),this.updateItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.updateItem),(0,O.b)(g=>(this.store.dispatch((0,S.Q)()),this.incidentClosService.update(g.item.id,g.item).pipe((0,w.b)(()=>{this.store.dispatch((0,S.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/incidents-clotures")}),(0,u.U)(I=>o.NY.createItemSuccess({item:I})),(0,b.K)(I=>(this.store.dispatch((0,S.Z)()),(0,P.of)(o.NY.setError({errors:I})))))))),{dispatch:!0}),this.loadFormModel$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.loadFormModel),(0,O.b)(()=>this.incidentClosService.getFormModel()),(0,u.U)(g=>o.NY.loadFormModelSuccess({formModel:g})),(0,b.K)(g=>(0,P.of)(o.NY.setError({errors:g}))))),this.resetSearch$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.resetSearch),(0,O.b)(()=>(0,P.of)(o.NY.changePage({page:1}))))),this.search$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.search),(0,O.b)(()=>(0,P.of)(o.NY.changePage({page:1}))))),this.changePage$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.changePage),(0,u.U)(g=>o.NY.loadItems()))),this.changePageSize$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.changePageSize),(0,O.b)(()=>(0,P.of)(o.NY.changePage({page:1}))))),this.handleError$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(o.NY.setError),(0,$e.w)(g=>{if(this.store.dispatch((0,S.Q)()),g.errors instanceof xe.UA){if(422===g.errors.status){let I="",R=0;for(const[H,x]of Object.entries(g.errors.error))I+=0===R?x:"\n"+x,R++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:I})}if(403===g.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===g.errors.status){let I="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,S.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:I}),(0,P.of)(Re.jM())}}return this.store.dispatch((0,S.Z)()),(0,P.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(f){return new(f||n)(e.LFG(j),e.LFG(Ge.e),e.LFG(_.eX),e.LFG(M.F0),e.LFG(Ke.Z),e.LFG(s.yh))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();const ze=[{path:"",component:ye,pathMatch:"prefix"}];let we=(()=>{class n{static#e=this.\u0275fac=function(f){return new(f||n)};static#t=this.\u0275mod=e.oAB({type:n});static#r=this.\u0275inj=e.cJS({providers:[j],imports:[t.ez,D.L,s.Aw.forFeature("incidents-clos",B),_.sQ.forFeature(We),Te.Y,Ae.h,Le.B,Oe.K,Fe.m,M.Bz.forChild(ze)]})}return n})()},8346:(C,h,r)=>{r.d(h,{W:()=>u});var t=r(9468),p=r(95),m=r(7394);let u=(()=>{class c{constructor(){this.placeholder="",this.type="text",this.readonly=!1,this.otherclass="",this.subscription=new m.w0,this.disabled=!1,this.onTouched=()=>{},this.onChange=()=>{},this.control=new p.NI}writeValue(i){this.control.setValue(i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,i?this.control.disable():this.control.enable()}ngOnInit(){this.subscription=this.control.valueChanges.subscribe(i=>{this.onChange(i)})}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||c)};static#t=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-custom-textfield"]],inputs:{placeholder:"placeholder",type:"type",readonly:"readonly",otherclass:"otherclass"},features:[t._Bn([{provide:p.JU,useExisting:(0,t.Gpc)(()=>c),multi:!0}])],decls:1,vars:7,consts:[[3,"type","placeholder","formControl","readonly"]],template:function(s,o){1&s&&t._UZ(0,"input",0),2&s&&(t.Gre("custom-text-field m-0 form-control-sm ",o.otherclass,""),t.s9C("placeholder",o.placeholder),t.Q6J("type",o.type)("formControl",o.control)("readonly",o.readonly))},dependencies:[p.Fj,p.JJ,p.oH],styles:[".custom-text-field[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border:1px solid #878787!important;margin-bottom:2px}.form-control-sm[_ngcontent-%COMP%]{font-size:12px!important;border-radius:0;min-width:100%}.custom-text-field[_ngcontent-%COMP%]:focus{background-color:#f0f4f5;border:0px!important;outline:0}.custom-text-field[_ngcontent-%COMP%]:read-only:focus{outline:0!important;border:1px solid #878787!important}"]})}return c})()},1171:(C,h,r)=>{r.d(h,{h:()=>p});var t=r(9468);let p=(()=>{class m{constructor(){this.title="",this.class=""}static#e=this.\u0275fac=function(d){return new(d||m)};static#t=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-form-label"]],inputs:{title:"title",class:"class"},decls:2,vars:4,template:function(d,i){1&d&&(t.TgZ(0,"label"),t._uU(1),t.qZA()),2&d&&(t.Tol(i.class),t.xp6(1),t.Oqu(i.title))},styles:["label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#464445;margin-right:5px;min-width:100%;max-width:100%}"]})}return m})()},3849:(C,h,r)=>{r.d(h,{L:()=>c});var t=r(9468),p=r(2463),m=r(6814),u=r(166);let c=(()=>{class d{constructor(){this.printButtonClicked=new t.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#e=this.\u0275fac=function(o){return new(o||d)};static#t=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[t.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(o,L){1&o&&(t.TgZ(0,"app-custom-button",0),t.NdJ("buttonClicked",function(){return L.emitPrintButtonClicked()}),t.qZA())},dependencies:[m.ez,p.v,u.x],styles:["[_nghost-%COMP%]{display:block}"]})}return d})()},547:(C,h,r)=>{r.d(h,{Z:()=>m});var t=r(9468),p=r(95);let m=(()=>{class u{constructor(d){this.ngControl=d}static#e=this.\u0275fac=function(i){return new(i||u)(t.Y36(p.a5,10))};static#t=this.\u0275dir=t.lG2({type:u,selectors:[["","formControl",""],["","formControlName",""]]})}return u})()}}]);