"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[6212],{6212:(T,P,r)=>{r.r(P),r.d(P,{JournalActionModule:()=>Nt});var c=r(6814),t=r(9468),p=r(95);let g=(()=>{class e{constructor(){}createForm(n){return new p.cw({utilisateur:new p.NI(n.utilisateur,{nonNullable:!0,validators:[p.kI.required]}),description:new p.NI(n.description)})}createSearchForm(){return new p.cw({utilisateur:new p.NI("",{nonNullable:!0,validators:[p.kI.required]}),description:new p.NI("",{nonNullable:!0,validators:[p.kI.required]})})}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var v=r(2572),h=r(7398),o=r(676);const l="JournalAction",_=(0,o.PH)(`[${l} API] Load All`),b=(0,o.PH)(`[${l} API] Load All Success`,(0,o.Ky)()),O=(0,o.PH)(`[${l} API] Create`,(0,o.Ky)()),G=(0,o.PH)(`[${l} API] Create Success`,(0,o.Ky)()),H=(0,o.PH)(`[${l} API] Create Error`,(0,o.Ky)()),N=(0,o.PH)(`[${l} API] Reset Error`),W=(0,o.PH)(`[${l} API] Reset Error Field`,(0,o.Ky)()),j=(0,o.PH)(`[${l} API] Load`,(0,o.Ky)()),R=(0,o.PH)(`[${l} API] Load Success`,(0,o.Ky)()),Y=(0,o.PH)(`[${l} API] Reset`),Q=(0,o.PH)(`[${l} API] Delete`,(0,o.Ky)()),k=(0,o.PH)(`[${l} API] Delete Success`,(0,o.Ky)()),s={loadItems:_,loadItemsSuccess:b,resetItem:Y,createItem:O,createItemSuccess:G,setError:H,resetError:N,resetErrorField:W,loadItem:j,loadItemSuccess:R,updateItem:(0,o.PH)(`[${l} API] Update`,(0,o.Ky)()),updateItemSuccess:(0,o.PH)(`[${l} API] Update Success`,(0,o.Ky)()),deleteItem:Q,deleteItemSuccess:k,loadFormModel:(0,o.PH)(`[${l} API] Load Form Model`),resetFormModel:(0,o.PH)(`[${l} API] Reset Form Model`),loadFormModelSuccess:(0,o.PH)(`[${l} API] Load Form Model Success`,(0,o.Ky)()),resetSearch:(0,o.PH)(`[${l} API] Reset Search`),search:(0,o.PH)(`[${l} API] Search`,(0,o.Ky)()),changePage:(0,o.PH)(`[${l} API] Change Page`,(0,o.Ky)()),changePageSize:(0,o.PH)(`[${l} API] Change Page Size`,(0,o.Ky)())},it=(0,o.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,o.on)(s.loadItemsSuccess,(e,i)=>({...e,items:i.items,totalElement:i.totalElement})),(0,o.on)(s.resetItem,(e,i)=>({...e,currentItem:null})),(0,o.on)(s.createItemSuccess,(e,i)=>({...e})),(0,o.on)(s.setError,(e,i)=>({...e,errors:i.errors})),(0,o.on)(s.resetError,(e,i)=>({...e,errors:null})),(0,o.on)(s.resetErrorField,(e,i)=>{let n={};return null!==e.errors&&Object.entries(e.errors).forEach(([a,m])=>{a!==i.fieldName&&(n[`${a}`]=m)}),{...e,errors:n}}),(0,o.on)(s.deleteItemSuccess,(e,i)=>({...e})),(0,o.on)(s.loadItemSuccess,(e,i)=>({...e,currentItem:i.item})),(0,o.on)(s.updateItemSuccess,(e,i)=>({...e})),(0,o.on)(s.loadFormModel,(e,i)=>({...e,formModel:null})),(0,o.on)(s.loadFormModelSuccess,(e,i)=>({...e,formModel:i.formModel})),(0,o.on)(s.resetSearch,(e,i)=>({...e,searchModel:{}})),(0,o.on)(s.search,(e,i)=>({...e,searchModel:i.searchModel})),(0,o.on)(s.changePage,(e,i)=>({...e,page:i.page})),(0,o.on)(s.changePageSize,(e,i)=>({...e,pageSize:i.pageSize}))),A=(0,o.ZF)("journal-actions"),at=(0,o.P1)(A,e=>e.items),ct=((0,o.P1)(A,e=>e.currentItem),(0,o.P1)(A,e=>e.errors),(0,o.P1)(A,e=>e.formModel),(0,o.P1)(A,e=>e.searchModel)),U=(0,o.P1)(A,e=>e.page),D=(0,o.P1)(A,e=>e.pageSize),lt=(0,o.P1)(A,e=>e.totalElement);var $=r(8281),z=r(3849),ut=r(7251),pt=r(166),dt=r(6327),mt=r(8564),ht=r(8223),ft=r(602),gt=r(1469),vt=r(6326),_t=r(8346),Ct=r(1171),Pt=r(547),St=r(362);function At(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Utilisateur"),t.qZA())}function It(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.utilisateur)}}function yt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Description"),t.qZA())}function Et(e,i){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.description)}}function Mt(e,i){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Date et Heure"),t.qZA())}function Tt(e,i){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,n.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function xt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"table",20),t.NdJ("itemSelected",function(m){t.CHM(n);const I=t.oxw(2);return t.KtG(I.itemSelected(m))}),t.ynx(1,21),t.YNc(2,At,2,0,"th",22),t.YNc(3,It,2,1,"td",23),t.BQk(),t.ynx(4,24),t.YNc(5,yt,2,0,"th",22),t.YNc(6,Et,2,1,"td",23),t.BQk(),t.ynx(7,25),t.YNc(8,Mt,2,0,"th",22),t.YNc(9,Tt,3,4,"td",26),t.BQk(),t.qZA()}if(2&e){const n=i.ngIf,a=t.oxw(2);t.Q6J("items",n)("headers",a.headerTable)("selectable",!0)}}function bt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"app-crud-list",3),t.NdJ("searchButtonClicked",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.searchButtonClicked())})("refreshButtonClicked",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.refreshButtonClicked())})("pageSelected",function(m){t.CHM(n);const I=t.oxw();return t.KtG(I.pageSelected(m))})("pageSizeChange",function(m){t.CHM(n);const I=t.oxw();return t.KtG(I.pageSizeChange(m))})("closeButtonClicked",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.closeButtonClicked())}),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6),t._UZ(4,"app-form-label",7),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"app-custom-textfield",9),t.qZA()()(),t.TgZ(7,"div",10)(8,"div",11)(9,"div",6),t._UZ(10,"app-form-label",12),t.qZA(),t.TgZ(11,"div",8),t._UZ(12,"app-custom-textfield",13),t.qZA()()(),t._UZ(13,"div",14),t.TgZ(14,"div",15),t._UZ(15,"app-custom-button",16),t.TgZ(16,"app-print-button",17),t.NdJ("printButtonClicked",function(){t.CHM(n);const m=t.oxw();return t.KtG(m.printButtonClicked())}),t.qZA()(),t.TgZ(17,"div",18),t.YNc(18,xt,10,3,"table",19),t.ALo(19,"async"),t.qZA()()}if(2&e){const n=i.ngIf,a=t.oxw();t.Q6J("itemSelected",a.isItemSelected())("pageSize",n.pageSize)("currentPage",n.page)("totalElements",n.totalElement),t.xp6(1),t.Q6J("formGroup",a.searchForm),t.xp6(6),t.Q6J("formGroup",a.searchForm),t.xp6(11),t.Q6J("ngIf",t.lcZ(19,7,a.items$))}}let $t=(()=>{class e{constructor(n,a,m,I){this.router=n,this.store=a,this.journalActionFormService=m,this.headerTable=["Utilisateur","Description","Date et Heure"],this.items$=this.store.select(at),this.page$=this.store.select(U),this.pageSize$=this.store.select(D),this.totalElement$=this.store.select(lt),this.data$=(0,v.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,h.U)(([Z,B,u])=>({page:Z,pageSize:B,totalElement:u}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.journalActionFormService.createSearchForm(),this.store.dispatch(s.loadItems())}itemSelected(n){this.selectedItem=n}pageSelected(n){this.store.dispatch(s.changePage({page:n}))}pageSizeChange(n){this.store.dispatch(s.changePageSize({pageSize:n}))}closeButtonClicked(){this.router.navigate(["administration"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(s.resetSearch())}searchButtonClicked(){this.store.dispatch(s.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36($.F0),t.Y36(o.yh),t.Y36(g),t.Y36(t.soG))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-journal-action-list"]],features:[t._Bn([g,{provide:t.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Profils et utilisateurs","pathLevelTwo","Traces utilisateurs","pathLevelThree","Liste"],["title","Liste des Traces d'Utilisateurs",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Traces d'Utilisateurs",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search-1"],["title","Nom d'Utilisateur"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","utilisateur"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Description"],["placeholder","","otherclass","item-input","formControlName","description"],[1,"primary-actions"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","Utilisateur"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Description"],["appCellDef","Date et Heure"],["app-cell-def-template","",4,"appCellDefTemplate"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template",""]],template:function(a,m){1&a&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,bt,20,9,"app-crud-list",2),t.ALo(3,"async")),2&a&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,m.data$)))},dependencies:[c.O5,z.L,p.JJ,p.JL,p.sg,p.u,ut._,pt.x,dt.N,mt.D,ht.h,ft.u,gt.O,vt.q,_t.W,Ct.h,Pt.Z,St.V,c.Ov,c.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return e})();var d=r(6465),Lt=r(9207),Zt=r(9026),J=r(1631),L=r(9397),y=r(6328),E=r(6306),Bt=r(9862),C=r(2096),S=r(6063),Ft=r(2460),Ot=r(3186),Ut=r(4664),Dt=r(9989),zt=r(1946);let K=(()=>{class e extends Dt.v{getResourceBasePath(){return`${zt.y}/journalActionUtilisateur`}static#t=this.\u0275fac=function(){let n;return function(m){return(n||(n=t.n5z(e)))(m||e)}}();static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var Jt=r(6366),Kt=r(797);let Gt=(()=>{class e{constructor(n,a,m,I,Z,B){this.journalActionService=n,this.authService=a,this.actions$=m,this.router=I,this.modalService=Z,this.store=B,this.loadItems$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadItems),(0,Ft.M)(this.store.select(U),this.store.select(D),this.store.select(ct)),(0,y.b)(([u,f,x,F])=>(console.log(f),this.store.dispatch((0,S.Q)()),(0,Zt.$)(this.journalActionService.getAllWithPagination(f,x,F),this.journalActionService.count(F)).pipe((0,h.U)(([M,Wt])=>(this.store.dispatch((0,S.Z)()),s.loadItemsSuccess({items:M,totalElement:Wt}))),(0,E.K)(M=>(this.store.dispatch((0,S.Z)()),(0,C.of)(s.setError({errors:M})))))))),{dispatch:!0}),this.createItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.createItem),(0,J.z)(u=>this.journalActionService.add(u.item).pipe((0,L.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Groupe utilisateur ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/trace-utilisateur")}),(0,h.U)(f=>s.createItemSuccess({item:f})),(0,E.K)(f=>(this.store.dispatch((0,S.Z)()),(0,C.of)(s.setError({errors:f}))))))),{dispatch:!0}),this.loadItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadItem),(0,J.z)(u=>this.journalActionService.findById(u.id).pipe((0,h.U)(f=>s.loadItemSuccess({item:f})),(0,E.K)(f=>(this.store.dispatch((0,S.Z)()),(0,C.of)(s.setError({errors:f}))))))),{dispatch:!0}),this.deleteItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.deleteItem),(0,y.b)(u=>this.journalActionService.delete(u.item.id,u.item)),(0,L.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Groupe utilisateur supprim\xe9 avec succ\xe8s"})}),(0,h.U)(()=>s.loadItems()),(0,E.K)(u=>(this.store.dispatch((0,S.Z)()),(0,C.of)(s.setError({errors:u}))))),{dispatch:!0}),this.updateItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.updateItem),(0,y.b)(u=>this.journalActionService.update(u.item.id,u.item).pipe((0,L.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Groupe utilisateur modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/trace-utilisateur")}),(0,E.K)(f=>(this.store.dispatch((0,S.Z)()),(0,C.of)(s.setError({errors:f}))))))),{dispatch:!1}),this.loadFormModel$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadFormModel),(0,y.b)(()=>this.journalActionService.getFormModel()),(0,h.U)(u=>s.loadFormModelSuccess({formModel:u})),(0,E.K)(u=>(0,C.of)(s.setError({errors:u}))))),this.resetSearch$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.resetSearch),(0,y.b)(()=>(0,C.of)(s.changePage({page:1}))))),this.search$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.search),(0,y.b)(()=>(0,C.of)(s.changePage({page:1}))))),this.changePage$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.changePage),(0,h.U)(u=>s.loadItems()))),this.changePageSize$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.changePageSize),(0,y.b)(()=>(0,C.of)(s.changePage({page:1}))))),this.handleError$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.setError),(0,Ut.w)(u=>{if(this.store.dispatch((0,S.Q)()),u.errors instanceof Bt.UA){if(422===u.errors.status){let f="",x=0;for(const[F,M]of Object.entries(u.errors.error))f+=0===x?M:"\n"+M,x++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:f})}if(403===u.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===u.errors.status){let f="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,S.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:f}),(0,C.of)(Ot.jM())}404===u.errors.status&&this.router.navigateByUrl("administration/error")}return this.store.dispatch((0,S.Z)()),(0,C.of)({type:"noop"})})),{dispatch:!0})}static#t=this.\u0275fac=function(a){return new(a||e)(t.LFG(K),t.LFG(Jt.e),t.LFG(d.eX),t.LFG($.F0),t.LFG(Kt.Z),t.LFG(o.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();const Ht=[{path:"",component:$t,pathMatch:"prefix",data:{routeModel:{module:"application",path:"journalActionUtilisateur"}}}];let Nt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({providers:[K],imports:[c.ez,z.L,o.Aw.forFeature("journal-actions",it),d.sQ.forFeature(Gt),Lt.m,$.Bz.forChild(Ht)]})}return e})()},8346:(T,P,r)=>{r.d(P,{W:()=>g});var c=r(9468),t=r(95),p=r(7394);let g=(()=>{class v{constructor(){this.placeholder="",this.type="text",this.readonly=!1,this.otherclass="",this.subscription=new p.w0,this.disabled=!1,this.onTouched=()=>{},this.onChange=()=>{},this.control=new t.NI}writeValue(o){this.control.setValue(o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o,o?this.control.disable():this.control.enable()}ngOnInit(){this.subscription=this.control.valueChanges.subscribe(o=>{this.onChange(o)})}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(l){return new(l||v)};static#e=this.\u0275cmp=c.Xpm({type:v,selectors:[["app-custom-textfield"]],inputs:{placeholder:"placeholder",type:"type",readonly:"readonly",otherclass:"otherclass"},features:[c._Bn([{provide:t.JU,useExisting:(0,c.Gpc)(()=>v),multi:!0}])],decls:1,vars:7,consts:[[3,"type","placeholder","formControl","readonly"]],template:function(l,_){1&l&&c._UZ(0,"input",0),2&l&&(c.Gre("custom-text-field m-0 form-control-sm ",_.otherclass,""),c.s9C("placeholder",_.placeholder),c.Q6J("type",_.type)("formControl",_.control)("readonly",_.readonly))},dependencies:[t.Fj,t.JJ,t.oH],styles:[".custom-text-field[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border:1px solid #878787!important;margin-bottom:2px}.form-control-sm[_ngcontent-%COMP%]{font-size:12px!important;border-radius:0;min-width:100%}.custom-text-field[_ngcontent-%COMP%]:focus{background-color:#f0f4f5;border:0px!important;outline:0}.custom-text-field[_ngcontent-%COMP%]:read-only:focus{outline:0!important;border:1px solid #878787!important}"]})}return v})()},1171:(T,P,r)=>{r.d(P,{h:()=>t});var c=r(9468);let t=(()=>{class p{constructor(){this.title="",this.class=""}static#t=this.\u0275fac=function(h){return new(h||p)};static#e=this.\u0275cmp=c.Xpm({type:p,selectors:[["app-form-label"]],inputs:{title:"title",class:"class"},decls:2,vars:4,template:function(h,o){1&h&&(c.TgZ(0,"label"),c._uU(1),c.qZA()),2&h&&(c.Tol(o.class),c.xp6(1),c.Oqu(o.title))},styles:["label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#464445;margin-right:5px;min-width:100%;max-width:100%}"]})}return p})()},3849:(T,P,r)=>{r.d(P,{L:()=>v});var c=r(9468),t=r(2463),p=r(6814),g=r(166);let v=(()=>{class h{constructor(){this.printButtonClicked=new c.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#t=this.\u0275fac=function(_){return new(_||h)};static#e=this.\u0275cmp=c.Xpm({type:h,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[c.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(_,b){1&_&&(c.TgZ(0,"app-custom-button",0),c.NdJ("buttonClicked",function(){return b.emitPrintButtonClicked()}),c.qZA())},dependencies:[p.ez,t.v,g.x],styles:["[_nghost-%COMP%]{display:block}"]})}return h})()},547:(T,P,r)=>{r.d(P,{Z:()=>p});var c=r(9468),t=r(95);let p=(()=>{class g{constructor(h){this.ngControl=h}static#t=this.\u0275fac=function(o){return new(o||g)(c.Y36(t.a5,10))};static#e=this.\u0275dir=c.lG2({type:g,selectors:[["","formControl",""],["","formControlName",""]]})}return g})()}}]);