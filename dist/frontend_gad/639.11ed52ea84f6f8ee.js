"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[639],{639:(U,b,i)=>{i.r(b),i.d(b,{IncidentRechercheModule:()=>at});var o=i(6814),C=i(8281),r=i(676),y=i(9207),c=i(6465);const d="Incident Recherch\xe9",u=(0,r.PH)(`[${d} API] Load All`,(0,r.Ky)()),f=(0,r.PH)(`[${d} API] Load All Success`,(0,r.Ky)()),T=(0,r.PH)(`[${d} API] Create`,(0,r.Ky)()),p=(0,r.PH)(`[${d} API] Create Success`,(0,r.Ky)()),x=(0,r.PH)(`[${d} API] Load`,(0,r.Ky)()),h=(0,r.PH)(`[${d} API] Load Success`,(0,r.Ky)()),g=(0,r.PH)(`[${d} API] Create Error`,(0,r.Ky)()),I=(0,r.PH)(`[${d} API] Reset Error`),P=(0,r.PH)(`[${d} API] Reset Error Field`,(0,r.Ky)()),M=(0,r.PH)(`[${d} API] Reset`),F=(0,r.PH)(`[${d} API] Delete`,(0,r.Ky)()),q=(0,r.PH)(`[${d} API] Delete Success`,(0,r.Ky)()),m={loadItems:u,loadItemsSuccess:f,resetItem:M,createItem:T,createItemSuccess:p,loadItem:x,loadItemSuccess:h,updateItem:(0,r.PH)(`[${d} API] Update`,(0,r.Ky)()),updateItemSuccess:(0,r.PH)(`[${d} API] Update Success`,(0,r.Ky)()),deleteItem:F,deleteItemSuccess:q,setError:g,resetError:I,resetErrorField:P,loadFormModelSuccess:(0,r.PH)(`[${d} API] Load Form Model Success`,(0,r.Ky)()),resetSearch:(0,r.PH)(`[${d} API] Reset Search`),search:(0,r.PH)(`[${d} API] Search`,(0,r.Ky)())},te=(0,r.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,r.on)(m.loadItemsSuccess,(t,l)=>({...t,items:l.items})),(0,r.on)(m.resetItem,(t,l)=>({...t,currentItem:null})),(0,r.on)(m.createItemSuccess,(t,l)=>({...t})),(0,r.on)(m.deleteItemSuccess,(t,l)=>({...t})),(0,r.on)(m.loadItemSuccess,(t,l)=>({...t,currentItem:l.item})),(0,r.on)(m.updateItemSuccess,(t,l)=>({...t})),(0,r.on)(m.setError,(t,l)=>({...t,errors:l.errors})),(0,r.on)(m.resetError,(t,l)=>({...t,errors:null})),(0,r.on)(m.resetErrorField,(t,l)=>{let n={};return null!==t.errors&&Object.entries(t.errors).forEach(([a,s])=>{a!==l.fieldName&&(n[`${a}`]=s)}),{...t,errors:n}})),A=(0,r.ZF)("incident-recherches");var ne=i(9862),Z=i(6063),L=i(6328),R=i(7398),S=i(6306),$=i(9397),oe=i(1631),D=i(2096),ie=i(3186),re=i(4664),e=i(9468),se=i(9989),ce=i(1946);let z=(()=>{class t extends se.v{getResourceBasePath(){return`${ce.y}/base-connaissance`}rechercher(n){return this.http.post(`${this.url}/${this.getResourceBasePath()}/rechercher`,n)}static#e=this.\u0275fac=function(){let n;return function(s){return(n||(n=e.n5z(t)))(s||t)}}();static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var ae=i(6366),B=i(797);let le=(()=>{class t{constructor(n,a,s,O,Y,lt){this.incidentRechercheService=n,this.authService=a,this.actions$=s,this.router=O,this.modalService=Y,this.store=lt,this.loadItems$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.loadItems),(0,L.b)(v=>(this.store.dispatch((0,Z.Q)()),this.incidentRechercheService.rechercher(v.criteria).pipe((0,R.U)(_=>(this.store.dispatch((0,Z.Z)()),m.loadItemsSuccess({items:_}))),(0,S.K)(_=>(this.store.dispatch((0,Z.Z)()),(0,D.of)(m.setError({errors:_})))))))),{dispatch:!0}),this.createItem$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.createItem),(0,L.b)(v=>(this.store.dispatch((0,Z.Q)()),this.incidentRechercheService.add(v.item).pipe((0,$.b)(()=>{this.store.dispatch((0,Z.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident ajout\xe9e avec succ\xe8s"}),this.router.navigateByUrl("incidents/categorie-incident")}),(0,R.U)(_=>m.createItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,Z.Z)()),(0,D.of)(m.setError({errors:_})))))))),{dispatch:!0}),this.loadItem$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.loadItem),(0,oe.z)(v=>this.incidentRechercheService.findById(v.id).pipe((0,R.U)(_=>m.loadItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,Z.Z)()),(0,D.of)(m.setError({errors:_}))))))),{dispatch:!0}),this.deleteItem$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.deleteItem),(0,L.b)(v=>this.incidentRechercheService.delete(v.item.id,v.item)),(0,$.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident supprim\xe9e avec succ\xe8s"})}),(0,R.U)(()=>{}),(0,S.K)(v=>(this.store.dispatch((0,Z.Z)()),(0,D.of)(m.setError({errors:v}))))),{dispatch:!1}),this.updateItem$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.updateItem),(0,L.b)(v=>(this.store.dispatch((0,Z.Q)()),this.incidentRechercheService.update(v.id,v.item).pipe((0,$.b)(()=>{this.store.dispatch((0,Z.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident modifi\xe9e avec succ\xe8s"}),this.router.navigateByUrl("incidents/categorie-incident")}),(0,R.U)(_=>m.createItemSuccess({item:_})),(0,S.K)(_=>(this.store.dispatch((0,Z.Z)()),(0,D.of)(m.setError({errors:_})))))))),{dispatch:!0}),this.handleError$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(m.setError),(0,re.w)(v=>{if(this.store.dispatch((0,Z.Q)()),v.errors instanceof ne.UA){if(422===v.errors.status){let _="",H=0;for(const[gt,W]of Object.entries(v.errors.error))_+=0===H?W:"\n"+W,H++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:_})}if(403===v.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===v.errors.status){let _="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,Z.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:_}),(0,D.of)(ie.jM())}}return this.store.dispatch((0,Z.Z)()),(0,D.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(z),e.LFG(ae.e),e.LFG(c.eX),e.LFG(C.F0),e.LFG(B.Z),e.LFG(r.yh))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var de=i(362),E=i(95);let N=(()=>{class t{constructor(){}createForm(n){return new E.cw({text:new E.NI(n.text,{nonNullable:!0,validators:[E.kI.required]})})}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const pe=(0,r.P1)(A,t=>t.items),ue=((0,r.P1)(A,t=>t.currentItem),(0,r.P1)(A,t=>t.formModel),(0,r.P1)(A,t=>t.searchModel),(0,r.P1)(A,t=>t.page),(0,r.P1)(A,t=>t.pageSize),(0,r.P1)(A,t=>t.totalElement),(0,r.P1)(A,t=>t.errors));var K=i(1892),me=i(9491),he=i(1728),Q=i(166),w=i(9887);function fe(t,l){if(1&t&&(e.TgZ(0,"div",19)(1,"div",26)(2,"span",15),e._uU(3),e.qZA()()()),2&t){const n=l.$implicit;e.xp6(3),e.AsE("",n.numeroEtape,". ",null==n.actionSuggere?null:n.actionSuggere.libelle,"")}}function ge(t,l){if(1&t&&(e.TgZ(0,"app-panel-custom",24)(1,"div",6),e.YNc(2,fe,4,2,"div",25),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.solutionDto.etapes)}}let _e=(()=>{class t{constructor(n,a,s){this.modalData=n,this.modalRef=a,this.store=s,this.id="",this.solutionDto=null,this.solution$=this.store.select(me.p),this.id=this.modalData.data.id,this.incident=this.modalData.data.incident}ngOnInit(){console.log(this.incident.solution),this.store.dispatch(he.NY.loadItem({id:this.incident.solution.id})),this.solution$.subscribe(n=>{n&&(this.solutionDto={id:n.id,code:n.code,libelle:n.libelle,description:n.description,nombreEtape:n.nombreEtape,incident:n.incident,etapes:n.etapes})}),console.log(this.solutionDto)}close(){this.modalRef.close(void 0)}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(K.S),e.Y36(K.R),e.Y36(r.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal-cloture"]],decls:101,vars:19,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Informations sur l'Incident"],[1,"general-info","flex-column"],[1,"col-12","mb-2","d-flex","row"],[1,"text-start"],[1,"poppins-bold","text-success"],[1,"col-12","mb-2","flex","row"],[1,"col-3"],[1,"text-end"],[1,"poppins-bold"],[1,"col-6"],[1,"text-end","poppins-bold"],[1,"text-end","poppins-bold","text-success"],[1,"col-12","mb-1","flex","row"],["icon","fa fa-angle-right","title","Informations sur la Solution"],[1,"col-12","mb-3","flex","row"],[1,"col-4"],["icon","fa fa-angle-right","title","Liste des \xe9tapes",4,"ngIf"],[1,"form-actions","mt-2"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"],["icon","fa fa-angle-right","title","Liste des \xe9tapes"],["class","col-12 mb-3 flex row",4,"ngFor","ngForOf"],[1,"col-12"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"D\xe9tails sur l'Incident"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-panel-custom",5)(7,"div",6)(8,"div",7)(9,"span",8),e._uU(10,"Titre: "),e.TgZ(11,"span",9),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"span",12),e._uU(16,"Type Incident: "),e.qZA(),e.TgZ(17,"span",13),e._uU(18),e.qZA()(),e.TgZ(19,"div",14)(20,"span",12),e._uU(21,"Equipement: "),e.qZA(),e.TgZ(22,"span",9),e._uU(23),e.qZA()(),e.TgZ(24,"div",11)(25,"span",12),e._uU(26,"Impact: "),e.qZA(),e.TgZ(27,"span",15),e._uU(28),e.qZA()()(),e.TgZ(29,"div",10)(30,"div",11)(31,"span",12),e._uU(32,"Probl\xe8me: "),e.qZA(),e.TgZ(33,"span",13),e._uU(34),e.qZA()(),e.TgZ(35,"div",11)(36,"span",12),e._uU(37,"Cat\xe9gorie: "),e.qZA(),e.TgZ(38,"span",13),e._uU(39),e.qZA()(),e.TgZ(40,"div",11)(41,"span",12),e._uU(42,"Priorit\xe9: "),e.qZA(),e.TgZ(43,"span",15),e._uU(44),e.qZA()(),e.TgZ(45,"div",11)(46,"span",12),e._uU(47,"Source: "),e.qZA(),e.TgZ(48,"span",15),e._uU(49),e.qZA()()(),e.TgZ(50,"div",10)(51,"div",11)(52,"span",12),e._uU(53,"S\xe9v\xe9rit\xe9: "),e.qZA(),e.TgZ(54,"span",15),e._uU(55),e.qZA()(),e.TgZ(56,"div",11)(57,"span",12),e._uU(58,"Visibilit\xe9: "),e.qZA(),e._UZ(59,"span",15),e.qZA(),e.TgZ(60,"div",11)(61,"span",12),e._uU(62,"Emis par: "),e.qZA(),e.TgZ(63,"span",16),e._uU(64),e.qZA()(),e.TgZ(65,"div",11)(66,"span",12),e._uU(67,"Affect\xe9 \xe0: "),e.qZA(),e.TgZ(68,"span",16),e._uU(69),e.qZA()()(),e.TgZ(70,"div",17)(71,"span",8),e._uU(72,"Description: "),e.qZA(),e.TgZ(73,"span",13),e._uU(74),e.qZA()()()(),e.TgZ(75,"app-panel-custom",18)(76,"div",6)(77,"div",19)(78,"div",20)(79,"span",12),e._uU(80,"Code Solution: "),e.qZA(),e.TgZ(81,"span",15),e._uU(82),e.qZA()(),e.TgZ(83,"div",20)(84,"span",12),e._uU(85,"Libell\xe9: "),e.qZA(),e.TgZ(86,"span",13),e._uU(87),e.qZA()(),e.TgZ(88,"div",20)(89,"span",12),e._uU(90,"Nombre d'Etapes: "),e.qZA(),e.TgZ(91,"span",13),e._uU(92),e.qZA()()(),e.TgZ(93,"div",17)(94,"span",8),e._uU(95,"Description: "),e.qZA(),e.TgZ(96,"span",13),e._uU(97),e.qZA()()()(),e.YNc(98,ge,3,1,"app-panel-custom",21),e.qZA(),e.TgZ(99,"div",22)(100,"app-custom-button",23),e.NdJ("buttonClicked",function(){return s.close()}),e.qZA()()()),2&a&&(e.xp6(12),e.Oqu(s.incident.titre),e.xp6(6),e.Oqu(s.incident.typeIncident),e.xp6(5),e.Oqu(s.incident.equipement.libelle),e.xp6(5),e.Oqu(s.incident.impact.libelle),e.xp6(6),e.Oqu(s.incident.probleme.libelle),e.xp6(5),e.Oqu(s.incident.categorieIncident.libelle),e.xp6(5),e.Oqu(s.incident.prioriteIncident),e.xp6(5),e.Oqu(null==s.incident.source?null:s.incident.source.libelle),e.xp6(6),e.Oqu(null==s.incident.severite?null:s.incident.severite.libelle),e.xp6(9),e.AsE("",null==s.incident.demandeur?null:s.incident.demandeur.firstName," ",null==s.incident.demandeur?null:s.incident.demandeur.lastName,""),e.xp6(5),e.AsE("",null==s.incident.gestionnaire?null:s.incident.gestionnaire.firstName," ",null==s.incident.gestionnaire?null:s.incident.gestionnaire.lastName,""),e.xp6(5),e.Oqu(s.incident.description),e.xp6(8),e.Oqu(null==s.incident.solution?null:s.incident.solution.code),e.xp6(5),e.Oqu(null==s.incident.solution?null:s.incident.solution.libelle),e.xp6(5),e.Oqu(null==s.incident.solution?null:s.incident.solution.nombreEtape),e.xp6(5),e.Oqu(null==s.incident.solution?null:s.incident.solution.description),e.xp6(1),e.Q6J("ngIf",s.solutionDto))},dependencies:[o.sg,o.O5,Q.x,w.l],styles:["*[_ngcontent-%COMP%]{font-family:aileronlight}.poppins-bold[_ngcontent-%COMP%]{font-family:Poppins;font-weight:700}.general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%;font-size:13px!important}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.form-main[_ngcontent-%COMP%]{overflow-y:auto;height:400px}.alert-header[_ngcontent-%COMP%]{background-color:#2c3963;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}"]})}return t})();var Ce=i(4849),ve=i(6327),be=i(8564),xe=i(8223),ye=i(602),Ze=i(1469),Te=i(6326);function Ie(t,l){if(1&t&&e._UZ(0,"div",4),2&t){const n=e.oxw();e.Jzz("width: ",n.getValue(),"% !important;")}}function Pe(t,l){if(1&t&&e._UZ(0,"div",5),2&t){const n=e.oxw();e.Jzz("width: ",n.getValue(),"% !important;")}}let J=(()=>{class t{constructor(){this.valueMin=10,this.valueMax=10,this.value=0}getValue(){return Math.round(Number(this.valueMin)/Number(this.valueMax)*100)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-progress-bar"]],inputs:{valueMin:"valueMin",valueMax:"valueMax"},standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[1,"progress-bar-custom"],["class","progress-bar-intern",3,"style",4,"ngIf"],[1,""],["class","full-progress-bar",3,"style",4,"ngIf"],[1,"progress-bar-intern"],[1,"full-progress-bar"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e.YNc(1,Ie,1,3,"div",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e.YNc(4,Pe,1,3,"div",3),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",s.getValue()<100),e.xp6(2),e.hij("",s.getValue(),"%"),e.xp6(1),e.Q6J("ngIf",100===s.getValue()))},dependencies:[o.ez,o.O5],styles:["[_nghost-%COMP%]{width:100%}.progress-bar-custom[_ngcontent-%COMP%]{height:10px;border-radius:10px;border:1px solid #bfd1ec;background-color:#bfd1ec;width:100%;padding:0!important;display:flex;align-items:center;text-align:center;font-size:10px;position:relative}.progress-bar-intern[_ngcontent-%COMP%]{background-color:#0c63e4;height:9px;border-top-left-radius:10px;border-bottom-left-radius:10px}.full-progress-bar[_ngcontent-%COMP%]{background-color:#5eb78b;height:9px;border-radius:10px}span[_ngcontent-%COMP%]{position:absolute;left:40%}"]})}return t})();function Oe(t,l){1&t&&(e.TgZ(0,"th",19),e._uU(1,"N\xb0"),e.qZA())}function Me(t,l){if(1&t&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.Oqu(n.id)}}function Ae(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Code"),e.qZA())}function Ee(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.Oqu(n.refSys)}}function Ue(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Libell\xe9 Demande"),e.qZA())}function De(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.Oqu(n.titre)}}function Re(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Equipement"),e.qZA())}function Se(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.hij("",n.equipement.libelle," ")}}function Fe(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"R\xe9solu Par"),e.qZA())}function Le(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.AsE(" ",null==n.gestionnaire?null:n.gestionnaire.firstName," ",null==n.gestionnaire?null:n.gestionnaire.lastName," ")}}function Ne(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Emis Par"),e.qZA())}function $e(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.AsE(" ",null==n.demandeur?null:n.demandeur.firstName," ",null==n.demandeur?null:n.demandeur.lastName," ")}}function Be(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Score"),e.qZA())}function Ye(t,l){1&t&&e._UZ(0,"td",22)}function qe(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Pertinence"),e.qZA())}function ze(t,l){if(1&t&&(e.TgZ(0,"td",22),e._UZ(1,"app-progress-bar",23),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.s9C("valueMin",n.scoreSearch),e.s9C("valueMax",n.maxScoreSearch)}}function Ke(t,l){1&t&&(e.TgZ(0,"th",21),e._uU(1,"Date Cr\xe9ation"),e.qZA())}function Qe(t,l){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const n=l.$implicit;e.xp6(1),e.hij("",e.xi3(2,1,n.dateCreation,"dd/MM/y \xe0 HH:mm:ss")," ")}}function we(t,l){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Actions"),e.qZA())}function Je(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"td",24)(1,"app-custom-button",25),e.NdJ("buttonClicked",function(){const O=e.CHM(n).$implicit,Y=e.oxw(2);return e.KtG(Y.detailsButtonClicked(O))}),e.qZA()()}}function He(t,l){if(1&t&&(e.TgZ(0,"table",3),e.ynx(1,4),e.YNc(2,Oe,2,0,"th",5),e.YNc(3,Me,2,1,"td",6),e.BQk(),e.ynx(4,7),e.YNc(5,Ae,2,0,"th",8),e.YNc(6,Ee,2,1,"td",9),e.BQk(),e.ynx(7,10),e.YNc(8,Ue,2,0,"th",8),e.YNc(9,De,2,1,"td",9),e.BQk(),e.ynx(10,11),e.YNc(11,Re,2,0,"th",8),e.YNc(12,Se,2,1,"td",9),e.BQk(),e.ynx(13,12),e.YNc(14,Fe,2,0,"th",8),e.YNc(15,Le,2,2,"td",9),e.BQk(),e.ynx(16,13),e.YNc(17,Ne,2,0,"th",8),e.YNc(18,$e,2,2,"td",9),e.BQk(),e.ynx(19,14),e.YNc(20,Be,2,0,"th",8),e.YNc(21,Ye,1,0,"td",9),e.BQk(),e.ynx(22,15),e.YNc(23,qe,2,0,"th",8),e.YNc(24,ze,2,2,"td",9),e.BQk(),e.ynx(25,16),e.YNc(26,Ke,2,0,"th",8),e.YNc(27,Qe,3,4,"td",9),e.BQk(),e.ynx(28,17),e.YNc(29,we,2,0,"th",5),e.YNc(30,Je,2,0,"td",18),e.BQk(),e.qZA()),2&t){const n=l.ngIf,a=e.oxw();e.Q6J("items",n)("headers",a.headerTable)}}let We=(()=>{class t{constructor(n,a,s,O){this.router=n,this.incidentRechercheFormService=a,this.store=s,this.modalService=O,this.isUpdateActivated=!1,this.headerTable=["Pertinence","N\xb0","Code","Libell\xe9 Demande","Equipement","Statut","Emis Par","R\xe9solu par","Date Cr\xe9ation","Date Dern modif","Actions"],this.items$=this.store.select(pe),this.selectedItem=null}ngOnInit(){}addButtonClicked(){this.router.navigate(["incidents","nouvel-incident","add"])}editButtonClicked(){const n=this.selectedItem?.id;n&&(this.store.dispatch(m.resetItem()),this.router.navigate(["incidents","nouvel-incident","edit",n]))}deleteButtonClicked(){const n=this.selectedItem;n&&this.modalService.openComponent(Ce.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(a=>{a&&"yes"===a&&this.store.dispatch(m.deleteItem({item:n}))})}detailsButtonClicked(n){n.id&&this.modalService.openComponent(_e,{data:{id:n.id,incident:n,idSolution:n.solution.id}})}itemSelected(n){this.selectedItem=n}closeButtonClicked(){this.router.navigate(["incidents"])}isItemSelected(){return null!==this.selectedItem}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(C.F0),e.Y36(N),e.Y36(r.yh),e.Y36(B.Z))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-incident-recherche-list"]],features:[e._Bn([N,{provide:e.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pe-3","ps-3","mt-3"],[1,"col-12","d-flex","justify-content-center","align-items-center"],["appDynamicTable","",3,"items","headers",4,"ngIf"],["appDynamicTable","",3,"items","headers"],["appCellDef","N\xb0"],["app-header-attribute-def-template","","class","text-center",4,"appHeaderDefTemplate"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Code"],["app-header-attribute-def-template","","class","ps-2",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Libell\xe9 Demande"],["appCellDef","Equipement"],["appCellDef","R\xe9solu par"],["appCellDef","Emis Par"],["appCellDef","Score"],["appCellDef","Pertinence"],["appCellDef","Date Cr\xe9ation"],["appCellDef","Actions"],["app-cell-def-template","","class","text-center",4,"appCellDefTemplate"],["app-header-attribute-def-template","",1,"text-center"],["app-cell-def-template",""],["app-header-attribute-def-template","",1,"ps-2"],["app-cell-def-template","",1,"text-start"],[3,"valueMin","valueMax"],["app-cell-def-template","",1,"text-center"],["icon","icon-eye btn-icon-add fw-bold",3,"buttonClicked"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,He,31,2,"table",2),e.ALo(3,"async"),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,s.items$)))},dependencies:[o.O5,Q.x,ve.N,be.D,xe.h,ye.u,Ze.O,Te.q,J,o.Ov,o.uU],styles:["[_nghost-%COMP%]{width:100%}"]})}return t})();var je=i(7394),Ge=i(8346),ke=i(1171),Ve=i(9543),Xe=i(547),et=i(7426);function tt(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),e._UZ(5,"app-form-label",7),e.TgZ(6,"div",8)(7,"app-field-error-wrapper",9),e.NdJ("resetField",function(s){e.CHM(n);const O=e.oxw();return e.KtG(O.resetBackendError(s))}),e._UZ(8,"app-custom-textfield",10),e.qZA()()()()(),e.TgZ(9,"div",11)(10,"app-primary-button",12),e.NdJ("buttonClicked",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.submitForm())}),e.qZA()()()()}if(2&t){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("errors",n.errors)}}let nt=(()=>{class t{constructor(n,a,s,O){this.incidentRechercheFormService=n,this.modalService=a,this.router=s,this.store=O,this.errors=null,this.formSubmitted=new e.vpe,this.subscription=new je.w0,this.incidentRecherche={text:""}}ngOnInit(){this.store.select(ue).subscribe(n=>{this.errors=n}),this.store.dispatch(m.resetError()),this.form=this.incidentRechercheFormService.createForm(this.incidentRecherche)}ngOnDestroy(){}submitForm(){let n=this.form.get("text")?.value;n&&this.store.dispatch(m.loadItems({criteria:{text:n}}))}returnToList(){this.router.navigateByUrl("incidents")}resetBackendError(n){this.store.dispatch(m.resetErrorField({fieldName:n}))}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(N),e.Y36(B.Z),e.Y36(C.F0),e.Y36(r.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-incident-recherche-form"]],outputs:{formSubmitted:"formSubmitted"},features:[e._Bn([N])],decls:2,vars:1,consts:[[1,"pe-3","ps-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Formulaire de recherche"],[1,"general-info"],[1,"input-container","col-12"],["title","Libell\xe9 de Recherche",1,"w-form","text-end"],[1,"input-textfield-container","col"],[3,"errors","resetField"],["otherclass","custom-style-form","placeholder","","formControlName","text"],[1,"form-actions"],["title","Rechercher",1,"me-1",3,"buttonClicked"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e.YNc(1,tt,11,2,"form",1),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",s.form))},dependencies:[o.O5,E._Y,E.JJ,E.JL,E.sg,E.u,Ge.W,ke.h,Ve.C,Xe.Z,et.p,w.l],styles:["[_nghost-%COMP%]{font-size:12px}.general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-container[_ngcontent-%COMP%] + .input-container[_ngcontent-%COMP%]{//margin-left: 32px}.input-textfield-container[_ngcontent-%COMP%]{width:250px;margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return t})(),ot=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-incident-recherche"]],decls:4,vars:0,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Base de connaissance","pathLevelTwo","Recherche Incident","pathLevelThree","Liste"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e._UZ(2,"app-incident-recherche-form")(3,"app-incident-recherche-list"))},dependencies:[de.V,We,nt],styles:["[_nghost-%COMP%]{width:100%}"]})}return t})();var it=i(1544),rt=i(9183),st=i(6332);const ct=[{path:"",component:ot,pathMatch:"prefix"}];let at=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({providers:[z,st.V],imports:[o.ez,r.Aw.forFeature("incident-recherches",te),r.Aw.forFeature("solution-acceptees",it.PR),c.sQ.forFeature(le),c.sQ.forFeature(rt.o),y.m,C.Bz.forChild(ct),J]})}return t})()},4849:(U,b,i)=>{i.d(b,{n:()=>u});var o=i(1892),C=i(6814),r=i(8666),y=i(2463),c=i(9468),d=i(166);let u=(()=>{class f{constructor(p,x){this.modalData=p,this.modalRef=x}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#e=this.\u0275fac=function(x){return new(x||f)(c.Y36(o.S),c.Y36(o.R))};static#t=this.\u0275cmp=c.Xpm({type:f,selectors:[["app-confirm-alert"]],standalone:!0,features:[c.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(x,h){1&x&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),c._uU(3,"Confirmation de Suppression"),c.qZA()()(),c.TgZ(4,"div",3)(5,"div",4)(6,"div",5),c._UZ(7,"img",6),c.qZA(),c.TgZ(8,"div",7),c._uU(9," Voulez-vous vraiment effectuer cette action ? "),c.qZA()(),c.TgZ(10,"div",8)(11,"app-custom-button",9),c.NdJ("buttonClicked",function(){return h.confirmAction()}),c.qZA(),c.TgZ(12,"app-custom-button",10),c.NdJ("buttonClicked",function(){return h.close()}),c.qZA()()())},dependencies:[C.ez,r.a,y.v,d.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return f})()},8346:(U,b,i)=>{i.d(b,{W:()=>y});var o=i(9468),C=i(95),r=i(7394);let y=(()=>{class c{constructor(){this.placeholder="",this.type="text",this.readonly=!1,this.otherclass="",this.subscription=new r.w0,this.disabled=!1,this.onTouched=()=>{},this.onChange=()=>{},this.control=new C.NI}writeValue(u){this.control.setValue(u)}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}setDisabledState(u){this.disabled=u,u?this.control.disable():this.control.enable()}ngOnInit(){this.subscription=this.control.valueChanges.subscribe(u=>{this.onChange(u)})}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(f){return new(f||c)};static#t=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-custom-textfield"]],inputs:{placeholder:"placeholder",type:"type",readonly:"readonly",otherclass:"otherclass"},features:[o._Bn([{provide:C.JU,useExisting:(0,o.Gpc)(()=>c),multi:!0}])],decls:1,vars:7,consts:[[3,"type","placeholder","formControl","readonly"]],template:function(f,T){1&f&&o._UZ(0,"input",0),2&f&&(o.Gre("custom-text-field m-0 form-control-sm ",T.otherclass,""),o.s9C("placeholder",T.placeholder),o.Q6J("type",T.type)("formControl",T.control)("readonly",T.readonly))},dependencies:[C.Fj,C.JJ,C.oH],styles:[".custom-text-field[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border:1px solid #878787!important;margin-bottom:2px}.form-control-sm[_ngcontent-%COMP%]{font-size:12px!important;border-radius:0;min-width:100%}.custom-text-field[_ngcontent-%COMP%]:focus{background-color:#f0f4f5;border:0px!important;outline:0}.custom-text-field[_ngcontent-%COMP%]:read-only:focus{outline:0!important;border:1px solid #878787!important}"]})}return c})()},1171:(U,b,i)=>{i.d(b,{h:()=>C});var o=i(9468);let C=(()=>{class r{constructor(){this.title="",this.class=""}static#e=this.\u0275fac=function(d){return new(d||r)};static#t=this.\u0275cmp=o.Xpm({type:r,selectors:[["app-form-label"]],inputs:{title:"title",class:"class"},decls:2,vars:4,template:function(d,u){1&d&&(o.TgZ(0,"label"),o._uU(1),o.qZA()),2&d&&(o.Tol(u.class),o.xp6(1),o.Oqu(u.title))},styles:["label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#464445;margin-right:5px;min-width:100%;max-width:100%}"]})}return r})()},9887:(U,b,i)=>{i.d(b,{l:()=>u});var o=i(9468),C=i(6814);function r(f,T){if(1&f&&(o.TgZ(0,"h5",3),o._UZ(1,"span"),o._uU(2),o.Hsn(3,1),o.qZA()),2&f){const p=o.oxw();o.xp6(1),o.Tol(p.icon),o.xp6(1),o.hij(" ",p.title," ")}}function y(f,T){1&f&&o._UZ(0,"hr",4)}const c=["*",[["",8,"button-head"]]],d=["*",".button-head"];let u=(()=>{class f{constructor(){this.title="",this.icon="",this.background="white",this.otherclass=""}static#e=this.\u0275fac=function(x){return new(x||f)};static#t=this.\u0275cmp=o.Xpm({type:f,selectors:[["app-panel-custom"]],inputs:{title:"title",icon:"icon",background:"background",otherclass:"otherclass"},ngContentSelectors:d,decls:5,vars:6,consts:[["class","title-panel-custom mb-1",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"panel-custom-body"],[1,"title-panel-custom","mb-1"],[1,"mt-0"]],template:function(x,h){1&x&&(o.F$t(c),o.TgZ(0,"div"),o.YNc(1,r,4,4,"h5",0),o.YNc(2,y,1,0,"hr",1),o.TgZ(3,"div",2),o.Hsn(4),o.qZA()()),2&x&&(o.MT6("panel-custom ",h.background," ",h.otherclass,""),o.xp6(1),o.Q6J("ngIf",h.title),o.xp6(1),o.Q6J("ngIf",h.title))},dependencies:[C.O5],styles:[".panel-custom[_ngcontent-%COMP%]{border:1px solid #c7c5c6;padding:15px;margin-bottom:3px}.title-panel-custom[_ngcontent-%COMP%]{display:flex;align-items:center;color:#045a5e;font-size:15px;font-family:aileronbold}.title-panel-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#46ad7e;margin-right:5px}"]})}return f})()},9543:(U,b,i)=>{i.d(b,{C:()=>C});var o=i(9468);let C=(()=>{class r{constructor(){this.otherclass="",this.disabled=!1,this.buttonClicked=new o.vpe}emitButtonClicked(c){c.preventDefault(),this.buttonClicked.emit()}static#e=this.\u0275fac=function(d){return new(d||r)};static#t=this.\u0275cmp=o.Xpm({type:r,selectors:[["app-primary-button"]],inputs:{title:"title",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(d,u){1&d&&(o.TgZ(0,"button",0),o.NdJ("click",function(T){return u.emitButtonClicked(T)}),o._uU(1),o.qZA()),2&d&&(o.Gre("primary-button ",u.otherclass,""),o.Q6J("disabled",u.disabled),o.xp6(1),o.hij(" ",u.title,"\n"))},styles:[".primary-button[_ngcontent-%COMP%]{color:#fff;border:1px solid #1EA860;background-color:#1ea860;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:30px;padding:.75rem 1rem;border-radius:6px}.primary-button[_ngcontent-%COMP%]:hover{background-color:#2da899;border:1px solid #2DA899}.primary-button[_ngcontent-%COMP%]:disabled{color:#fff;border:1px solid #3d4957;background-color:#3d4957;min-width:80px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:24px;opacity:.7;padding:.75rem 0rem}"]})}return r})()},7426:(U,b,i)=>{i.d(b,{p:()=>T});var o=i(9468),C=i(547);const r={required:p=>"Ce champ est obligatoire",minlength:({requiredLength:p})=>`La valeur entr\xe9e doit avoir au minimum ${p} ${p>1?"caract\xe8res":"caract\xe8re"}`,maxlength:({requiredLength:p})=>`La valeur entr\xe9e doit avoir au maximum ${p} ${p>1?"caract\xe8res":"caract\xe8re"}`,actionsLength:p=>"Au moins une action doit \xeatre associ\xe9e au groupe utilisateur",problemeInvalide:p=>"Erreur sur le champ Probl\xe8me",impactInvalide:p=>"Erreur sur le champ Impact",gestionnaireInvalide:p=>"Erreur sur le champ Gestionnaire",demandeurInvalide:p=>"Erreur sur le champ Demandeur",categorieInvalide:p=>"Erreur sur le champ Cat\xe9gorie"};var y=i(8645),c=i(9773),d=i(6814);function u(p,x){if(1&p&&(o.TgZ(0,"div",1),o._uU(1),o.qZA()),2&p){const h=o.oxw();o.xp6(1),o.Oqu(h.errorMessage)}}const f=["*"];let T=(()=>{class p{constructor(){this.errors=null,this.resetField=new o.vpe,this.destoy$=new y.x}ngOnInit(){if(!this.myDirective)throw new Error("MyInputDirective is required!")}ngAfterViewInit(){this.myDirective&&this.myDirective.ngControl.valueChanges?.pipe((0,c.R)(this.destoy$)).subscribe(h=>{const g=this.myDirective.ngControl.control?this.getControlName(this.myDirective.ngControl.control):"";"string"==typeof g&&this.resetField.emit(g)})}ngOnDestroy(){this.destoy$.next(null),this.destoy$.complete()}get errorMessage(){let h=this.getExternErrorMessage();return null===h&&(h=this.getLocalErrorMessage()),h}getExternErrorMessage(){let h=null;return this.errors&&Object.entries(this.errors).forEach(([g,I])=>{g===(this.myDirective.ngControl.control?this.getControlName(this.myDirective.ngControl.control):"")&&(h=I)}),h}getLocalErrorMessage(){const h=this.myDirective?.ngControl.control?.errors;if(h){const g=Object.entries(h||{});if(!g.length)return null;const[I,P]=g[0];let M=null;return Object.entries(r).forEach(([F,q])=>{F===I&&this.myDirective?.ngControl.control?.dirty&&(M=r[F](P))}),M}return null}getControlName(h){let g=h.parent;if(!g)return null;let I="";return Object.keys(g.controls).forEach(P=>{g.get(P)===h&&(I=P)}),I}static#e=this.\u0275fac=function(g){return new(g||p)};static#t=this.\u0275cmp=o.Xpm({type:p,selectors:[["app-field-error-wrapper"]],contentQueries:function(g,I,P){if(1&g&&o.Suo(P,C.Z,7),2&g){let M;o.iGM(M=o.CRH())&&(I.myDirective=M.first)}},inputs:{errors:"errors"},outputs:{resetField:"resetField"},ngContentSelectors:f,decls:2,vars:1,consts:[["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(g,I){1&g&&(o.F$t(),o.Hsn(0),o.YNc(1,u,2,1,"div",0)),2&g&&(o.xp6(1),o.Q6J("ngIf",I.errorMessage))},dependencies:[d.O5],styles:[".error-message[_ngcontent-%COMP%]{color:red;font-size:.75rem}"]})}return p})()},547:(U,b,i)=>{i.d(b,{Z:()=>r});var o=i(9468),C=i(95);let r=(()=>{class y{constructor(d){this.ngControl=d}static#e=this.\u0275fac=function(u){return new(u||y)(o.Y36(C.a5,10))};static#t=this.\u0275dir=o.lG2({type:y,selectors:[["","formControl",""],["","formControlName",""]]})}return y})()}}]);