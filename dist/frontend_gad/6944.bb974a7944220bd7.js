"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[6944],{6944:(O,b,i)=>{i.r(b),i.d(b,{BaseConnaissanceModule:()=>oe});var l=i(6814),t=i(9468),I=i(2572),g=i(7398),n=i(676);const p="BaseConnaissance",S=(0,n.PH)(`[${p} API] Load All`),_=(0,n.PH)(`[${p} API] Load All Success`,(0,n.Ky)()),E=(0,n.PH)(`[${p} API] Create`,(0,n.Ky)()),C=(0,n.PH)(`[${p} API] Create Success`,(0,n.Ky)()),f=(0,n.PH)(`[${p} API] Load`,(0,n.Ky)()),P=(0,n.PH)(`[${p} API] Load Success`,(0,n.Ky)()),U=(0,n.PH)(`[${p} API] Create Error`,(0,n.Ky)()),G=(0,n.PH)(`[${p} API] Reset Error`),W=(0,n.PH)(`[${p} API] Reset Error Field`,(0,n.Ky)()),Q=(0,n.PH)(`[${p} API] Reset`),J=(0,n.PH)(`[${p} API] Delete`,(0,n.Ky)()),k=(0,n.PH)(`[${p} API] Delete Success`,(0,n.Ky)()),c={loadItems:S,loadItemsSuccess:_,resetItem:Q,createItem:E,createItemSuccess:C,loadItem:f,loadItemSuccess:P,updateItem:(0,n.PH)(`[${p} API] Update`,(0,n.Ky)()),updateItemSuccess:(0,n.PH)(`[${p} API] Update Success`,(0,n.Ky)()),deleteItem:J,deleteItemSuccess:k,setError:U,resetError:G,resetErrorField:W,loadFormModel:(0,n.PH)(`[${p} API] Load Form Model`),resetFormModel:(0,n.PH)(`[${p} API] Reset Form Model`),loadFormModelSuccess:(0,n.PH)(`[${p} API] Load Form Model Success`,(0,n.Ky)()),resetSearch:(0,n.PH)(`[${p} API] Reset Search`),search:(0,n.PH)(`[${p} API] Search`,(0,n.Ky)()),changePage:(0,n.PH)(`[${p} API] Change Page`,(0,n.Ky)()),changePageSize:(0,n.PH)(`[${p} API] Change Page Size`,(0,n.Ky)())},at=(0,n.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,n.on)(c.loadItemsSuccess,(e,o)=>(console.log(o.items),{...e,items:o.items,totalElement:o.totalElement})),(0,n.on)(c.resetItem,(e,o)=>({...e,currentItem:null})),(0,n.on)(c.createItemSuccess,(e,o)=>({...e})),(0,n.on)(c.deleteItemSuccess,(e,o)=>({...e})),(0,n.on)(c.loadItemSuccess,(e,o)=>({...e,currentItem:o.item})),(0,n.on)(c.updateItemSuccess,(e,o)=>({...e})),(0,n.on)(c.loadFormModel,(e,o)=>({...e,formModel:null})),(0,n.on)(c.loadFormModelSuccess,(e,o)=>({...e,formModel:o.formModel})),(0,n.on)(c.resetSearch,(e,o)=>({...e,searchModel:{}})),(0,n.on)(c.search,(e,o)=>({...e,searchModel:o.searchModel})),(0,n.on)(c.changePage,(e,o)=>({...e,page:o.page})),(0,n.on)(c.changePageSize,(e,o)=>({...e,pageSize:o.pageSize})),(0,n.on)(c.setError,(e,o)=>({...e,errors:o.errors})),(0,n.on)(c.resetError,(e,o)=>({...e,errors:null})),(0,n.on)(c.resetErrorField,(e,o)=>{let s={};return null!==e.errors&&Object.entries(e.errors).forEach(([r,a])=>{r!==o.fieldName&&(s[`${r}`]=a)}),{...e,errors:s}})),T=(0,n.ZF)("base-connaissances"),ct=(0,n.P1)(T,e=>e.items),lt=((0,n.P1)(T,e=>e.currentItem),(0,n.P1)(T,e=>e.formModel),(0,n.P1)(T,e=>e.searchModel)),N=(0,n.P1)(T,e=>e.page),z=(0,n.P1)(T,e=>e.pageSize),rt=(0,n.P1)(T,e=>e.totalElement);(0,n.P1)(T,e=>e.errors);var q=i(1892),pt=i(9491),dt=i(1728),K=i(166),ut=i(9887);function mt(e,o){if(1&e&&(t.TgZ(0,"div",19)(1,"div",26)(2,"span",15),t._uU(3),t.qZA()()()),2&e){const s=o.$implicit;t.xp6(3),t.AsE("",s.numeroEtape,". ",null==s.actionSuggere?null:s.actionSuggere.libelle,"")}}function _t(e,o){if(1&e&&(t.TgZ(0,"app-panel-custom",24)(1,"div",6),t.YNc(2,mt,4,2,"div",25),t.qZA()()),2&e){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.solutionDto.etapes)}}let ht=(()=>{class e{constructor(s,r,a){this.modalData=s,this.modalRef=r,this.store=a,this.id="",this.solutionDto=null,this.solution$=this.store.select(pt.p),this.id=this.modalData.data.id,this.incident=this.modalData.data.incident}ngOnInit(){console.log(this.incident.solution),this.store.dispatch(dt.NY.loadItem({id:this.incident.solution.id})),this.solution$.subscribe(s=>{s&&(this.solutionDto={id:s.id,code:s.code,libelle:s.libelle,description:s.description,nombreEtape:s.nombreEtape,incident:s.incident,etapes:s.etapes})}),console.log(this.solutionDto)}close(){this.modalRef.close(void 0)}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(q.S),t.Y36(q.R),t.Y36(n.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-modal-cloture"]],decls:101,vars:19,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Informations sur l'Incident"],[1,"general-info","flex-column"],[1,"col-12","mb-2","d-flex","row"],[1,"text-start"],[1,"poppins-bold","text-success"],[1,"col-12","mb-2","flex","row"],[1,"col-3"],[1,"text-end"],[1,"poppins-bold"],[1,"col-6"],[1,"text-end","poppins-bold"],[1,"text-end","poppins-bold","text-success"],[1,"col-12","mb-1","flex","row"],["icon","fa fa-angle-right","title","Informations sur la Solution"],[1,"col-12","mb-3","flex","row"],[1,"col-4"],["icon","fa fa-angle-right","title","Liste des \xe9tapes",4,"ngIf"],[1,"form-actions","mt-2"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"],["icon","fa fa-angle-right","title","Liste des \xe9tapes"],["class","col-12 mb-3 flex row",4,"ngFor","ngForOf"],[1,"col-12"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3,"D\xe9tails de l'incident"),t.qZA()()(),t.TgZ(4,"div",3)(5,"div",4)(6,"app-panel-custom",5)(7,"div",6)(8,"div",7)(9,"span",8),t._uU(10,"Titre: "),t.TgZ(11,"span",9),t._uU(12),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"span",12),t._uU(16,"Type Incident: "),t.qZA(),t.TgZ(17,"span",13),t._uU(18),t.qZA()(),t.TgZ(19,"div",14)(20,"span",12),t._uU(21,"Equipement: "),t.qZA(),t.TgZ(22,"span",9),t._uU(23),t.qZA()(),t.TgZ(24,"div",11)(25,"span",12),t._uU(26,"Impact: "),t.qZA(),t.TgZ(27,"span",15),t._uU(28),t.qZA()()(),t.TgZ(29,"div",10)(30,"div",11)(31,"span",12),t._uU(32,"Probl\xe8me: "),t.qZA(),t.TgZ(33,"span",13),t._uU(34),t.qZA()(),t.TgZ(35,"div",11)(36,"span",12),t._uU(37,"Cat\xe9gorie: "),t.qZA(),t.TgZ(38,"span",13),t._uU(39),t.qZA()(),t.TgZ(40,"div",11)(41,"span",12),t._uU(42,"Priorit\xe9: "),t.qZA(),t.TgZ(43,"span",15),t._uU(44),t.qZA()(),t.TgZ(45,"div",11)(46,"span",12),t._uU(47,"Source: "),t.qZA(),t.TgZ(48,"span",15),t._uU(49),t.qZA()()(),t.TgZ(50,"div",10)(51,"div",11)(52,"span",12),t._uU(53,"S\xe9v\xe9rit\xe9: "),t.qZA(),t.TgZ(54,"span",15),t._uU(55),t.qZA()(),t.TgZ(56,"div",11)(57,"span",12),t._uU(58,"Visibilit\xe9: "),t.qZA(),t._UZ(59,"span",15),t.qZA(),t.TgZ(60,"div",11)(61,"span",12),t._uU(62,"Emis par: "),t.qZA(),t.TgZ(63,"span",16),t._uU(64),t.qZA()(),t.TgZ(65,"div",11)(66,"span",12),t._uU(67,"Affect\xe9 \xe0: "),t.qZA(),t.TgZ(68,"span",16),t._uU(69),t.qZA()()(),t.TgZ(70,"div",17)(71,"span",8),t._uU(72,"Description: "),t.qZA(),t.TgZ(73,"span",13),t._uU(74),t.qZA()()()(),t.TgZ(75,"app-panel-custom",18)(76,"div",6)(77,"div",19)(78,"div",20)(79,"span",12),t._uU(80,"Code Solution: "),t.qZA(),t.TgZ(81,"span",15),t._uU(82),t.qZA()(),t.TgZ(83,"div",20)(84,"span",12),t._uU(85,"Libell\xe9: "),t.qZA(),t.TgZ(86,"span",13),t._uU(87),t.qZA()(),t.TgZ(88,"div",20)(89,"span",12),t._uU(90,"Nombre d'Etapes: "),t.qZA(),t.TgZ(91,"span",13),t._uU(92),t.qZA()()(),t.TgZ(93,"div",17)(94,"span",8),t._uU(95,"Description: "),t.qZA(),t.TgZ(96,"span",13),t._uU(97),t.qZA()()()(),t.YNc(98,_t,3,1,"app-panel-custom",21),t.qZA(),t.TgZ(99,"div",22)(100,"app-custom-button",23),t.NdJ("buttonClicked",function(){return a.close()}),t.qZA()()()),2&r&&(t.xp6(12),t.Oqu(a.incident.titre),t.xp6(6),t.Oqu(a.incident.typeIncident),t.xp6(5),t.Oqu(a.incident.equipement.libelle),t.xp6(5),t.Oqu(a.incident.impact.libelle),t.xp6(6),t.Oqu(a.incident.probleme.libelle),t.xp6(5),t.Oqu(a.incident.categorieIncident.libelle),t.xp6(5),t.Oqu(a.incident.prioriteIncident),t.xp6(5),t.Oqu(null==a.incident.source?null:a.incident.source.libelle),t.xp6(6),t.Oqu(null==a.incident.severite?null:a.incident.severite.libelle),t.xp6(9),t.AsE("",null==a.incident.demandeur?null:a.incident.demandeur.firstName," ",null==a.incident.demandeur?null:a.incident.demandeur.lastName,""),t.xp6(5),t.AsE("",null==a.incident.gestionnaire?null:a.incident.gestionnaire.firstName," ",null==a.incident.gestionnaire?null:a.incident.gestionnaire.lastName,""),t.xp6(5),t.Oqu(a.incident.description),t.xp6(8),t.Oqu(null==a.incident.solution?null:a.incident.solution.code),t.xp6(5),t.Oqu(null==a.incident.solution?null:a.incident.solution.libelle),t.xp6(5),t.Oqu(null==a.incident.solution?null:a.incident.solution.nombreEtape),t.xp6(5),t.Oqu(null==a.incident.solution?null:a.incident.solution.description),t.xp6(1),t.Q6J("ngIf",a.solutionDto))},dependencies:[l.sg,l.O5,K.x,ut.l],styles:["*[_ngcontent-%COMP%]{font-family:aileronlight}.poppins-bold[_ngcontent-%COMP%]{font-family:Poppins;font-weight:700}.general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%;font-size:13px!important}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.form-main[_ngcontent-%COMP%]{overflow-y:auto;height:400px}.alert-header[_ngcontent-%COMP%]{background-color:#2c3963;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}"]})}return e})();var gt=i(4849),B=i(8281),H=i(797),Y=i(3849),ft=i(7251),Ct=i(6327),vt=i(8564),Zt=i(8223),Pt=i(602),bt=i(1469),Tt=i(6326),At=i(362);function It(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"N\xb0"),t.qZA())}function Et(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(s.id)}}function Mt(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Code"),t.qZA())}function xt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(s.refSys)}}function St(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Libell\xe9 Demande"),t.qZA())}function yt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(s.titre)}}function Ot(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Equipement"),t.qZA())}function Ut(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(s.equipement.libelle)}}function Bt(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"R\xe9solu Par"),t.qZA())}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.AsE(" ",null==s.gestionnaire?null:s.gestionnaire.firstName," ",null==s.gestionnaire?null:s.gestionnaire.lastName," ")}}function $t(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Emis Par"),t.qZA())}function Dt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.AsE(" ",null==s.demandeur?null:s.demandeur.firstName," ",null==s.demandeur?null:s.demandeur.lastName," ")}}function Ft(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Date Cr\xe9ation"),t.qZA())}function Nt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,s.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function zt(e,o){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Date Derni\xe8re Modif"),t.qZA())}function qt(e,o){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,s.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function Kt(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"table",11),t.NdJ("itemSelected",function(a){t.CHM(s);const Z=t.oxw(2);return t.KtG(Z.itemSelected(a))}),t.ynx(1,12),t.YNc(2,It,2,0,"th",13),t.YNc(3,Et,2,1,"td",14),t.BQk(),t.ynx(4,15),t.YNc(5,Mt,2,0,"th",16),t.YNc(6,xt,2,1,"td",17),t.BQk(),t.ynx(7,18),t.YNc(8,St,2,0,"th",16),t.YNc(9,yt,2,1,"td",17),t.BQk(),t.ynx(10,19),t.YNc(11,Ot,2,0,"th",16),t.YNc(12,Ut,2,1,"td",17),t.BQk(),t.ynx(13,20),t.YNc(14,Bt,2,0,"th",16),t.YNc(15,Lt,2,2,"td",17),t.BQk(),t.ynx(16,21),t.YNc(17,$t,2,0,"th",16),t.YNc(18,Dt,2,2,"td",17),t.BQk(),t.ynx(19,22),t.YNc(20,Ft,2,0,"th",16),t.YNc(21,Nt,3,4,"td",17),t.BQk(),t.ynx(22,23),t.YNc(23,zt,2,0,"th",16),t.YNc(24,qt,3,4,"td",17),t.BQk(),t.qZA()}if(2&e){const s=o.ngIf,r=t.oxw(2);t.Q6J("items",s)("headers",r.headerTable)("selectable",!0)}}function Ht(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"app-crud-list",3),t.NdJ("pageSelected",function(a){t.CHM(s);const Z=t.oxw();return t.KtG(Z.pageSelected(a))})("pageSizeChange",function(a){t.CHM(s);const Z=t.oxw();return t.KtG(Z.pageSizeChange(a))})("closeButtonClicked",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.closeButtonClicked())}),t.TgZ(1,"div",4)(2,"app-custom-button",5),t.NdJ("buttonClicked",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.detailsButtonClicked())}),t.qZA()(),t.TgZ(3,"div",6),t._UZ(4,"app-custom-button",7),t.TgZ(5,"app-print-button",8),t.NdJ("printButtonClicked",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.printButtonClicked())}),t.qZA()(),t.TgZ(6,"div",9),t.YNc(7,Kt,25,3,"table",10),t.ALo(8,"async"),t.qZA()()}if(2&e){const s=o.ngIf,r=t.oxw();t.Q6J("itemSelected",r.isItemSelected())("pageSize",s.pageSize)("currentPage",s.page)("totalElements",s.totalElement),t.xp6(2),t.Q6J("disabled",!r.isItemSelected()),t.xp6(5),t.Q6J("ngIf",t.lcZ(8,6,r.items$))}}let Yt=(()=>{class e{constructor(s,r,a){this.router=s,this.store=r,this.modalService=a,this.isUpdateActivated=!1,this.headerTable=["N\xb0","Code","Libell\xe9 Demande","Equipement","Statut","Emis Par","R\xe9solu par","Date Cr\xe9ation","Date Dern modif"],this.items$=this.store.select(ct),this.page$=this.store.select(N),this.pageSize$=this.store.select(z),this.totalElement$=this.store.select(rt),this.data$=(0,I.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,g.U)(([Z,$,D])=>({page:Z,pageSize:$,totalElement:D}))),this.selectedItem=null}ngOnInit(){this.store.dispatch(c.loadItems())}detailsButtonClicked(){this.selectedItem?.id&&this.modalService.openComponent(ht,{data:{id:this.selectedItem?.id,incident:this.selectedItem,idSolution:this.selectedItem?.solution.id}})}addButtonClicked(){this.router.navigate(["incidents","nouvel-incident","add"])}editButtonClicked(){const s=this.selectedItem?.id;s&&(this.store.dispatch(c.resetItem()),this.router.navigate(["incidents","nouvel-incident","edit",s]))}deleteButtonClicked(){const s=this.selectedItem;s&&this.modalService.openComponent(gt.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(r=>{r&&"yes"===r&&this.store.dispatch(c.deleteItem({item:s}))})}itemSelected(s){this.selectedItem=s}pageSelected(s){this.store.dispatch(c.changePage({page:s}))}pageSizeChange(s){this.store.dispatch(c.changePageSize({pageSize:s}))}closeButtonClicked(){this.router.navigate(["incidents"])}isItemSelected(){return null!==this.selectedItem}printButtonClicked(){}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(B.F0),t.Y36(n.yh),t.Y36(H.Z))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-base-connaissance-list"]],features:[t._Bn([{provide:t.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Base de Connaissance","pathLevelTwo","Consultation Incidents","pathLevelThree","Liste"],["title","Base de Connaissance",3,"itemSelected","pageSize","currentPage","totalElements","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Base de Connaissance",3,"itemSelected","pageSize","currentPage","totalElements","pageSelected","pageSizeChange","closeButtonClicked"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","D\xe9tails",1,"me-1",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","N\xb0"],["app-header-attribute-def-template","","class","text-center",4,"appHeaderDefTemplate"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Code"],["app-header-attribute-def-template","","class","ps-2",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Libell\xe9 Demande"],["appCellDef","Equipement"],["appCellDef","R\xe9solu par"],["appCellDef","Emis Par"],["appCellDef","Date Cr\xe9ation"],["appCellDef","Date Modification"],["app-header-attribute-def-template","",1,"text-center"],["app-cell-def-template",""],["app-header-attribute-def-template","",1,"ps-2"],["app-cell-def-template","",1,"text-start"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,Ht,9,8,"app-crud-list",2),t.ALo(3,"async")),2&r&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,a.data$)))},dependencies:[l.O5,Y.L,ft._,K.x,Ct.N,vt.D,Zt.h,Pt.u,bt.O,Tt.q,At.V,l.Ov,l.uU],styles:["[_nghost-%COMP%]{width:100%}"]})}return e})();var Rt=i(9207),d=i(6465),Gt=i(9862),h=i(6063),Wt=i(2460),A=i(6328),Qt=i(9026),M=i(6306),L=i(9397),Jt=i(1631),v=i(2096),kt=i(4664),jt=i(3186),Vt=i(1946),Xt=i(9989);let R=(()=>{class e extends Xt.v{getResourceBasePath(){return`${Vt.y}/base-connaissance`}static#t=this.\u0275fac=function(){let s;return function(a){return(s||(s=t.n5z(e)))(a||e)}}();static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var wt=i(6366);let te=(()=>{class e{constructor(s,r,a,Z,$,D){this.baseConnaissanceService=s,this.authService=r,this.actions$=a,this.router=Z,this.modalService=$,this.store=D,this.loadItems$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.loadItems),(0,Wt.M)(this.store.select(N),this.store.select(z),this.store.select(lt)),(0,A.b)(([u,m,y,F])=>(console.log(m),this.store.dispatch((0,h.Q)()),(0,Qt.$)(this.baseConnaissanceService.getAllWithPagination(m,y,F),this.baseConnaissanceService.count(F)).pipe((0,g.U)(([x,ae])=>(this.store.dispatch((0,h.Z)()),c.loadItemsSuccess({items:x,totalElement:ae}))),(0,M.K)(x=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:x})))))))),{dispatch:!0}),this.createItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.createItem),(0,A.b)(u=>(this.store.dispatch((0,h.Q)()),this.baseConnaissanceService.add(u.item).pipe((0,L.b)(()=>{this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident ajout\xe9e avec succ\xe8s"}),this.router.navigateByUrl("incidents/categorie-incident")}),(0,g.U)(m=>c.createItemSuccess({item:m})),(0,M.K)(m=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:m})))))))),{dispatch:!0}),this.loadItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.loadItem),(0,Jt.z)(u=>this.baseConnaissanceService.findById(u.id).pipe((0,g.U)(m=>c.loadItemSuccess({item:m})),(0,M.K)(m=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:m}))))))),{dispatch:!0}),this.deleteItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.deleteItem),(0,A.b)(u=>this.baseConnaissanceService.delete(u.item.id,u.item)),(0,L.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident supprim\xe9e avec succ\xe8s"})}),(0,g.U)(()=>c.loadItems()),(0,M.K)(u=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:u}))))),{dispatch:!0}),this.updateItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.updateItem),(0,A.b)(u=>(this.store.dispatch((0,h.Q)()),this.baseConnaissanceService.update(u.id,u.item).pipe((0,L.b)(()=>{this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Categorie Incident modifi\xe9e avec succ\xe8s"}),this.router.navigateByUrl("incidents/categorie-incident")}),(0,g.U)(m=>c.createItemSuccess({item:m})),(0,M.K)(m=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:m})))))))),{dispatch:!0}),this.loadFormModel$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.loadFormModel),(0,A.b)(()=>this.baseConnaissanceService.getFormModel()),(0,g.U)(u=>c.loadFormModelSuccess({formModel:u})),(0,M.K)(u=>(this.store.dispatch((0,h.Z)()),(0,v.of)(c.setError({errors:u})))))),this.resetSearch$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.resetSearch),(0,A.b)(()=>(0,v.of)(c.changePage({page:1}))))),this.search$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.search),(0,A.b)(()=>(0,v.of)(c.changePage({page:1}))))),this.changePage$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.changePage),(0,g.U)(u=>c.loadItems()))),this.changePageSize$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.changePageSize),(0,A.b)(()=>(0,v.of)(c.changePage({page:1}))))),this.handleError$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(c.setError),(0,kt.w)(u=>{if(this.store.dispatch((0,h.Q)()),u.errors instanceof Gt.UA){if(422===u.errors.status){let m="",y=0;for(const[F,x]of Object.entries(u.errors.error))m+=0===y?x:"\n"+x,y++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:m})}if(401===u.errors.status){let m="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:m}),(0,v.of)(jt.jM())}}return this.store.dispatch((0,h.Z)()),(0,v.of)({type:"noop"})})),{dispatch:!0})}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(R),t.LFG(wt.e),t.LFG(d.eX),t.LFG(B.F0),t.LFG(H.Z),t.LFG(n.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var ee=i(1544),ne=i(6332),se=i(9183);const ie=[{path:"",component:Yt,pathMatch:"prefix"}];let oe=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[R,ne.V],imports:[l.ez,Y.L,n.Aw.forFeature("base-connaissances",at),n.Aw.forFeature("solution-acceptees",ee.PR),d.sQ.forFeature(te),d.sQ.forFeature(se.o),Rt.m,B.Bz.forChild(ie)]})}return e})()},4849:(O,b,i)=>{i.d(b,{n:()=>S});var l=i(1892),t=i(6814),I=i(8666),g=i(2463),n=i(9468),p=i(166);let S=(()=>{class _{constructor(C,f){this.modalData=C,this.modalRef=f}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#t=this.\u0275fac=function(f){return new(f||_)(n.Y36(l.S),n.Y36(l.R))};static#e=this.\u0275cmp=n.Xpm({type:_,selectors:[["app-confirm-alert"]],standalone:!0,features:[n.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(f,P){1&f&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),n._uU(3,"Confirmation de Suppression"),n.qZA()()(),n.TgZ(4,"div",3)(5,"div",4)(6,"div",5),n._UZ(7,"img",6),n.qZA(),n.TgZ(8,"div",7),n._uU(9," Voulez-vous vraiment effectuer cette action ? "),n.qZA()(),n.TgZ(10,"div",8)(11,"app-custom-button",9),n.NdJ("buttonClicked",function(){return P.confirmAction()}),n.qZA(),n.TgZ(12,"app-custom-button",10),n.NdJ("buttonClicked",function(){return P.close()}),n.qZA()()())},dependencies:[t.ez,I.a,g.v,p.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return _})()},9887:(O,b,i)=>{i.d(b,{l:()=>S});var l=i(9468),t=i(6814);function I(_,E){if(1&_&&(l.TgZ(0,"h5",3),l._UZ(1,"span"),l._uU(2),l.Hsn(3,1),l.qZA()),2&_){const C=l.oxw();l.xp6(1),l.Tol(C.icon),l.xp6(1),l.hij(" ",C.title," ")}}function g(_,E){1&_&&l._UZ(0,"hr",4)}const n=["*",[["",8,"button-head"]]],p=["*",".button-head"];let S=(()=>{class _{constructor(){this.title="",this.icon="",this.background="white",this.otherclass=""}static#t=this.\u0275fac=function(f){return new(f||_)};static#e=this.\u0275cmp=l.Xpm({type:_,selectors:[["app-panel-custom"]],inputs:{title:"title",icon:"icon",background:"background",otherclass:"otherclass"},ngContentSelectors:p,decls:5,vars:6,consts:[["class","title-panel-custom mb-1",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"panel-custom-body"],[1,"title-panel-custom","mb-1"],[1,"mt-0"]],template:function(f,P){1&f&&(l.F$t(n),l.TgZ(0,"div"),l.YNc(1,I,4,4,"h5",0),l.YNc(2,g,1,0,"hr",1),l.TgZ(3,"div",2),l.Hsn(4),l.qZA()()),2&f&&(l.MT6("panel-custom ",P.background," ",P.otherclass,""),l.xp6(1),l.Q6J("ngIf",P.title),l.xp6(1),l.Q6J("ngIf",P.title))},dependencies:[t.O5],styles:[".panel-custom[_ngcontent-%COMP%]{border:1px solid #c7c5c6;padding:15px;margin-bottom:3px}.title-panel-custom[_ngcontent-%COMP%]{display:flex;align-items:center;color:#045a5e;font-size:15px;font-family:aileronbold}.title-panel-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#46ad7e;margin-right:5px}"]})}return _})()},3849:(O,b,i)=>{i.d(b,{L:()=>n});var l=i(9468),t=i(2463),I=i(6814),g=i(166);let n=(()=>{class p{constructor(){this.printButtonClicked=new l.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#t=this.\u0275fac=function(E){return new(E||p)};static#e=this.\u0275cmp=l.Xpm({type:p,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[l.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(E,C){1&E&&(l.TgZ(0,"app-custom-button",0),l.NdJ("buttonClicked",function(){return C.emitPrintButtonClicked()}),l.qZA())},dependencies:[I.ez,t.v,g.x],styles:["[_nghost-%COMP%]{display:block}"]})}return p})()}}]);