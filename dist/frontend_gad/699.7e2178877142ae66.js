"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[699],{699:(j,b,r)=>{r.r(b),r.d(b,{NouveauIncidentModule:()=>Ct});var f=r(6814),g=r(8281),d=r(6465),Z=r(9207),i=r(676);const u="Nouvel Incident",L=(0,i.PH)(`[${u} API] Load All`),x=(0,i.PH)(`[${u} API] Load All Success`,(0,i.Ky)()),V=(0,i.PH)(`[${u} API] Create`,(0,i.Ky)()),y=(0,i.PH)(`[${u} API] Create Success`,(0,i.Ky)()),S=(0,i.PH)(`[${u} API] Load`,(0,i.Ky)()),P=(0,i.PH)(`[${u} API] Reset`),$=(0,i.PH)(`[${u} API] Load Success`,(0,i.Ky)()),X=(0,i.PH)(`[${u} API] Delete`,(0,i.Ky)()),w=(0,i.PH)(`[${u} API] Delete Success`,(0,i.Ky)()),ee=(0,i.PH)(`[${u} API] Update`,(0,i.Ky)()),te=(0,i.PH)(`[${u} API] Update Success`,(0,i.Ky)()),ne=(0,i.PH)(`[${u} API] Load Form Model`),ie=(0,i.PH)(`[${u} API] Reset Form Model`),oe=(0,i.PH)(`[${u} API] Load Form Model Success`,(0,i.Ky)()),re=(0,i.PH)(`[${u} API] Reset Search`),se=(0,i.PH)(`[${u} API] Search`,(0,i.Ky)()),ce=(0,i.PH)(`[${u} API] Change Page`,(0,i.Ky)()),ae=(0,i.PH)(`[${u} API] Change Page Size`,(0,i.Ky)()),s={loadItems:L,loadItemsSuccess:x,resetItem:P,createItem:V,createItemSuccess:y,loadItem:S,loadItemSuccess:$,updateItem:ee,updateItemSuccess:te,deleteItem:X,deleteItemSuccess:w,loadFormModel:ne,resetFormModel:ie,loadFormModelSuccess:oe,setError:(0,i.PH)(`[${u} API] Create Error`,(0,i.Ky)()),resetError:(0,i.PH)(`[${u} API] Reset Error`),resetErrorField:(0,i.PH)(`[${u} API] Reset Error Field`,(0,i.Ky)()),resetSearch:re,search:se,changePage:ce,changePageSize:ae};var pe=r(2460),I=r(6328),me=r(9026),v=r(7398),T=r(6306),O=r(9397),he=r(1631);const _e=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(s.loadItemsSuccess,(n,c)=>({...n,items:c.items,totalElement:c.totalElement})),(0,i.on)(s.resetItem,(n,c)=>({...n,currentItem:null})),(0,i.on)(s.createItemSuccess,(n,c)=>({...n})),(0,i.on)(s.deleteItemSuccess,(n,c)=>({...n})),(0,i.on)(s.loadItemSuccess,(n,c)=>({...n,currentItem:c.item})),(0,i.on)(s.updateItemSuccess,(n,c)=>({...n})),(0,i.on)(s.loadFormModel,(n,c)=>({...n,formModel:null})),(0,i.on)(s.loadFormModelSuccess,(n,c)=>({...n,formModel:c.formModel})),(0,i.on)(s.resetSearch,(n,c)=>({...n,searchModel:{}})),(0,i.on)(s.search,(n,c)=>({...n,searchModel:c.searchModel})),(0,i.on)(s.changePage,(n,c)=>({...n,page:c.page})),(0,i.on)(s.changePageSize,(n,c)=>({...n,pageSize:c.pageSize})),(0,i.on)(s.setError,(n,c)=>({...n,errors:c.errors})),(0,i.on)(s.resetError,(n,c)=>({...n,errors:{}})),(0,i.on)(s.resetErrorField,(n,c)=>{let t={};return null!==n.errors&&Object.entries(n.errors).forEach(([o,a])=>{o!==c.fieldName&&(t[`${o}`]=a)}),{...n,errors:t}})),C=(0,i.ZF)("nouveau-incidents"),ge=(0,i.P1)(C,n=>n.items),Ie=(0,i.P1)(C,n=>n.currentItem),K=(0,i.P1)(C,n=>n.formModel),ve=(0,i.P1)(C,n=>n.searchModel),G=(0,i.P1)(C,n=>n.page),H=(0,i.P1)(C,n=>n.pageSize),Ce=(0,i.P1)(C,n=>n.totalElement),z=(0,i.P1)(C,n=>n.errors);var h=r(6063),Se=r(9862),_=r(2096),xe=r(3186),Te=r(4664),e=r(9468),Ne=r(9989),ye=r(1946);let Y=(()=>{class n extends Ne.v{getResourceBasePath(){return`${ye.y}/mes-nouveaux-incident`}getIdValue(t){return t.id}static#e=this.\u0275fac=function(){let t;return function(a){return(t||(t=e.n5z(n)))(a||n)}}();static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();var B=r(6366),R=r(797);let Me=(()=>{class n{constructor(t,o,a,m,M,U){this.nouveauIncidentService=t,this.authService=o,this.actions$=a,this.router=m,this.modalService=M,this.store=U,this.loadItems$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadItems),(0,pe.M)(this.store.select(G),this.store.select(H),this.store.select(ve)),(0,I.b)(([l,p,A,F])=>(console.log(p),this.store.dispatch((0,h.Q)()),(0,me.$)(this.nouveauIncidentService.getAllWithPagination(p,A,F),this.nouveauIncidentService.count(F)).pipe((0,v.U)(([N,St])=>(this.store.dispatch((0,h.Z)()),s.loadItemsSuccess({items:N,totalElement:St}))),(0,T.K)(N=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:N})))))))),{dispatch:!0}),this.createItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.createItem),(0,I.b)(l=>(this.store.dispatch((0,h.Q)()),console.log(l.item),this.nouveauIncidentService.add(l.item).pipe((0,O.b)(()=>{this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/nouvel-incident")}),(0,v.U)(p=>s.createItemSuccess({item:p})),(0,T.K)(p=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:p})))))))),{dispatch:!0}),this.loadItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadItem),(0,he.z)(l=>this.nouveauIncidentService.findById(l.id).pipe((0,v.U)(p=>s.loadItemSuccess({item:p})),(0,T.K)(p=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:p}))))))),{dispatch:!0}),this.deleteItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.deleteItem),(0,I.b)(l=>this.nouveauIncidentService.delete(l.item.id,l.item)),(0,O.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident supprim\xe9 avec succ\xe8s"})}),(0,v.U)(()=>s.loadItems()),(0,T.K)(l=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:l}))))),{dispatch:!0}),this.updateItem$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.updateItem),(0,I.b)(l=>(this.store.dispatch((0,h.Q)()),this.nouveauIncidentService.update(l.id,l.item).pipe((0,O.b)(()=>{this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/nouvel-incident")}),(0,v.U)(p=>s.createItemSuccess({item:p})),(0,T.K)(p=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:p})))))))),{dispatch:!0}),this.loadFormModel$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.loadFormModel),(0,I.b)(()=>this.nouveauIncidentService.getFormModel()),(0,v.U)(l=>s.loadFormModelSuccess({formModel:l})),(0,T.K)(l=>(this.store.dispatch((0,h.Z)()),(0,_.of)(s.setError({errors:l})))))),this.resetSearch$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.resetSearch),(0,I.b)(()=>(0,_.of)(s.changePage({page:1}))))),this.search$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.search),(0,I.b)(()=>(0,_.of)(s.changePage({page:1}))))),this.changePage$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.changePage),(0,v.U)(l=>s.loadItems()))),this.changePageSize$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.changePageSize),(0,I.b)(()=>(0,_.of)(s.changePage({page:1}))))),this.handleError$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(s.setError),(0,Te.w)(l=>{if(this.store.dispatch((0,h.Q)()),l.errors instanceof Se.UA){if(422===l.errors.status){let p="",A=0;for(const[F,N]of Object.entries(l.errors.error))p+=0===A?N:"\n"+N,A++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:p})}if(403===l.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===l.errors.status){let p="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,h.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:p}),(0,_.of)(xe.jM())}}return this.store.dispatch((0,h.Z)()),(0,_.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(Y),e.LFG(B.e),e.LFG(d.eX),e.LFG(g.F0),e.LFG(R.Z),e.LFG(i.yh))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();var Q=r(4557),J=r(5002),q=r(3936),D=r(362);function be(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-incident-form",3),e.NdJ("formSubmitted",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.addIncident(a))})("fieldReset",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.resetBackendError(a))})("returnToList",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.returnToList())}),e.qZA(),e.BQk()}if(2&n){const t=c.ngIf,o=e.oxw();e.xp6(1),e.Q6J("incident",o.incident)("formModel",t)("errors",o.error)("roleIncident",o.roleIncident)("operationType",o.operationType)}}let Pe=(()=>{class n{constructor(t,o,a,m){this.store=t,this.router=o,this.storeAuth=a,this.authService=m,this.formModel$=this.store.select(K),this.errors$=this.store.select(z),this.error={},this.operationType=Q.C.ADD,this.roleIncident=J.s.USER,this.incident={id:"",titre:"",description:"",categorieIncident:null,probleme:null,refSys:"",etapeIncident:"D\xe9clar\xe9",firstName:null!==this.authService.getUserInfo()?this.authService.getUserInfo().firstName:"",lastName:null!==this.authService.getUserInfo()?this.authService.getUserInfo().lastName:"",userName:null!==this.authService.getUserInfo()?this.authService.getUserInfo().userName:"",demandeur:null,firstNameGestionnaire:"",lastNameGestionnaire:"",userNameGestionnaire:"",firstNameSupport:"",lastNameSupport:"",userNameSupport:"",gestionnaire:null,impact:null,equipement:null,groupeEquipement:"",categorieEquipement:"",sousCategorieEquipement:"",libelleEquipement:"",numeroSerie:"",source:null,severite:null,statutIncident:"D\xe9clar\xe9",prioriteIncident:"Basse",typeIncident:"MATERIEL",test:"moi-m\xeame",dateCreation:null,dateDerniereModification:null}}ngOnInit(){this.store.dispatch(s.resetItem()),this.store.dispatch(s.resetFormModel()),this.store.dispatch(s.loadFormModel()),this.errors$.subscribe(t=>{null!==t&&(this.error=t)}),console.log(this.authService.getUserInfo())}addIncident(t){let o=null;"AUTRE"!==t.typeIncident&&(o=t.equipement);const a={titre:t.titre,description:t.description,equipement:o,typeIncident:t.typeIncident};console.log(a),this.store.dispatch(s.createItem({item:a}))}resetBackendError(t){this.store.dispatch(s.resetErrorField({fieldName:t}))}returnToList(){this.router.navigateByUrl("incidents/nouvel-incident")}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(i.yh),e.Y36(g.F0),e.Y36(i.yh),e.Y36(B.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-nouveau-incident-add"]],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mes Incidents","pathLevelTwo","Nouvel Incident","pathLevelThree","Ajouter"],[4,"ngIf"],[3,"incident","formModel","errors","roleIncident","operationType","formSubmitted","fieldReset","returnToList"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,be,2,5,"ng-container",2),e.ALo(3,"async")),2&o&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,a.formModel$)))},dependencies:[f.O5,q.u,D.V,f.Ov],styles:["[_nghost-%COMP%]{width:100%}"]})}return n})();var Ee=r(7394);function Ae(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-incident-form",4),e.NdJ("formSubmitted",function(a){e.CHM(t);const m=e.oxw(2);return e.KtG(m.editIncident(a))})("returnToList",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.returnToList())})("fieldReset",function(a){e.CHM(t);const m=e.oxw(2);return e.KtG(m.resetBackendError(a))}),e.qZA()}if(2&n){const t=e.oxw().ngIf,o=e.oxw();e.Q6J("incident",o.incidentDto)("formModel",t)("errors",o.error)("roleIncident",o.roleIncident)("operationType",o.operationType)}}function Ze(n,c){if(1&n&&(e.ynx(0),e.YNc(1,Ae,1,5,"app-incident-form",3),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.incidentDto)}}let Le=(()=>{class n{constructor(t,o,a,m,M){this.store=t,this.route=o,this.router=a,this.storeAuth=m,this.authService=M,this.formModel$=this.store.select(K),this.incident$=this.store.select(Ie),this.itemIncident=null,this.incidentDto=null,this.errors$=this.store.select(z),this.error={},this.operationType=Q.C.ADD,this.roleIncident=J.s.USER,this.subscription=new Ee.w0}ngOnInit(){this.store.dispatch(s.resetFormModel()),this.subscription=this.route.params.subscribe(t=>{this.id=t.id,this.id&&this.store.dispatch(s.loadItem({id:this.id}))}),this.store.dispatch(s.resetItem()),this.store.dispatch(s.loadFormModel()),this.errors$.subscribe(t=>{null!==t&&(this.error=t)}),this.incident$.subscribe(t=>{t&&(this.incidentDto={id:t.id,titre:t.titre,description:t.description,categorieIncident:t.categorieIncident,probleme:t.probleme,refSys:t.refSys,etapeIncident:t.statutIncident,firstName:null==t.demandeur?"":t.demandeur.firstName,lastName:null==t.demandeur?"":t.demandeur.lastName,userName:null==t.demandeur?"":t.demandeur.userName,demandeur:t.demandeur,firstNameGestionnaire:null==t.gestionnaire?"":t.gestionnaire.firstName,lastNameGestionnaire:null==t.gestionnaire?"":t.gestionnaire.lastName,userNameGestionnaire:null==t.gestionnaire?"":t.gestionnaire.userName,firstNameSupport:null==t.gestionnaire?"":t.gestionnaire.firstName,lastNameSupport:null==t.gestionnaire?"":t.gestionnaire.lastName,userNameSupport:null==t.gestionnaire?"":t.gestionnaire.userName,gestionnaire:t.gestionnaire,impact:t.impact,equipement:t.equipement,groupeEquipement:null==t.equipement?"":t.equipement.modelEquip.categoryEquip.groupEquip.libelle,categorieEquipement:null==t.equipement?"":t.equipement.modelEquip.categoryEquip.libelle,sousCategorieEquipement:"",libelleEquipement:null==t.equipement?"":t.equipement.libelle,numeroSerie:null==t.equipement?"":t.equipement.numeroSerie,test:"moi-m\xeame",source:t.source,severite:t.severite,statutIncident:t.statutIncident,prioriteIncident:t.prioriteIncident,typeIncident:t.typeIncident,dateDerniereModification:null===t.dateDerniereModification?"":this.formatDate(t.dateDerniereModification),dateCreation:null===t.dateCreation?"":this.formatDate(t.dateCreation)})})}formatDate(t){if(t){const o=new Date(t);return o.toLocaleDateString()+" \xe0 "+o.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}editIncident(t){const o={id:t.id,titre:t.titre,description:t.description,equipement:t.equipement,typeIncident:t.typeIncident};this.store.dispatch(s.updateItem({id:Number(this.id),item:o}))}resetBackendError(t){this.store.dispatch(s.resetErrorField({fieldName:t}))}returnToList(){this.router.navigateByUrl("incidents/nouvel-incident")}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(i.yh),e.Y36(g.gz),e.Y36(g.F0),e.Y36(i.yh),e.Y36(B.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-nouveau-incident-edit"]],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mes Incidents","pathLevelTwo","Nouvel Incident","pathLevelThree","Editer"],[4,"ngIf"],[3,"incident","formModel","errors","roleIncident","operationType","formSubmitted","returnToList","fieldReset",4,"ngIf"],[3,"incident","formModel","errors","roleIncident","operationType","formSubmitted","returnToList","fieldReset"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,Ze,2,1,"ng-container",2),e.ALo(3,"async")),2&o&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,a.formModel$)))},dependencies:[f.O5,q.u,D.V,f.Ov],styles:["[_nghost-%COMP%]{width:100%}"]})}return n})();var $e=r(2572),W=r(3096),Oe=r(3975),Be=r(4970),De=r(5779),Ue=r(4849),k=r(3849),E=r(95),Fe=r(7251),Ke=r(166),Ge=r(6327),He=r(8564),ze=r(8223),Ye=r(602),Re=r(1469),Qe=r(6326),Je=r(8346),qe=r(1171),We=r(547);function ke(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"N\xb0"),e.qZA())}function je(n,c){if(1&n&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(t.id)}}function Ve(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"Cat & sous-categorie"),e.qZA())}function Xe(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.AsE("",null==t.categorieIncident?null:t.categorieIncident.code," ",null==t.categorieIncident?null:t.categorieIncident.libelle,"")}}function we(n,c){1&n&&(e.TgZ(0,"th",36),e._uU(1,"Libell\xe9 Demande"),e.qZA())}function et(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(t.titre)}}function tt(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"Equipement"),e.qZA())}function nt(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(t.equipement.libelle)}}function it(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"Priorit\xe9"),e.qZA())}function ot(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(t.prioriteIncident)}}function rt(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"S\xe9v\xe9rit\xe9"),e.qZA())}function st(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(null==t.severite?null:t.severite.libelle)}}function ct(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"Date Cr\xe9ation"),e.qZA())}function at(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function dt(n,c){1&n&&(e.TgZ(0,"th",33),e._uU(1,"Date Derni\xe8re Modif"),e.qZA())}function lt(n,c){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function ut(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"table",20),e.NdJ("itemSelected",function(a){e.CHM(t);const m=e.oxw(2);return e.KtG(m.itemSelected(a))}),e.ynx(1,21),e.YNc(2,ke,2,0,"th",22),e.YNc(3,je,2,1,"td",23),e.BQk(),e.ynx(4,24),e.YNc(5,Ve,2,0,"th",22),e.YNc(6,Xe,2,2,"td",25),e.BQk(),e.ynx(7,26),e.YNc(8,we,2,0,"th",27),e.YNc(9,et,2,1,"td",25),e.BQk(),e.ynx(10,28),e.YNc(11,tt,2,0,"th",22),e.YNc(12,nt,2,1,"td",25),e.BQk(),e.ynx(13,29),e.YNc(14,it,2,0,"th",22),e.YNc(15,ot,2,1,"td",25),e.BQk(),e.ynx(16,30),e.YNc(17,rt,2,0,"th",22),e.YNc(18,st,2,1,"td",25),e.BQk(),e.ynx(19,31),e.YNc(20,ct,2,0,"th",22),e.YNc(21,at,3,4,"td",25),e.BQk(),e.ynx(22,32),e.YNc(23,dt,2,0,"th",22),e.YNc(24,lt,3,4,"td",25),e.BQk(),e.qZA()}if(2&n){const t=c.ngIf,o=e.oxw(2);e.Q6J("items",t)("headers",o.headerTable)("selectable",!0)}}function pt(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.refreshButtonClicked())})("pageSelected",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.pageSelected(a))})("pageSizeChange",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.pageSizeChange(a))})("closeButtonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e._UZ(7,"div",10),e.TgZ(8,"div",11)(9,"app-custom-button",12),e.NdJ("buttonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addButtonClicked())}),e.qZA(),e.TgZ(10,"app-custom-button",13),e.NdJ("buttonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editButtonClicked())}),e.qZA(),e.TgZ(11,"app-custom-button",14),e.NdJ("buttonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.deleteButtonClicked())}),e.qZA()(),e.TgZ(12,"div",15),e._UZ(13,"app-custom-button",16),e.TgZ(14,"app-print-button",17),e.NdJ("printButtonClicked",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printButtonClicked())}),e.qZA()(),e.TgZ(15,"div",18),e.YNc(16,ut,25,3,"table",19),e.ALo(17,"async"),e.qZA()()}if(2&n){const t=c.ngIf,o=e.oxw();e.Q6J("itemSelected",o.isItemSelected())("pageSize",t.pageSize)("currentPage",t.page)("totalElements",t.totalElement),e.xp6(1),e.Q6J("formGroup",o.searchForm),e.xp6(6),e.Q6J("formGroup",o.searchForm),e.xp6(3),e.Q6J("disabled",!o.isItemSelected()),e.xp6(1),e.Q6J("disabled",!o.isItemSelected()),e.xp6(5),e.Q6J("ngIf",e.lcZ(17,9,o.items$))}}let mt=(()=>{class n{constructor(t,o,a,m){this.router=t,this.modalService=o,this.store=a,this.incidentFormService=m,this.isUpdateActivated=!1,this.headerTable=["N\xb0","Cat & sous-categorie","Libell\xe9 Demande","Equipement","Statut","Priorit\xe9","S\xe9v\xe9rit\xe9","Impact","Demandeur","service/unit.Fonct","Date Cr\xe9ation","Date Dern modif"],this.items$=this.store.select(ge),this.page$=this.store.select(G),this.pageSize$=this.store.select(H),this.totalElement$=this.store.select(Ce),this.data$=(0,$e.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,v.U)(([M,U,l])=>({page:M,pageSize:U,totalElement:l}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.incidentFormService.createSearchForm(),this.store.dispatch(s.loadItems())}addButtonClicked(){this.router.navigate(["incidents","nouvel-incident","add"])}editButtonClicked(){const t=this.selectedItem?.id;t&&(this.store.dispatch(s.resetItem()),this.router.navigate(["incidents","nouvel-incident","edit",t]))}deleteButtonClicked(){const t=this.selectedItem;t&&this.modalService.openComponent(Ue.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(o=>{o&&"yes"===o&&this.store.dispatch(s.deleteItem({item:t}))})}itemSelected(t){this.selectedItem=t}pageSelected(t){this.store.dispatch(s.changePage({page:t}))}pageSizeChange(t){this.store.dispatch(s.changePageSize({pageSize:t}))}closeButtonClicked(){this.router.navigate(["incidents"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(s.resetSearch())}searchButtonClicked(){this.store.dispatch(s.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(g.F0),e.Y36(R.Z),e.Y36(i.yh),e.Y36(W.X))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-nouveau-incident-list"]],features:[e._Bn([W.X,Oe.x,Be.W,De.P])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mes Incidents","pathLevelTwo","Nouvel Incident","pathLevelThree","Liste"],["title","Liste des Nouveaux Incidents",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Nouveaux Incidents",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","titre"],[1,"advance-search",3,"formGroup"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Nouvel Incident",1,"me-1",3,"buttonClicked"],["icon","icon-edit-alt btn-icon-edit","title","Modifier",1,"me-1",3,"disabled","buttonClicked"],["icon","icon-trash btn-icon-delete","title","Supprimer",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","N\xb0"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Cat & sous-categorie"],["app-cell-def-template","","class","left",4,"appCellDefTemplate"],["appCellDef","Libell\xe9 Demande"],["app-header-attribute-def-template","","class","w-50",4,"appHeaderDefTemplate"],["appCellDef","Equipement"],["appCellDef","Priorit\xe9"],["appCellDef","S\xe9v\xe9rit\xe9"],["appCellDef","Date Cr\xe9ation"],["appCellDef","Date Modification"],["app-header-attribute-def-template",""],["app-cell-def-template",""],["app-cell-def-template","",1,"left"],["app-header-attribute-def-template","",1,"w-50"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,pt,18,11,"app-crud-list",2),e.ALo(3,"async")),2&o&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,a.data$)))},dependencies:[f.O5,k.L,E.JJ,E.JL,E.sg,E.u,Fe._,Ke.x,Ge.N,He.D,ze.h,Ye.u,Re.O,Qe.q,Je.W,qe.h,We.Z,D.V,f.Ov,f.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.left[_ngcontent-%COMP%]{text-align:left!important}"]})}return n})();var ht=r(8510),ft=r(2030),_t=r(3396),gt=r(1793),It=r(2018);const vt=[{path:"",component:mt,pathMatch:"prefix"},{path:"add",component:Pe,pathMatch:"prefix"},{path:"edit/:id",component:Le,pathMatch:"prefix"}];let Ct=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[Y,It.k],imports:[f.ez,k.L,i.Aw.forFeature("nouveau-incidents",_e),d.sQ.forFeature(Me),ht.Y,ft.h,_t.B,gt.K,Z.m,g.Bz.forChild(vt)]})}return n})()},4849:(j,b,r)=>{r.d(b,{n:()=>L});var f=r(1892),g=r(6814),d=r(8666),Z=r(2463),i=r(9468),u=r(166);let L=(()=>{class x{constructor(y,S){this.modalData=y,this.modalRef=S}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#e=this.\u0275fac=function(S){return new(S||x)(i.Y36(f.S),i.Y36(f.R))};static#t=this.\u0275cmp=i.Xpm({type:x,selectors:[["app-confirm-alert"]],standalone:!0,features:[i.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(S,P){1&S&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),i._uU(3,"Confirmation de Suppression"),i.qZA()()(),i.TgZ(4,"div",3)(5,"div",4)(6,"div",5),i._UZ(7,"img",6),i.qZA(),i.TgZ(8,"div",7),i._uU(9," Voulez-vous vraiment effectuer cette action ? "),i.qZA()(),i.TgZ(10,"div",8)(11,"app-custom-button",9),i.NdJ("buttonClicked",function(){return P.confirmAction()}),i.qZA(),i.TgZ(12,"app-custom-button",10),i.NdJ("buttonClicked",function(){return P.close()}),i.qZA()()())},dependencies:[g.ez,d.a,Z.v,u.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return x})()}}]);