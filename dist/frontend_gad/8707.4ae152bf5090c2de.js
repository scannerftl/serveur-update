"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[8707],{5779:(P,E,s)=>{s.d(E,{P:()=>v});var r=s(95),m=s(9468);let v=(()=>{class g{constructor(){}createFormActionSuggeree(u){return new r.cw({id:new r.NI(this.getActionSuggereeId(u),{nonNullable:!0,validators:[r.kI.required]}),libelle:new r.NI(this.getActionSuggereeLibelle(u),{nonNullable:!0,validators:[r.kI.required]}),statut:new r.NI(this.getActionSuggereeStatut(u),{nonNullable:!0,validators:[r.kI.required]}),description:new r.NI(this.getActionSuggereeDescription(u),{}),refSys:new r.NI(this.getActionSuggereeRefSys(u),{})})}createFormNewActionSuggeree(){return new r.cw({id:new r.NI("",{nonNullable:!0,validators:[r.kI.required]}),libelle:new r.NI("",{nonNullable:!0,validators:[r.kI.required]}),statut:new r.NI(null,{nonNullable:!0,validators:[r.kI.required]}),description:new r.NI("",{}),refSys:new r.NI("",{})})}getActionSuggereeId(u){return null!==u?u.id:0}getActionSuggereeLibelle(u){return null!==u?u.libelle:""}getActionSuggereeStatut(u){return null!==u?u.statut:null}getActionSuggereeDescription(u){return null!==u?u.description:""}getActionSuggereeRefSys(u){return null!==u?u.refSys:""}static#e=this.\u0275fac=function(n){return new(n||g)};static#t=this.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac})}return g})()},4970:(P,E,s)=>{s.d(E,{W:()=>g});var r=s(95),m=s(9468),v=s(5779);let g=(()=>{class p{constructor(n){this.actionSuggereeFormService=n}createFormEtape(n){return new r.cw({id:new r.NI(this.getEtapeId(n),{nonNullable:!0,validators:[r.kI.required]}),numeroEtape:new r.NI(this.getEtapeNumeroEtape(n),{nonNullable:!0,validators:[r.kI.required]}),actionSuggere:this.actionSuggereeFormService.createFormActionSuggeree(this.getEtapeActionSuggeree(n)),refSys:new r.NI(this.getEtapeRefSys(n),{})})}createFormNewEtape(){return new r.cw({id:new r.NI("",{nonNullable:!0,validators:[r.kI.required]}),numeroEtape:new r.NI(0,{nonNullable:!0,validators:[r.kI.required]}),actionSuggere:this.actionSuggereeFormService.createFormNewActionSuggeree(),refSys:new r.NI("",{})})}getEtapeId(n){return null!==n?n.id:""}getEtapeRefSys(n){return null!==n?n.refSys:""}getEtapeNumeroEtape(n){return null!==n?n.numeroEtape:0}getEtapeActionSuggeree(n){return null!==n?n.actionSuggere:null}static#e=this.\u0275fac=function(i){return new(i||p)(m.LFG(v.P))};static#t=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac})}return p})()},3096:(P,E,s)=>{s.d(E,{X:()=>g});var r=s(95),m=s(9468),v=s(3975);let g=(()=>{class p{constructor(n){this.solutionFormService=n}createForm(n,i,o){return this.currentIncident=o,this.currentOperationType=n,this.currentRoleIncident=i,console.log("Create Form : "+this.currentRoleIncident),new r.cw({titre:new r.NI(o.titre,{nonNullable:!0,validators:[r.kI.required]}),description:new r.NI(o.description,{nonNullable:!0,validators:[r.kI.required]}),equipement:new r.NI(o.equipement,{nonNullable:!0,validators:[r.kI.required]}),groupeEquipement:new r.NI(o.groupeEquipement),categorieEquipement:new r.NI(o.categorieEquipement),sousCategorieEquipement:new r.NI(o.sousCategorieEquipement),libelleEquipement:new r.NI(o.libelleEquipement),numeroSerie:new r.NI(o.numeroSerie),refSys:new r.NI(o.refSys),etapeIncident:new r.NI(o.etapeIncident),prioriteIncident:new r.NI(o.prioriteIncident,{}),typeIncident:new r.NI(o.typeIncident,{nonNullable:!0,validators:[r.kI.required]}),probleme:new r.NI(o.probleme,{nonNullable:"USER"!==this.currentRoleIncident,validators:[this.problemeValidator.bind(this)]}),impact:new r.NI(o.impact,{validators:[this.impactValidator.bind(this)]}),categorieIncident:new r.NI(o.categorieIncident,{validators:[this.categorieValidator.bind(this)]}),firstName:new r.NI(o.firstName),lastName:new r.NI(o.lastName),userName:new r.NI(o.userName),demandeur:new r.NI(o.demandeur,{validators:[this.demandeurValidator.bind(this)]}),firstNameGestionnaire:new r.NI(o.firstNameGestionnaire),lastNameGestionnaire:new r.NI(o.lastNameGestionnaire),userNameGestionnaire:new r.NI(o.userNameGestionnaire),firstNameSupport:new r.NI(o.firstNameSupport),lastNameSupport:new r.NI(o.lastNameSupport),userNameSupport:new r.NI(o.userNameSupport),test:new r.NI(o.test),gestionnaire:new r.NI(o.gestionnaire,{validators:[this.gestionnaireValidator.bind(this)]}),source:new r.NI(o.source,{nonNullable:!0,validators:[r.kI.required]}),severite:new r.NI(o.severite,{nonNullable:!0,validators:[r.kI.required]}),solution:this.solutionFormService.createFormSolution(this.currentOperationType,o.solution),dateCreation:new r.NI(o.dateCreation),dateDerniereModification:new r.NI(o.dateDerniereModification)})}createSearchForm(){return new r.cw({titre:new r.NI("",{nonNullable:!0})})}problemeValidator(n){return"USER"===this.currentRoleIncident?"ADD"===this.currentOperationType?null===n.value?null:{problemeInvalide:!0}:null===n.value?{problemeInvalide:!0}:null:(console.log(this.currentRoleIncident),null===n.value?{problemeInvalide:!0}:null)}impactValidator(n){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===n.value?null:{impactInvalide:!0}:null===n.value?{impactInvalide:!0}:null}gestionnaireValidator(n){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===n.value?null:{gestionnaireInvalide:!0}:null===n.value?{gestionnaireInvalide:!0}:null}demandeurValidator(n){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===n.value?null:{demandeurInvalide:!0}:null===n.value?{demandeurInvalide:!0}:null}categorieValidator(n){return"USER"===this.currentRoleIncident&&"ADD"===this.currentOperationType?null===n.value?null:{categorieInvalide:!0}:null===n.value?{categorieInvalide:!0}:null}static#e=this.\u0275fac=function(i){return new(i||p)(m.LFG(v.x))};static#t=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac})}return p})()},8707:(P,E,s)=>{s.r(E),s.d(E,{IncidentEnCoursModule:()=>it});var r=s(6814),m=s(3096),v=s(3975),g=s(4970),p=s(5779),u=s(2572),n=s(7398),i=s(676);const o="Incident En Cours",M=(0,i.PH)(`[${o} API] Load All`),U=(0,i.PH)(`[${o} API] Load All Success`,(0,i.Ky)()),K=(0,i.PH)(`[${o} API] Create`,(0,i.Ky)()),z=(0,i.PH)(`[${o} API] Create Success`,(0,i.Ky)()),W=(0,i.PH)(`[${o} API] Load`,(0,i.Ky)()),H=(0,i.PH)(`[${o} API] Reset`),Y=(0,i.PH)(`[${o} API] Load Success`,(0,i.Ky)()),k=(0,i.PH)(`[${o} API] Delete`,(0,i.Ky)()),V=(0,i.PH)(`[${o} API] Delete Success`,(0,i.Ky)()),Q=(0,i.PH)(`[${o} API] Update`,(0,i.Ky)()),J=(0,i.PH)(`[${o} API] Update Success`,(0,i.Ky)()),q=(0,i.PH)(`[${o} API] Load Form Model`),j=(0,i.PH)(`[${o} API] Reset Form Model`),X=(0,i.PH)(`[${o} API] Load Form Model Success`,(0,i.Ky)()),ee=(0,i.PH)(`[${o} API] Reset Search`),te=(0,i.PH)(`[${o} API] Search`,(0,i.Ky)()),re=(0,i.PH)(`[${o} API] Change Page`,(0,i.Ky)()),ne=(0,i.PH)(`[${o} API] Change Page Size`,(0,i.Ky)()),c={loadItems:M,loadItemsSuccess:U,resetItem:H,createItem:K,createItemSuccess:z,loadItem:W,loadItemSuccess:Y,updateItem:Q,updateItemSuccess:J,deleteItem:k,deleteItemSuccess:V,loadFormModel:q,resetFormModel:j,loadFormModelSuccess:X,setError:(0,i.PH)(`[${o} API] Create Error`,(0,i.Ky)()),resetError:(0,i.PH)(`[${o} API] Reset Error`),resetErrorField:(0,i.PH)(`[${o} API] Reset Error Field`,(0,i.Ky)()),resetSearch:ee,search:te,changePage:re,changePageSize:ne},le=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(c.loadItemsSuccess,(t,l)=>({...t,items:l.items,totalElement:l.totalElement})),(0,i.on)(c.resetItem,(t,l)=>({...t,currentItem:null})),(0,i.on)(c.createItemSuccess,(t,l)=>({...t})),(0,i.on)(c.deleteItemSuccess,(t,l)=>({...t})),(0,i.on)(c.loadItemSuccess,(t,l)=>({...t,currentItem:l.item})),(0,i.on)(c.updateItemSuccess,(t,l)=>({...t})),(0,i.on)(c.loadFormModel,(t,l)=>({...t,formModel:null})),(0,i.on)(c.loadFormModelSuccess,(t,l)=>({...t,formModel:l.formModel})),(0,i.on)(c.resetSearch,(t,l)=>({...t,searchModel:{}})),(0,i.on)(c.search,(t,l)=>({...t,searchModel:l.searchModel})),(0,i.on)(c.changePage,(t,l)=>({...t,page:l.page})),(0,i.on)(c.changePageSize,(t,l)=>({...t,pageSize:l.pageSize})),(0,i.on)(c.setError,(t,l)=>({...t,errors:l.errors})),(0,i.on)(c.resetError,(t,l)=>({...t,errors:{}})),(0,i.on)(c.resetErrorField,(t,l)=>{let a={};return null!==t.errors&&Object.entries(t.errors).forEach(([d,_])=>{d!==l.fieldName&&(a[`${d}`]=_)}),{...t,errors:a}})),b=(0,i.ZF)("incident-en-cours"),ce=(0,i.P1)(b,t=>t.items),ue=((0,i.P1)(b,t=>t.currentItem),(0,i.P1)(b,t=>t.formModel),(0,i.P1)(b,t=>t.searchModel)),$=(0,i.P1)(b,t=>t.page),w=(0,i.P1)(b,t=>t.pageSize),de=(0,i.P1)(b,t=>t.totalElement);(0,i.P1)(b,t=>t.errors);var e=s(9468),O=s(8281),R=s(3849),D=s(95),pe=s(7251),me=s(166),he=s(6327),fe=s(8564),_e=s(8223),ge=s(602),Ie=s(1469),ve=s(6326),Ee=s(8346),Ce=s(1171),Se=s(547),Ne=s(362);function Pe(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"R\xe9f\xe9rence"),e.qZA())}function be(t,l){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(a.refSys)}}function ye(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Cat & sous-categorie"),e.qZA())}function Ae(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.AsE("",null==a.categorieIncident?null:a.categorieIncident.code," ",null==a.categorieIncident?null:a.categorieIncident.libelle,"")}}function Te(t,l){1&t&&(e.TgZ(0,"th",33),e._uU(1,"Libell\xe9 Demande"),e.qZA())}function Me(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(a.titre)}}function De(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Equipement"),e.qZA())}function Le(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(a.equipement.libelle)}}function Oe(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Gestionnaire"),e.qZA())}function xe(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(null==a.gestionnaire?null:a.gestionnaire.firstName)}}function Be(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Priorit\xe9"),e.qZA())}function Fe(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(a.prioriteIncident)}}function Ze(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"S\xe9v\xe9rit\xe9"),e.qZA())}function Ue(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(null==a.severite?null:a.severite.libelle)}}function $e(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Date Cr\xe9ation"),e.qZA())}function we(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,a.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function Re(t,l){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Date Derni\xe8re Modif"),e.qZA())}function Ge(t,l){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const a=l.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,a.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function Ke(t,l){if(1&t){const a=e.EpF();e.TgZ(0,"table",16),e.NdJ("itemSelected",function(_){e.CHM(a);const N=e.oxw(2);return e.KtG(N.itemSelected(_))}),e.ynx(1,17),e.YNc(2,Pe,2,0,"th",18),e.YNc(3,be,2,1,"td",19),e.BQk(),e.ynx(4,20),e.YNc(5,ye,2,0,"th",18),e.YNc(6,Ae,2,2,"td",21),e.BQk(),e.ynx(7,22),e.YNc(8,Te,2,0,"th",23),e.YNc(9,Me,2,1,"td",21),e.BQk(),e.ynx(10,24),e.YNc(11,De,2,0,"th",18),e.YNc(12,Le,2,1,"td",21),e.BQk(),e.ynx(13,25),e.YNc(14,Oe,2,0,"th",18),e.YNc(15,xe,2,1,"td",21),e.BQk(),e.ynx(16,26),e.YNc(17,Be,2,0,"th",18),e.YNc(18,Fe,2,1,"td",21),e.BQk(),e.ynx(19,27),e.YNc(20,Ze,2,0,"th",18),e.YNc(21,Ue,2,1,"td",21),e.BQk(),e.ynx(22,28),e.YNc(23,$e,2,0,"th",18),e.YNc(24,we,3,4,"td",21),e.BQk(),e.ynx(25,29),e.YNc(26,Re,2,0,"th",18),e.YNc(27,Ge,3,4,"td",21),e.BQk(),e.qZA()}if(2&t){const a=l.ngIf,d=e.oxw(2);e.Q6J("items",a)("headers",d.headerTable)("selectable",!0)}}function ze(t,l){if(1&t){const a=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.refreshButtonClicked())})("pageSelected",function(_){e.CHM(a);const N=e.oxw();return e.KtG(N.pageSelected(_))})("pageSizeChange",function(_){e.CHM(a);const N=e.oxw();return e.KtG(N.pageSizeChange(_))})("closeButtonClicked",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e._UZ(7,"div",10),e.TgZ(8,"div",11),e._UZ(9,"app-custom-button",12),e.TgZ(10,"app-print-button",13),e.NdJ("printButtonClicked",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.printButtonClicked())}),e.qZA()(),e.TgZ(11,"div",14),e.YNc(12,Ke,28,3,"table",15),e.ALo(13,"async"),e.qZA()()}if(2&t){const a=l.ngIf,d=e.oxw();e.Q6J("itemSelected",d.isItemSelected())("pageSize",a.pageSize)("currentPage",a.page)("totalElements",a.totalElement),e.xp6(1),e.Q6J("formGroup",d.searchForm),e.xp6(6),e.Q6J("formGroup",d.searchForm),e.xp6(5),e.Q6J("ngIf",e.lcZ(13,7,d.items$))}}let We=(()=>{class t{constructor(a,d,_){this.router=a,this.store=d,this.incidentFormService=_,this.isUpdateActivated=!1,this.headerTable=["R\xe9f\xe9rence","Cat & sous-categorie","Libell\xe9 Demande","Equipement","Statut","Priorit\xe9","S\xe9v\xe9rit\xe9","Impact","Demandeur","Gestionnaire","service/unit.Fonct","Date Cr\xe9ation","Date Dern modif"],this.items$=this.store.select(ce),this.page$=this.store.select($),this.pageSize$=this.store.select(w),this.totalElement$=this.store.select(de),this.data$=(0,u.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,n.U)(([N,B,F])=>({page:N,pageSize:B,totalElement:F}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.incidentFormService.createSearchForm(),this.store.dispatch(c.loadItems())}addButtonClicked(){this.router.navigate(["incidents","incident-en-cours","add"])}editButtonClicked(){const a=this.selectedItem?.id;a&&(this.store.dispatch(c.resetItem()),this.router.navigate(["incidents","incident-en-cours","edit",a]))}deleteButtonClicked(){const a=this.selectedItem;a&&this.store.dispatch(c.deleteItem({item:a}))}itemSelected(a){this.selectedItem=a}pageSelected(a){this.store.dispatch(c.changePage({page:a}))}pageSizeChange(a){this.store.dispatch(c.changePageSize({pageSize:a}))}closeButtonClicked(){this.router.navigate(["incidents"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(c.resetSearch())}searchButtonClicked(){this.store.dispatch(c.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#e=this.\u0275fac=function(d){return new(d||t)(e.Y36(O.F0),e.Y36(i.yh),e.Y36(m.X))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-incident-en-cours-list"]],features:[e._Bn([m.X,v.x,g.W,p.P])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mes Incidents","pathLevelTwo","Incident En Cours","pathLevelThree","Liste"],["title","Liste des Incidents En Cours",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Incidents En Cours",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","titre"],[1,"advance-search",3,"formGroup"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Cat & sous-categorie"],["app-cell-def-template","","class","left",4,"appCellDefTemplate"],["appCellDef","Libell\xe9 Demande"],["app-header-attribute-def-template","","class","w-50",4,"appHeaderDefTemplate"],["appCellDef","Equipement"],["appCellDef","Gestionnaire"],["appCellDef","Priorit\xe9"],["appCellDef","S\xe9v\xe9rit\xe9"],["appCellDef","Date Cr\xe9ation"],["appCellDef","Date Modification"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template","",1,"left"],["app-header-attribute-def-template","",1,"w-50"]],template:function(d,_){1&d&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,ze,14,9,"app-crud-list",2),e.ALo(3,"async")),2&d&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,_.data$)))},dependencies:[r.O5,R.L,D.JJ,D.JL,D.sg,D.u,pe._,me.x,he.N,fe.D,_e.h,ge.u,Ie.O,ve.q,Ee.W,Ce.h,Se.Z,Ne.V,r.Ov,r.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.left[_ngcontent-%COMP%]{text-align:left!important}"]})}return t})();var He=s(9989),Ye=s(1946);let G=(()=>{class t extends He.v{getResourceBasePath(){return`${Ye.y}/mes-incidents-en-cours`}getIdValue(a){return a.id}static#e=this.\u0275fac=function(){let a;return function(_){return(a||(a=e.n5z(t)))(_||t)}}();static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var h=s(6465),ke=s(2460),y=s(6328),Ve=s(9026),A=s(6306),x=s(9397),Qe=s(1631),C=s(6063),Je=s(9862),S=s(2096),qe=s(3186),je=s(4664),Xe=s(6366),et=s(797);let tt=(()=>{class t{constructor(a,d,_,N,B,F){this.incidentEnCoursService=a,this.authService=d,this.actions$=_,this.router=N,this.modalService=B,this.store=F,this.loadItems$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.loadItems),(0,ke.M)(this.store.select($),this.store.select(w),this.store.select(ue)),(0,y.b)(([f,I,L,Z])=>(console.log(I),this.store.dispatch((0,C.Q)()),(0,Ve.$)(this.incidentEnCoursService.getAllWithPagination(I,L,Z),this.incidentEnCoursService.count(Z)).pipe((0,n.U)(([T,st])=>(this.store.dispatch((0,C.Z)()),c.loadItemsSuccess({items:T,totalElement:st}))),(0,A.K)(T=>(this.store.dispatch((0,C.Z)()),(0,S.of)(c.setError({errors:T})))))))),{dispatch:!0}),this.createItem$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.createItem),(0,y.b)(f=>(this.store.dispatch((0,C.Q)()),console.log(f.item),this.incidentEnCoursService.add(f.item).pipe((0,x.b)(()=>{this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/incident-en-cours")}),(0,n.U)(I=>c.createItemSuccess({item:I})),(0,A.K)(I=>(this.store.dispatch((0,C.Z)()),(0,S.of)(c.setError({errors:I})))))))),{dispatch:!0}),this.loadItem$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.loadItem),(0,Qe.z)(f=>this.incidentEnCoursService.findById(f.id).pipe((0,n.U)(I=>c.loadItemSuccess({item:I})),(0,A.K)(I=>(this.store.dispatch((0,C.Z)()),(0,S.of)(c.setError({errors:I}))))))),{dispatch:!0}),this.deleteItem$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.deleteItem),(0,y.b)(f=>this.incidentEnCoursService.delete(f.item.id,f.item)),(0,x.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident supprim\xe9 avec succ\xe8s"})}),(0,n.U)(()=>c.loadItems()),(0,A.K)(f=>(this.store.dispatch((0,C.Z)()),(0,S.of)(c.setError({errors:f}))))),{dispatch:!0}),this.updateItem$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.updateItem),(0,y.b)(f=>(this.store.dispatch((0,C.Q)()),this.incidentEnCoursService.update(f.item.id,f.item).pipe((0,x.b)(()=>{this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Incident modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("incidents/incident-en-cours")}),(0,n.U)(I=>c.createItemSuccess({item:I})),(0,A.K)(I=>(this.store.dispatch((0,C.Z)()),(0,S.of)(c.setError({errors:I})))))))),{dispatch:!0}),this.loadFormModel$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.loadFormModel),(0,y.b)(()=>this.incidentEnCoursService.getFormModel()),(0,n.U)(f=>c.loadFormModelSuccess({formModel:f})),(0,A.K)(f=>(0,S.of)(c.setError({errors:f}))))),this.resetSearch$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.resetSearch),(0,y.b)(()=>(0,S.of)(c.changePage({page:1}))))),this.search$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.search),(0,y.b)(()=>(0,S.of)(c.changePage({page:1}))))),this.changePage$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.changePage),(0,n.U)(f=>c.loadItems()))),this.changePageSize$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.changePageSize),(0,y.b)(()=>(0,S.of)(c.changePage({page:1}))))),this.handleError$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(c.setError),(0,je.w)(f=>{if(this.store.dispatch((0,C.Q)()),f.errors instanceof Je.UA){if(422===f.errors.status){let I="",L=0;for(const[Z,T]of Object.entries(f.errors.error))I+=0===L?T:"\n"+T,L++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:I})}if(403===f.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===f.errors.status){let I="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:I}),(0,S.of)(qe.jM())}}return this.store.dispatch((0,C.Z)()),(0,S.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(d){return new(d||t)(e.LFG(G),e.LFG(Xe.e),e.LFG(h.eX),e.LFG(O.F0),e.LFG(et.Z),e.LFG(i.yh))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var rt=s(9207);const nt=[{path:"",component:We,pathMatch:"prefix"}];let it=(()=>{class t{static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({providers:[G],imports:[r.ez,R.L,i.Aw.forFeature("incident-en-cours",le),h.sQ.forFeature(tt),rt.m,O.Bz.forChild(nt)]})}return t})()},3975:(P,E,s)=>{s.d(E,{x:()=>g});var r=s(95),m=s(9468),v=s(4970);let g=(()=>{class p{constructor(n){this.etapeFormService=n}createFormSolution(n,i){return new r.cw({id:new r.NI({value:this.getSolutionId(i),disabled:"BEING_RESOLVED"!==n},{nonNullable:!0,validators:[r.kI.required]}),code:new r.NI({value:this.getSolutionCode(i),disabled:"BEING_RESOLVED"!==n},{nonNullable:!0,validators:[r.kI.required]}),libelle:new r.NI({value:this.getSolutionLibelle(i),disabled:"BEING_RESOLVED"!==n},{nonNullable:!0,validators:[r.kI.required]}),refSys:new r.NI({value:this.getSolutionRefSys(i),disabled:"BEING_RESOLVED"!==n},{}),description:new r.NI({value:this.getSolutionDescription(i),disabled:"BEING_RESOLVED"!==n},{}),nombreEtape:new r.NI({value:this.getSolutionNumber(i),disabled:"BEING_RESOLVED"!==n},{nonNullable:!0,validators:[r.kI.required]}),etapes:new r.Oe(this.createEtapeForms(this.getSolutionEtapes(i)))})}getSolutionId(n){return n?n.id:""}getSolutionCode(n){return n?n.code:""}getSolutionRefSys(n){return n?n.refSys:""}getSolutionLibelle(n){return n?n.libelle:""}getSolutionDescription(n){return n?n.description:""}getSolutionNumber(n){return n?n.nombreEtape:0}getSolutionEtapes(n){return n?n.etapes:[]}createEtapeForms(n){return n.map(i=>this.etapeFormService.createFormEtape(i))}static#e=this.\u0275fac=function(i){return new(i||p)(m.LFG(v.W))};static#t=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac})}return p})()},8346:(P,E,s)=>{s.d(E,{W:()=>g});var r=s(9468),m=s(95),v=s(7394);let g=(()=>{class p{constructor(){this.placeholder="",this.type="text",this.readonly=!1,this.otherclass="",this.subscription=new v.w0,this.disabled=!1,this.onTouched=()=>{},this.onChange=()=>{},this.control=new m.NI}writeValue(n){this.control.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n,n?this.control.disable():this.control.enable()}ngOnInit(){this.subscription=this.control.valueChanges.subscribe(n=>{this.onChange(n)})}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||p)};static#t=this.\u0275cmp=r.Xpm({type:p,selectors:[["app-custom-textfield"]],inputs:{placeholder:"placeholder",type:"type",readonly:"readonly",otherclass:"otherclass"},features:[r._Bn([{provide:m.JU,useExisting:(0,r.Gpc)(()=>p),multi:!0}])],decls:1,vars:7,consts:[[3,"type","placeholder","formControl","readonly"]],template:function(i,o){1&i&&r._UZ(0,"input",0),2&i&&(r.Gre("custom-text-field m-0 form-control-sm ",o.otherclass,""),r.s9C("placeholder",o.placeholder),r.Q6J("type",o.type)("formControl",o.control)("readonly",o.readonly))},dependencies:[m.Fj,m.JJ,m.oH],styles:[".custom-text-field[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border:1px solid #878787!important;margin-bottom:2px}.form-control-sm[_ngcontent-%COMP%]{font-size:12px!important;border-radius:0;min-width:100%}.custom-text-field[_ngcontent-%COMP%]:focus{background-color:#f0f4f5;border:0px!important;outline:0}.custom-text-field[_ngcontent-%COMP%]:read-only:focus{outline:0!important;border:1px solid #878787!important}"]})}return p})()},1171:(P,E,s)=>{s.d(E,{h:()=>m});var r=s(9468);let m=(()=>{class v{constructor(){this.title="",this.class=""}static#e=this.\u0275fac=function(u){return new(u||v)};static#t=this.\u0275cmp=r.Xpm({type:v,selectors:[["app-form-label"]],inputs:{title:"title",class:"class"},decls:2,vars:4,template:function(u,n){1&u&&(r.TgZ(0,"label"),r._uU(1),r.qZA()),2&u&&(r.Tol(n.class),r.xp6(1),r.Oqu(n.title))},styles:["label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#464445;margin-right:5px;min-width:100%;max-width:100%}"]})}return v})()},3849:(P,E,s)=>{s.d(E,{L:()=>p});var r=s(9468),m=s(2463),v=s(6814),g=s(166);let p=(()=>{class u{constructor(){this.printButtonClicked=new r.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#e=this.\u0275fac=function(o){return new(o||u)};static#t=this.\u0275cmp=r.Xpm({type:u,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[r.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(o,M){1&o&&(r.TgZ(0,"app-custom-button",0),r.NdJ("buttonClicked",function(){return M.emitPrintButtonClicked()}),r.qZA())},dependencies:[v.ez,m.v,g.x],styles:["[_nghost-%COMP%]{display:block}"]})}return u})()},547:(P,E,s)=>{s.d(E,{Z:()=>v});var r=s(9468),m=s(95);let v=(()=>{class g{constructor(u){this.ngControl=u}static#e=this.\u0275fac=function(n){return new(n||g)(r.Y36(m.a5,10))};static#t=this.\u0275dir=r.lG2({type:g,selectors:[["","formControl",""],["","formControlName",""]]})}return g})()}}]);