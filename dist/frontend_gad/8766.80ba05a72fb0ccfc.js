"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[8766],{8766:(H,E,n)=>{n.r(E),n.d(E,{HistoriqueEquipementModule:()=>rt});var a=n(6814),e=n(9468),h=n(95);let q=(()=>{class t{constructor(){}createSearchForm(){return new h.cw({description:new h.NI("",{nonNullable:!0,validators:[h.kI.required]}),libelle:new h.NI("",{nonNullable:!0,validators:[h.kI.required]})})}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var C=n(2572),f=n(7398),i=n(676);const l="Historique Equipement",y=(0,i.PH)(`[${l} API] Load All`),Z=(0,i.PH)(`[${l} API] Load All Success`,(0,i.Ky)()),I=(0,i.PH)(`[${l} API] Create`,(0,i.Ky)()),b=(0,i.PH)(`[${l} API] Create Success`,(0,i.Ky)()),Y=(0,i.PH)(`[${l} API] Load`,(0,i.Ky)()),Q=(0,i.PH)(`[${l} API] Load Success`,(0,i.Ky)()),R=(0,i.PH)(`[${l} API] Load History`,(0,i.Ky)()),W=(0,i.PH)(`[${l} API] Load History Success`,(0,i.Ky)()),J=(0,i.PH)(`[${l} API] Create Error`,(0,i.Ky)()),k=(0,i.PH)(`[${l} API] Reset Error`),w=(0,i.PH)(`[${l} API] Reset Error Field`,(0,i.Ky)()),j=(0,i.PH)(`[${l} API] Reset`),V=(0,i.PH)(`[${l} API] Delete`,(0,i.Ky)()),X=(0,i.PH)(`[${l} API] Delete Success`,(0,i.Ky)()),r={loadItems:y,loadItemsSuccess:Z,resetItem:j,createItem:I,createItemSuccess:b,loadItem:Y,loadItemSuccess:Q,updateItem:(0,i.PH)(`[${l} API] Update`,(0,i.Ky)()),updateItemSuccess:(0,i.PH)(`[${l} API] Update Success`,(0,i.Ky)()),deleteItem:V,deleteItemSuccess:X,setError:J,resetError:k,resetErrorField:w,loadFormModel:(0,i.PH)(`[${l} API] Load Form Model`),resetFormModel:(0,i.PH)(`[${l} API] Reset Form Model`),loadFormModelSuccess:(0,i.PH)(`[${l} API] Load Form Model Success`,(0,i.Ky)()),resetSearch:(0,i.PH)(`[${l} API] Reset Search`),search:(0,i.PH)(`[${l} API] Search`,(0,i.Ky)()),changePage:(0,i.PH)(`[${l} API] Change Page`,(0,i.Ky)()),changePageSize:(0,i.PH)(`[${l} API] Change Page Size`,(0,i.Ky)()),loadItemHistory:R,loadItemHistorySuccess:W},pe=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,itemHistory:[],page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(r.loadItemsSuccess,(t,s)=>(console.log(s.items),{...t,items:s.items,totalElement:s.totalElement})),(0,i.on)(r.resetItem,(t,s)=>({...t,currentItem:null})),(0,i.on)(r.createItemSuccess,(t,s)=>({...t})),(0,i.on)(r.deleteItemSuccess,(t,s)=>({...t})),(0,i.on)(r.loadItemSuccess,(t,s)=>({...t,currentItem:s.item})),(0,i.on)(r.loadItemHistorySuccess,(t,s)=>({...t,itemHistory:s.itemHistory})),(0,i.on)(r.updateItemSuccess,(t,s)=>({...t})),(0,i.on)(r.loadFormModel,(t,s)=>({...t,formModel:null})),(0,i.on)(r.loadFormModelSuccess,(t,s)=>({...t,formModel:s.formModel})),(0,i.on)(r.resetSearch,(t,s)=>({...t,searchModel:{}})),(0,i.on)(r.search,(t,s)=>({...t,searchModel:s.searchModel})),(0,i.on)(r.changePage,(t,s)=>({...t,page:s.page})),(0,i.on)(r.changePageSize,(t,s)=>({...t,pageSize:s.pageSize})),(0,i.on)(r.setError,(t,s)=>({...t,errors:s.errors})),(0,i.on)(r.resetError,(t,s)=>({...t,errors:null})),(0,i.on)(r.resetErrorField,(t,s)=>{let o={};return null!==t.errors&&Object.entries(t.errors).forEach(([c,p])=>{c!==s.fieldName&&(o[`${c}`]=p)}),{...t,errors:o}})),P=(0,i.ZF)("historique-equipements"),ue=(0,i.P1)(P,t=>t.items),me=((0,i.P1)(P,t=>t.currentItem),(0,i.P1)(P,t=>t.itemHistory)),de=((0,i.P1)(P,t=>t.formModel),(0,i.P1)(P,t=>t.searchModel)),F=(0,i.P1)(P,t=>t.page),B=(0,i.P1)(P,t=>t.pageSize),he=(0,i.P1)(P,t=>t.totalElement);(0,i.P1)(P,t=>t.errors);var D=n(1892),z=n(166),fe=n(9887);function _e(t,s){if(1&t&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"span",13),e._uU(4,"R\xe9f\xe9rence: "),e.qZA(),e.TgZ(5,"span",14),e._uU(6),e.qZA()(),e.TgZ(7,"div",15)(8,"span",13),e._uU(9,"Libell\xe9: "),e.qZA(),e.TgZ(10,"span",16),e._uU(11),e.qZA()(),e.TgZ(12,"div",17)(13,"span",13),e._uU(14,"Description: "),e.qZA(),e.TgZ(15,"span",18),e._uU(16),e.qZA()()(),e.TgZ(17,"div",11)(18,"div",12)(19,"span",13),e._uU(20,"D\xe9clancheur: "),e.qZA(),e.TgZ(21,"span",14),e._uU(22),e.qZA()(),e.TgZ(23,"div",15)(24,"span",13),e._uU(25,"Etat de l'Equipement: "),e.qZA(),e.TgZ(26,"span",16),e._uU(27),e.qZA()(),e.TgZ(28,"div",17)(29,"span",13),e._uU(30,"Date: "),e.qZA(),e.TgZ(31,"span",18),e._uU(32),e.ALo(33,"date"),e.qZA()()(),e._UZ(34,"hr"),e.qZA()),2&t){const o=s.$implicit;e.xp6(6),e.Oqu(o.refSys),e.xp6(5),e.Oqu(o.libelle),e.xp6(5),e.Oqu(o.description),e.xp6(6),e.Oqu(o.declancheur),e.xp6(5),e.Oqu(o.etatEquipement),e.xp6(5),e.Oqu(e.xi3(33,6,o.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function ge(t,s){if(1&t&&(e.ynx(0),e.YNc(1,_e,35,9,"div",9),e.BQk()),2&t){const o=s.ngIf;e.xp6(1),e.Q6J("ngForOf",o)}}let qe=(()=>{class t{constructor(o,c,p){this.modalData=o,this.modalRef=c,this.store=p,this.id="",this.historiqueEquipement$=this.store.select(me),this.id=this.modalData.data.id,this.equipement=this.modalData.data.equipement}ngOnInit(){console.log(this.id),this.store.dispatch(r.loadItemHistory({id:this.id}))}close(){this.modalRef.close(void 0)}static#e=this.\u0275fac=function(c){return new(c||t)(e.Y36(D.S),e.Y36(D.R),e.Y36(i.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-modal-historique"]],decls:11,vars:3,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Chronologie"],[4,"ngIf"],[1,"form-actions","mt-2"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"],["class","col-12 mb-4",4,"ngFor","ngForOf"],[1,"col-12","mb-4"],[1,"col-12","mb-2","flex","row"],[1,"col-3"],[1,"text-end"],[1,"poppins-bold"],[1,"col-5"],[1,"poppins-bold","text-success"],[1,"col-4"],[1,"text-end","poppins-bold"]],template:function(c,p){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Historique de l'Equipement"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-panel-custom",5),e.YNc(7,ge,2,1,"ng-container",6),e.ALo(8,"async"),e.qZA()(),e.TgZ(9,"div",7)(10,"app-custom-button",8),e.NdJ("buttonClicked",function(){return p.close()}),e.qZA()()()),2&c&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,1,p.historiqueEquipement$)))},dependencies:[a.sg,a.O5,z.x,fe.l,a.Ov,a.uU],styles:["*[_ngcontent-%COMP%]{font-family:aileronlight}.poppins-bold[_ngcontent-%COMP%]{font-family:Poppins;font-weight:700}.general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%;font-size:13px!important}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6;font-size:13px!important}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.form-main[_ngcontent-%COMP%]{overflow-y:auto;height:400px}.alert-header[_ngcontent-%COMP%]{background-color:#2c3963;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}"]})}return t})();var A=n(8281),K=n(797),Ce=n(7251),Ee=n(6327),ve=n(8564),ye=n(8223),Pe=n(602),xe=n(1469),Se=n(6326),Ze=n(8346),Ie=n(1171),be=n(547),Te=n(362);function He(t,s){1&t&&(e.TgZ(0,"th",30),e._uU(1,"R\xe9f\xe9rence"),e.qZA())}function Me(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.refSys)}}function Ae(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Libell\xe9"),e.qZA())}function Oe(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.libelle)}}function $e(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Num\xe9ro de S\xe9rie"),e.qZA())}function Le(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.numeroSerie)}}function Ue(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Mod\xe8le"),e.qZA())}function Fe(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.modelEquip.libelle)}}function Be(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Fabricant"),e.qZA())}function De(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.modelEquip.makerEquip.libelle)}}function ze(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Cat\xe9gorie"),e.qZA())}function Ke(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.modelEquip.categoryEquip.libelle)}}function Ne(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Groupe Equip."),e.qZA())}function Ge(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.modelEquip.categoryEquip.groupEquip.libelle)}}function Ye(t,s){1&t&&(e.TgZ(0,"th",32),e._uU(1,"Statut"),e.qZA())}function Qe(t,s){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.etatEquipement)}}function Re(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"table",18),e.NdJ("itemSelected",function(p){e.CHM(o);const v=e.oxw(2);return e.KtG(v.itemSelected(p))}),e.ynx(1,19),e.YNc(2,He,2,0,"th",20),e.YNc(3,Me,2,1,"td",21),e.BQk(),e.ynx(4,22),e.YNc(5,Ae,2,0,"th",23),e.YNc(6,Oe,2,1,"td",21),e.BQk(),e.ynx(7,24),e.YNc(8,$e,2,0,"th",23),e.YNc(9,Le,2,1,"td",21),e.BQk(),e.ynx(10,25),e.YNc(11,Ue,2,0,"th",23),e.YNc(12,Fe,2,1,"td",21),e.BQk(),e.ynx(13,26),e.YNc(14,Be,2,0,"th",23),e.YNc(15,De,2,1,"td",21),e.BQk(),e.ynx(16,27),e.YNc(17,ze,2,0,"th",23),e.YNc(18,Ke,2,1,"td",21),e.BQk(),e.ynx(19,28),e.YNc(20,Ne,2,0,"th",23),e.YNc(21,Ge,2,1,"td",21),e.BQk(),e.ynx(22,29),e.YNc(23,Ye,2,0,"th",23),e.YNc(24,Qe,2,1,"td",21),e.BQk(),e.qZA()}if(2&t){const o=s.ngIf,c=e.oxw(2);e.Q6J("items",o)("headers",c.headerTable)("selectable",!0)}}function We(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.refreshButtonClicked())})("pageSelected",function(p){e.CHM(o);const v=e.oxw();return e.KtG(v.pageSelected(p))})("pageSizeChange",function(p){e.CHM(o);const v=e.oxw();return e.KtG(v.pageSizeChange(p))})("closeButtonClicked",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e.TgZ(7,"div",10)(8,"div",11)(9,"div",6),e._UZ(10,"app-form-label",12),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-custom-textfield",13),e.qZA()()(),e.TgZ(13,"div",14)(14,"app-custom-button",15),e.NdJ("buttonClicked",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.viewHistory())}),e.qZA()(),e.TgZ(15,"div",16),e.YNc(16,Re,25,3,"table",17),e.ALo(17,"async"),e.qZA()()}if(2&t){const o=s.ngIf,c=e.oxw();e.Q6J("itemSelected",c.isItemSelected())("pageSize",o.pageSize)("currentPage",o.page)("totalElements",o.totalElement),e.xp6(1),e.Q6J("formGroup",c.searchForm),e.xp6(6),e.Q6J("formGroup",c.searchForm),e.xp6(7),e.Q6J("disabled",!c.isItemSelected()),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,8,c.items$))}}let Je=(()=>{class t{constructor(o,c,p,v){this.router=o,this.modalService=c,this.store=p,this.historiqueEquipementFormService=v,this.headerTable=["R\xe9f\xe9rence","Lib\xe9ll\xe9","Num\xe9ro S\xe9rie","Statut","Mod\xe8le","Fabricant","Cat\xe9gorie","Groupe Equip.","Date Cr\xe9ation","Date Derni\xe8re Modif"],this.items$=this.store.select(ue),this.page$=this.store.select(F),this.pageSize$=this.store.select(B),this.totalElement$=this.store.select(he),this.data$=(0,C.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,f.U)(([$,L,u])=>({page:$,pageSize:L,totalElement:u}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.historiqueEquipementFormService.createSearchForm(),this.store.dispatch(r.loadItems())}viewHistory(){this.selectedItem&&this.modalService.openComponent(qe,{data:{id:this.selectedItem.id,equipement:this.selectedItem}})}itemSelected(o){this.selectedItem=o}pageSelected(o){this.store.dispatch(r.changePage({page:o}))}pageSizeChange(o){this.store.dispatch(r.changePageSize({pageSize:o}))}closeButtonClicked(){this.router.navigate(["parc-informatique"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(r.resetSearch())}searchButtonClicked(){this.store.dispatch(r.search({searchModel:this.searchForm.value}))}static#e=this.\u0275fac=function(c){return new(c||t)(e.Y36(A.F0),e.Y36(K.Z),e.Y36(i.yh),e.Y36(q))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-historique-equipement-list"]],features:[e._Bn([q,{provide:e.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Suivie","pathLevelTwo","Historique Equipement","pathLevelThree","Liste"],["title","Liste des Equipements",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Equipements",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","libelle"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Description"],["placeholder","","otherclass","item-input","formControlName","description"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Voir l'Historique",1,"me-1",3,"disabled","buttonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","","class","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Lib\xe9ll\xe9"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["appCellDef","Num\xe9ro S\xe9rie"],["appCellDef","Mod\xe8le"],["appCellDef","Fabricant"],["appCellDef","Cat\xe9gorie"],["appCellDef","Groupe Equip."],["appCellDef","Statut"],["app-header-attribute-def-template","",1,""],["app-cell-def-template","",1,"text-start"],["app-header-attribute-def-template",""]],template:function(c,p){1&c&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,We,18,10,"app-crud-list",2),e.ALo(3,"async")),2&c&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,p.data$)))},dependencies:[a.O5,h.JJ,h.JL,h.sg,h.u,Ce._,z.x,Ee.N,ve.D,ye.h,Pe.u,xe.O,Se.q,Ze.W,Ie.h,be.Z,Te.V,a.Ov],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return t})();var ke=n(9207),m=n(6465),_=n(6063),we=n(9862),je=n(3186),Ve=n(2460),x=n(6328),Xe=n(9026),S=n(6306),O=n(9397),N=n(1631),g=n(2096),et=n(4664),tt=n(1946),it=n(9989);let G=(()=>{class t extends it.v{getResourceBasePath(){return`${tt.y}/equipementHistorique`}getHistoriqueEquipement(o){return this.http.get(`${this.url}/${this.getResourceBasePath()}/historique/${o}`)}static#e=this.\u0275fac=function(){let o;return function(p){return(o||(o=e.n5z(t)))(p||t)}}();static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var ot=n(6366);let st=(()=>{class t{constructor(o,c,p,v,$,L){this.historiqueEquipementService=o,this.authService=c,this.actions$=p,this.router=v,this.modalService=$,this.store=L,this.loadItems$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.loadItems),(0,Ve.M)(this.store.select(F),this.store.select(B),this.store.select(de)),(0,x.b)(([u,d,M,U])=>(console.log(d),this.store.dispatch((0,_.Q)()),(0,Xe.$)(this.historiqueEquipementService.getAllWithPagination(d,M,U),this.historiqueEquipementService.count(U)).pipe((0,f.U)(([T,at])=>(this.store.dispatch((0,_.Z)()),r.loadItemsSuccess({items:T,totalElement:at}))),(0,S.K)(T=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:T})))))))),{dispatch:!0}),this.createItem$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.createItem),(0,x.b)(u=>(this.store.dispatch((0,_.Q)()),this.historiqueEquipementService.add(u.item).pipe((0,O.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Historique Equipement ajout\xe9 avec succ\xe8s"}),this.router.navigateByUrl("parc-informatique/historique-equipement")}),(0,f.U)(d=>r.createItemSuccess({item:d})),(0,S.K)(d=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:d})))))))),{dispatch:!0}),this.loadItem$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.loadItem),(0,N.z)(u=>this.historiqueEquipementService.findById(u.id).pipe((0,f.U)(d=>r.loadItemSuccess({item:d})),(0,S.K)(d=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:d}))))))),{dispatch:!0}),this.loadItemHistory$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.loadItemHistory),(0,N.z)(u=>(console.log(u),this.historiqueEquipementService.getHistoriqueEquipement(u.id).pipe((0,f.U)(d=>r.loadItemHistorySuccess({itemHistory:d})),(0,S.K)(d=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:d})))))))),{dispatch:!0}),this.deleteItem$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.deleteItem),(0,x.b)(u=>this.historiqueEquipementService.delete(u.item.id,u.item)),(0,O.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Historique Equipement supprim\xe9 avec succ\xe8s"})}),(0,f.U)(()=>r.loadItems()),(0,S.K)(u=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:u}))))),{dispatch:!0}),this.updateItem$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.updateItem),(0,x.b)(u=>(this.store.dispatch((0,_.Q)()),this.historiqueEquipementService.update(u.id,u.item).pipe((0,O.b)(()=>{this.store.dispatch((0,_.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Historique Equipement modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("parc-informatique/historique-equipement")}),(0,f.U)(d=>r.createItemSuccess({item:d})),(0,S.K)(d=>(this.store.dispatch((0,_.Z)()),(0,g.of)(r.setError({errors:d})))))))),{dispatch:!0}),this.loadFormModel$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.loadFormModel),(0,x.b)(()=>this.historiqueEquipementService.getFormModel()),(0,f.U)(u=>r.loadFormModelSuccess({formModel:u})),(0,S.K)(u=>(0,g.of)(r.setError({errors:u}))))),this.resetSearch$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.resetSearch),(0,x.b)(()=>(0,g.of)(r.changePage({page:1}))))),this.search$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.search),(0,x.b)(()=>(0,g.of)(r.changePage({page:1}))))),this.changePage$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.changePage),(0,f.U)(u=>r.loadItems()))),this.changePageSize$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.changePageSize),(0,x.b)(()=>(0,g.of)(r.changePage({page:1}))))),this.handleError$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(r.setError),(0,et.w)(u=>{if(this.store.dispatch((0,_.Q)()),u.errors instanceof we.UA){if(422===u.errors.status){let d="",M=0;for(const[U,T]of Object.entries(u.errors.error))d+=0===M?T:"\n"+T,M++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:d})}if(403===u.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===u.errors.status){let d="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,_.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:d}),(0,g.of)(je.jM())}}return this.store.dispatch((0,_.Z)()),(0,g.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(c){return new(c||t)(e.LFG(G),e.LFG(ot.e),e.LFG(m.eX),e.LFG(A.F0),e.LFG(K.Z),e.LFG(i.yh))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const nt=[{path:"",component:Je,pathMatch:"prefix"}];let rt=(()=>{class t{static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275mod=e.oAB({type:t});static#i=this.\u0275inj=e.cJS({providers:[G],imports:[a.ez,ke.m,i.Aw.forFeature("historique-equipements",pe),m.sQ.forFeature(st),A.Bz.forChild(nt)]})}return t})()},8346:(H,E,n)=>{n.d(E,{W:()=>q});var a=n(9468),e=n(95),h=n(7394);let q=(()=>{class C{constructor(){this.placeholder="",this.type="text",this.readonly=!1,this.otherclass="",this.subscription=new h.w0,this.disabled=!1,this.onTouched=()=>{},this.onChange=()=>{},this.control=new e.NI}writeValue(i){this.control.setValue(i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,i?this.control.disable():this.control.enable()}ngOnInit(){this.subscription=this.control.valueChanges.subscribe(i=>{this.onChange(i)})}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||C)};static#t=this.\u0275cmp=a.Xpm({type:C,selectors:[["app-custom-textfield"]],inputs:{placeholder:"placeholder",type:"type",readonly:"readonly",otherclass:"otherclass"},features:[a._Bn([{provide:e.JU,useExisting:(0,a.Gpc)(()=>C),multi:!0}])],decls:1,vars:7,consts:[[3,"type","placeholder","formControl","readonly"]],template:function(l,y){1&l&&a._UZ(0,"input",0),2&l&&(a.Gre("custom-text-field m-0 form-control-sm ",y.otherclass,""),a.s9C("placeholder",y.placeholder),a.Q6J("type",y.type)("formControl",y.control)("readonly",y.readonly))},dependencies:[e.Fj,e.JJ,e.oH],styles:[".custom-text-field[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;appearance:none;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;border:1px solid #878787!important;margin-bottom:2px}.form-control-sm[_ngcontent-%COMP%]{font-size:12px!important;border-radius:0;min-width:100%}.custom-text-field[_ngcontent-%COMP%]:focus{background-color:#f0f4f5;border:0px!important;outline:0}.custom-text-field[_ngcontent-%COMP%]:read-only:focus{outline:0!important;border:1px solid #878787!important}"]})}return C})()},1171:(H,E,n)=>{n.d(E,{h:()=>e});var a=n(9468);let e=(()=>{class h{constructor(){this.title="",this.class=""}static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275cmp=a.Xpm({type:h,selectors:[["app-form-label"]],inputs:{title:"title",class:"class"},decls:2,vars:4,template:function(f,i){1&f&&(a.TgZ(0,"label"),a._uU(1),a.qZA()),2&f&&(a.Tol(i.class),a.xp6(1),a.Oqu(i.title))},styles:["label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#464445;margin-right:5px;min-width:100%;max-width:100%}"]})}return h})()},9887:(H,E,n)=>{n.d(E,{l:()=>i});var a=n(9468),e=n(6814);function h(l,y){if(1&l&&(a.TgZ(0,"h5",3),a._UZ(1,"span"),a._uU(2),a.Hsn(3,1),a.qZA()),2&l){const Z=a.oxw();a.xp6(1),a.Tol(Z.icon),a.xp6(1),a.hij(" ",Z.title," ")}}function q(l,y){1&l&&a._UZ(0,"hr",4)}const C=["*",[["",8,"button-head"]]],f=["*",".button-head"];let i=(()=>{class l{constructor(){this.title="",this.icon="",this.background="white",this.otherclass=""}static#e=this.\u0275fac=function(I){return new(I||l)};static#t=this.\u0275cmp=a.Xpm({type:l,selectors:[["app-panel-custom"]],inputs:{title:"title",icon:"icon",background:"background",otherclass:"otherclass"},ngContentSelectors:f,decls:5,vars:6,consts:[["class","title-panel-custom mb-1",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"panel-custom-body"],[1,"title-panel-custom","mb-1"],[1,"mt-0"]],template:function(I,b){1&I&&(a.F$t(C),a.TgZ(0,"div"),a.YNc(1,h,4,4,"h5",0),a.YNc(2,q,1,0,"hr",1),a.TgZ(3,"div",2),a.Hsn(4),a.qZA()()),2&I&&(a.MT6("panel-custom ",b.background," ",b.otherclass,""),a.xp6(1),a.Q6J("ngIf",b.title),a.xp6(1),a.Q6J("ngIf",b.title))},dependencies:[e.O5],styles:[".panel-custom[_ngcontent-%COMP%]{border:1px solid #c7c5c6;padding:15px;margin-bottom:3px}.title-panel-custom[_ngcontent-%COMP%]{display:flex;align-items:center;color:#045a5e;font-size:15px;font-family:aileronbold}.title-panel-custom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#46ad7e;margin-right:5px}"]})}return l})()},547:(H,E,n)=>{n.d(E,{Z:()=>h});var a=n(9468),e=n(95);let h=(()=>{class q{constructor(f){this.ngControl=f}static#e=this.\u0275fac=function(i){return new(i||q)(a.Y36(e.a5,10))};static#t=this.\u0275dir=a.lG2({type:q,selectors:[["","formControl",""],["","formControlName",""]]})}return q})()}}]);