"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[8777],{8777:(D,T,a)=>{a.r(T),a.d(T,{AffectationEmployeUniteModule:()=>we});var p=a(6814),A=a(8281),t=a(9468),s=a(95);let m=(()=>{class o{constructor(){}createForm(e,i){return new s.cw({libelle:new s.NI(e.libelle,{nonNullable:!0,validators:[s.kI.required]}),description:new s.NI(e.description),nomEmploye:new s.NI(e.nomEmploye),matricule:new s.NI(e.matricule),employe:new s.NI(e.employe,{nonNullable:!0,validators:[s.kI.required]}),sigleUniteFonctionnel:new s.NI(e.sigleUniteFonctionnel),libelleUniteFonctionnel:new s.NI(e.libelleUniteFonctionnel),uniteFonctionnel:new s.NI(e.uniteFonctionnel,{nonNullable:!0,validators:[s.kI.required]}),motifFinAffectation:new s.NI(e.motifFinAffectation,{nonNullable:"DESAFFECT"===i,validators:[s.kI.required]}),utilisateurModification:new s.NI(e.utilisateurModification),utilisateurCreation:new s.NI(e.utilisateurCreation),dateCreation:new s.NI(e.dateCreation),dateDerniereModification:new s.NI(e.dateDerniereModification),dateDebutAffectation:new s.NI(e.dateDebutAffectation),dateFinAffectation:new s.NI(e.dateFinAffectation)})}createSearchForm(){return new s.cw({libelle:new s.NI("",{nonNullable:!0,validators:[s.kI.required]}),description:new s.NI("",{nonNullable:!0,validators:[s.kI.required]})})}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var C=a(2572),g=a(7398),r=a(676);const f="Affectation Employe Unite",Z=(0,r.PH)(`[${f} API] Load All`),x=(0,r.PH)(`[${f} API] Load All Success`,(0,r.Ky)()),S=(0,r.PH)(`[${f} API] Create`,(0,r.Ky)()),N=(0,r.PH)(`[${f} API] Create Success`,(0,r.Ky)()),W=(0,r.PH)(`[${f} API] Create Error`,(0,r.Ky)()),j=(0,r.PH)(`[${f} API] Reset Error`),X=(0,r.PH)(`[${f} API] Reset Error Field`,(0,r.Ky)()),V=(0,r.PH)(`[${f} API] Load`,(0,r.Ky)()),tt=(0,r.PH)(`[${f} API] Load Success`,(0,r.Ky)()),et=(0,r.PH)(`[${f} API] Reset`),ot=(0,r.PH)(`[${f} API] Delete`,(0,r.Ky)()),it=(0,r.PH)(`[${f} API] Delete Success`,(0,r.Ky)()),c={loadItems:Z,loadItemsSuccess:x,resetItem:et,createItem:S,createItemSuccess:N,loadItem:V,loadItemSuccess:tt,updateItem:(0,r.PH)(`[${f} API] Update`,(0,r.Ky)()),updateItemSuccess:(0,r.PH)(`[${f} API] Update Success`,(0,r.Ky)()),deleteItem:ot,deleteItemSuccess:it,setError:W,resetError:j,resetErrorField:X,decommissionateItem:(0,r.PH)(`[${f} API] Decommissionate`,(0,r.Ky)()),decommissionateItemSuccess:(0,r.PH)(`[${f} API] Decommissionate Success`,(0,r.Ky)()),loadFormModel:(0,r.PH)(`[${f} API] Load Form Model`),resetFormModel:(0,r.PH)(`[${f} API] Reset Form Model`),loadFormModelSuccess:(0,r.PH)(`[${f} API] Load Form Model Success`,(0,r.Ky)()),resetSearch:(0,r.PH)(`[${f} API] Reset Search`),search:(0,r.PH)(`[${f} API] Search`,(0,r.Ky)()),changePage:(0,r.PH)(`[${f} API] Change Page`,(0,r.Ky)()),changePageSize:(0,r.PH)(`[${f} API] Change Page Size`,(0,r.Ky)())},ht=(0,r.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,r.on)(c.loadItemsSuccess,(o,n)=>(console.log(n.items),{...o,items:n.items,totalElement:n.totalElement})),(0,r.on)(c.resetItem,(o,n)=>({...o,currentItem:null})),(0,r.on)(c.createItemSuccess,(o,n)=>({...o})),(0,r.on)(c.deleteItemSuccess,(o,n)=>({...o})),(0,r.on)(c.loadItemSuccess,(o,n)=>({...o,currentItem:n.item})),(0,r.on)(c.updateItemSuccess,(o,n)=>({...o})),(0,r.on)(c.decommissionateItemSuccess,(o,n)=>({...o})),(0,r.on)(c.loadFormModel,(o,n)=>({...o,formModel:null})),(0,r.on)(c.loadFormModelSuccess,(o,n)=>({...o,formModel:n.formModel})),(0,r.on)(c.resetSearch,(o,n)=>({...o,searchModel:{}})),(0,r.on)(c.search,(o,n)=>({...o,searchModel:n.searchModel})),(0,r.on)(c.changePage,(o,n)=>({...o,page:n.page})),(0,r.on)(c.changePageSize,(o,n)=>({...o,pageSize:n.pageSize})),(0,r.on)(c.setError,(o,n)=>({...o,errors:n.errors})),(0,r.on)(c.resetError,(o,n)=>({...o,errors:null})),(0,r.on)(c.resetErrorField,(o,n)=>{let e={};return null!==o.errors&&Object.entries(o.errors).forEach(([i,l])=>{i!==n.fieldName&&(e[`${i}`]=l)}),{...o,errors:e}})),F=(0,r.ZF)("affectation-employe-unites"),yt=(0,r.P1)(F,o=>o.items),Y=(0,r.P1)(F,o=>o.currentItem),M=(0,r.P1)(F,o=>o.formModel),gt=(0,r.P1)(F,o=>o.searchModel),K=(0,r.P1)(F,o=>o.page),H=(0,r.P1)(F,o=>o.pageSize),Ct=(0,r.P1)(F,o=>o.totalElement),At=(0,r.P1)(F,o=>o.errors);var Et=a(4849),L=a(797),Q=a(3849),bt=a(7251),Ut=a(166),Tt=a(6327),xt=a(8564),Ft=a(8223),Zt=a(602),It=a(1469),St=a(6326),k=a(8346),G=a(1171),z=a(547),v=a(362);function Mt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"R\xe9f\xe9rence"),t.qZA())}function vt(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.refSys)}}function Pt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Libell\xe9"),t.qZA())}function Dt(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.libelle)}}function Nt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Description"),t.qZA())}function Lt(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.description)}}function Ot(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Employ\xe9"),t.qZA())}function Bt(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.employe.matricule)}}function $t(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Unit\xe9 Fonct."),t.qZA())}function wt(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.uniteFonctionnel.libelle)}}function Jt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Date D\xe9but d'Affectation"),t.qZA())}function Yt(o,n){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.dateDebutAffectation,"dd/MM/y \xe0 HH:mm:ss"))}}function Kt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Motif Fin Affectation"),t.qZA())}function Ht(o,n){if(1&o&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.motifFinAffectation)}}function Qt(o,n){1&o&&(t.TgZ(0,"th",34),t._uU(1,"Date Fin d'Affectation"),t.qZA())}function kt(o,n){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.dateFinAffectation,"dd/MM/y \xe0 HH:mm:ss"))}}function Gt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"table",22),t.NdJ("itemSelected",function(l){t.CHM(e);const d=t.oxw(2);return t.KtG(d.itemSelected(l))}),t.ynx(1,23),t.YNc(2,Mt,2,0,"th",24),t.YNc(3,vt,2,1,"td",25),t.BQk(),t.ynx(4,26),t.YNc(5,Pt,2,0,"th",24),t.YNc(6,Dt,2,1,"td",25),t.BQk(),t.ynx(7,27),t.YNc(8,Nt,2,0,"th",24),t.YNc(9,Lt,2,1,"td",25),t.BQk(),t.ynx(10,28),t.YNc(11,Ot,2,0,"th",24),t.YNc(12,Bt,2,1,"td",25),t.BQk(),t.ynx(13,29),t.YNc(14,$t,2,0,"th",24),t.YNc(15,wt,2,1,"td",25),t.BQk(),t.ynx(16,30),t.YNc(17,Jt,2,0,"th",24),t.YNc(18,Yt,3,4,"td",31),t.BQk(),t.ynx(19,32),t.YNc(20,Kt,2,0,"th",24),t.YNc(21,Ht,2,1,"td",25),t.BQk(),t.ynx(22,33),t.YNc(23,Qt,2,0,"th",24),t.YNc(24,kt,3,4,"td",31),t.BQk(),t.qZA()}if(2&o){const e=n.ngIf,i=t.oxw(2);t.Q6J("items",e)("headers",i.headerTable)("selectable",!0)}}function zt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-crud-list",3),t.NdJ("searchButtonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.searchButtonClicked())})("refreshButtonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.refreshButtonClicked())})("pageSelected",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.pageSelected(l))})("pageSizeChange",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.pageSizeChange(l))})("closeButtonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.closeButtonClicked())}),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6),t._UZ(4,"app-form-label",7),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"app-custom-textfield",9),t.qZA()()(),t.TgZ(7,"div",10)(8,"div",11)(9,"div",6),t._UZ(10,"app-form-label",12),t.qZA(),t.TgZ(11,"div",8),t._UZ(12,"app-custom-textfield",13),t.qZA()()(),t.TgZ(13,"div",14)(14,"app-custom-button",15),t.NdJ("buttonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.addButtonClicked())}),t.qZA(),t.TgZ(15,"app-custom-button",16),t.NdJ("buttonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.desaffectButtonClicked())}),t.qZA()(),t.TgZ(16,"div",17),t._UZ(17,"app-custom-button",18),t.TgZ(18,"app-print-button",19),t.NdJ("printButtonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.printButtonClicked())}),t.qZA()(),t.TgZ(19,"div",20),t.YNc(20,Gt,25,3,"table",21),t.ALo(21,"async"),t.qZA()()}if(2&o){const e=n.ngIf,i=t.oxw();t.Q6J("itemSelected",i.isItemSelected())("pageSize",e.pageSize)("currentPage",e.page)("totalElements",e.totalElement),t.xp6(1),t.Q6J("formGroup",i.searchForm),t.xp6(6),t.Q6J("formGroup",i.searchForm),t.xp6(8),t.Q6J("disabled",!i.isItemSelected()),t.xp6(5),t.Q6J("ngIf",t.lcZ(21,8,i.items$))}}let Rt=(()=>{class o{constructor(e,i,l,d){this.router=e,this.modalService=i,this.store=l,this.aeuFormService=d,this.headerTable=["R\xe9f\xe9rence","Lib\xe9ll\xe9","Description","Employ\xe9","Unit\xe9 Fonct.","Date D\xe9but d'Affectation","Motif Fin Affectation","Date Fin d'Affectation"],this.items$=this.store.select(yt),this.page$=this.store.select(K),this.pageSize$=this.store.select(H),this.totalElement$=this.store.select(Ct),this.data$=(0,C.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,g.U)(([U,w,_])=>({page:U,pageSize:w,totalElement:_}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.aeuFormService.createSearchForm(),this.store.dispatch(c.loadItems())}addButtonClicked(){this.router.navigate(["administration","affectation-employe-unite","add"])}editButtonClicked(){const e=this.selectedItem?.id;e&&(this.store.dispatch(c.resetItem()),this.router.navigate(["administration","affectation-employe-unite","edit",e]))}desaffectButtonClicked(){const e=this.selectedItem?.id;e&&(this.store.dispatch(c.resetItem()),this.router.navigate(["administration","affectation-employe-unite","desaffect",e]))}deleteButtonClicked(){const e=this.selectedItem;e&&this.modalService.openComponent(Et.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(i=>{i&&"yes"===i&&this.store.dispatch(c.deleteItem({item:e}))})}itemSelected(e){this.selectedItem=e}pageSelected(e){this.store.dispatch(c.changePage({page:e}))}pageSizeChange(e){this.store.dispatch(c.changePageSize({pageSize:e}))}closeButtonClicked(){this.router.navigate(["administration"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(c.resetSearch())}searchButtonClicked(){this.store.dispatch(c.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(A.F0),t.Y36(L.Z),t.Y36(r.yh),t.Y36(m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-affectation-employe-unite-list"]],features:[t._Bn([m,{provide:t.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Organisation Personnelle","pathLevelTwo","Affectation Employ\xe9 Unit\xe9 Fonct.","pathLevelThree","Liste"],["title","Liste des Affectations des Employ\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Affectations des Employ\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","libelle"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Description"],["placeholder","","otherclass","item-input","formControlName","description"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Ajouter",1,"me-1",3,"buttonClicked"],["icon","icon-check btn-icon-delete","title","D\xe9saffecter",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Lib\xe9ll\xe9"],["appCellDef","Description"],["appCellDef","Employ\xe9"],["appCellDef","Unit\xe9 Fonct."],["appCellDef","Date D\xe9but d'Affectation"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Motif Fin Affectation"],["appCellDef","Date Fin d'Affectation"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template",""]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,zt,22,10,"app-crud-list",2),t.ALo(3,"async")),2&i&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,l.data$)))},dependencies:[p.O5,Q.L,s.JJ,s.JL,s.sg,s.u,bt._,Ut.x,Tt.N,xt.D,Ft.h,Zt.u,It.O,St.q,k.W,G.h,z.Z,v.V,p.Ov,p.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return o})();var O=a(1239),B=a(7394),qt=a(8819),Wt=a(9543),jt=a(7426),Xt=a(9887),Vt=a(5973),te=a(4944),ee=a(2093),oe=a(6136),ie=a(8513),ne=a(586),re=a(1327),ae=a(5188);function ce(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Sigle"),t.qZA())}function le(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.sigle," ")}}function se(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Libell\xe9"),t.qZA())}function pe(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.libelle," ")}}function me(o,n){1&o&&(t.TgZ(0,"table",46),t.ynx(1,47),t.YNc(2,ce,2,0,"th",48),t.YNc(3,le,2,1,"td",49),t.BQk(),t.ynx(4,50),t.YNc(5,se,2,0,"th",48),t.YNc(6,pe,2,1,"td",49),t.BQk(),t.qZA())}function fe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-field-error-wrapper",19),t.NdJ("resetField",function(l){t.CHM(e);const d=t.oxw(2);return t.KtG(d.resetBackendError(l))}),t.TgZ(1,"app-item-search",44),t.YNc(2,me,7,0,"table",45),t.qZA()()}if(2&o){const e=n.ngIf,i=t.oxw(2);t.Q6J("errors",i.errors),t.xp6(1),t.Q6J("headers",i.uniteSelectItemsHeader)("items",e.uniteFonctionnels)("criterias",i.uniteItemCritterias)("itemDescription",i.uniteItemDescription)}}function de(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Matricule"),t.qZA())}function ue(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.matricule," ")}}function _e(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Num\xe9ro S\xe9curit\xe9 Sociale "),t.qZA())}function he(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.numeroSecuriteSocial," ")}}function ye(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Noms & Pr\xe9noms"),t.qZA())}function ge(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.AsE(" ",e.user.firstName," ",e.user.lastName," ")}}function Ce(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1,"Adresse Mail"),t.qZA())}function Ae(o,n){if(1&o&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.adresseMail," ")}}function Ee(o,n){1&o&&(t.TgZ(0,"table",46),t.ynx(1,54),t.YNc(2,de,2,0,"th",48),t.YNc(3,ue,2,1,"td",49),t.BQk(),t.ynx(4,55),t.YNc(5,_e,2,0,"th",48),t.YNc(6,he,2,1,"td",49),t.BQk(),t.ynx(7,56),t.YNc(8,ye,2,0,"th",48),t.YNc(9,ge,2,2,"td",49),t.BQk(),t.ynx(10,57),t.YNc(11,Ce,2,0,"th",48),t.YNc(12,Ae,2,1,"td",49),t.BQk(),t.qZA())}function be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-field-error-wrapper",19),t.NdJ("resetField",function(l){t.CHM(e);const d=t.oxw(2);return t.KtG(d.resetBackendError(l))}),t.TgZ(1,"app-item-search",53),t.YNc(2,Ee,13,0,"table",45),t.qZA()()}if(2&o){const e=n.ngIf,i=t.oxw(2);t.Q6J("errors",i.errors),t.xp6(1),t.Q6J("headers",i.employeSelectItemsHeader)("items",e.employes)("criterias",i.employeItemCritterias)("itemDescription",i.employeItemDescription)}}function Ue(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-panel-custom",58)(1,"div",5)(2,"div",59),t._UZ(3,"app-form-label",60),t.TgZ(4,"div",8)(5,"app-field-error-wrapper",19),t.NdJ("resetField",function(l){t.CHM(e);const d=t.oxw(2);return t.KtG(d.resetBackendError(l))}),t._UZ(6,"textarea",61),t.qZA()()()()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("errors",e.errors)}}function Te(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-primary-button",62),t.NdJ("buttonClicked",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.submitForm())}),t.qZA()}}function xe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),t._UZ(5,"app-form-label",7),t.TgZ(6,"div",8),t._UZ(7,"app-custom-textfield",9),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"app-form-label",10),t.TgZ(10,"div",11),t._UZ(11,"app-custom-textfield",12),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6),t._UZ(14,"app-form-label",13),t.TgZ(15,"div",8),t._UZ(16,"app-custom-textfield",14),t.qZA()(),t.TgZ(17,"div",6),t._UZ(18,"app-form-label",15),t.TgZ(19,"div",11),t._UZ(20,"app-custom-textfield",16),t.qZA()()()(),t.TgZ(21,"app-panel-custom",17)(22,"div",5)(23,"div",6),t._UZ(24,"app-form-label",18),t.TgZ(25,"div",8)(26,"app-field-error-wrapper",19),t.NdJ("resetField",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.resetBackendError(l))}),t._UZ(27,"app-custom-textfield",20),t.qZA()()(),t.TgZ(28,"div",21),t._UZ(29,"app-form-label",22),t.TgZ(30,"div",8),t._UZ(31,"app-custom-textfield",23),t.qZA(),t.YNc(32,fe,3,5,"app-field-error-wrapper",24),t.ALo(33,"async"),t.qZA()(),t.TgZ(34,"div",5)(35,"div",6),t._UZ(36,"app-form-label",25),t.TgZ(37,"div",8),t._UZ(38,"app-custom-textfield",26),t.qZA()(),t.TgZ(39,"div",27),t._UZ(40,"app-form-label",28),t.TgZ(41,"div",8),t._UZ(42,"app-custom-textfield",29),t.qZA(),t.YNc(43,be,3,5,"app-field-error-wrapper",24),t.ALo(44,"async"),t.qZA()()(),t.TgZ(45,"app-panel-custom",30)(46,"div",31)(47,"div",32)(48,"div",33),t._UZ(49,"app-form-label",34),t.TgZ(50,"div",8)(51,"app-field-error-wrapper",19),t.NdJ("resetField",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.resetBackendError(l))}),t._UZ(52,"app-custom-textfield",35),t.qZA()()()(),t.TgZ(53,"div",36)(54,"div",37),t._UZ(55,"app-form-label",38),t.TgZ(56,"div",8),t._UZ(57,"textarea",39),t.qZA()()()()(),t.YNc(58,Ue,7,1,"app-panel-custom",40),t.TgZ(59,"div",41),t.YNc(60,Te,1,0,"app-primary-button",42),t.TgZ(61,"app-cancel-button",43),t.NdJ("buttonClicked",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.returnToList())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(7),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(6),t.Q6J("errors",e.errors),t.xp6(1),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(33,15,e.formModel$)),t.xp6(6),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(44,17,e.formModel$)),t.xp6(8),t.Q6J("errors",e.errors),t.xp6(7),t.Q6J("ngIf",!e.isAffect()),t.xp6(2),t.Q6J("ngIf",e.isDesaffected())}}let $=(()=>{class o{constructor(e,i,l,d){this.formService=e,this.modalService=i,this.router=l,this.store=d,this.formModel$=this.store.select(M),this.errors=null,this.formSubmitted=new t.vpe,this.employeSelectItemsHeader=["Matricule","Num\xe9ro S\xe9curit\xe9 Sociale","Noms & Pr\xe9noms","Adresse Mail"],this.employeItemDescription=U=>U.matricule,this.employeItemCritterias={matricule:"Matricule",numeroSecuriteSocial:"Num\xe9ro S\xe9curit\xe9 Sociale",adresseMail:"Adresse Mail"},this.uniteSelectItemsHeader=["Sigle","Libell\xe9"],this.uniteItemDescription=U=>U.sigle,this.uniteItemCritterias={sigle:"Sigle",libelle:"Libell\xe9"},this.subscription=new B.w0}ngOnInit(){this.store.select(At).subscribe(e=>{this.errors=e}),this.store.dispatch(c.resetError()),this.store.dispatch(c.loadFormModel()),this.form=this.formService.createForm(this.affectationEmployeUnite,this.affectationType),this.form.get("uniteFonctionnel")?.valueChanges.subscribe(e=>{e&&(this.form.get("sigleUniteFonctionnel")?.setValue(e.sigle),this.form.get("libelleUniteFonctionnel")?.setValue(e.libelle))}),this.form.get("employe")?.valueChanges.subscribe(e=>{e&&(this.form.get("matricule")?.setValue(e.matricule),this.form.get("nomEmploye")?.setValue(e.user.firstName+" "+e.user.lastName))})}isAffect(){return"AFFECT"===this.affectationType}isDesaffected(){return console.log(this.affectationEmployeUnite.motifFinAffectation),!this.affectationEmployeUnite.motifFinAffectation}ngOnDestroy(){this.subscription.unsubscribe()}submitForm(){this.formSubmitted.emit(this.form.value)}returnToList(){this.router.navigateByUrl("administration/affectation-employe-unite")}resetBackendError(e){this.store.dispatch(c.resetErrorField({fieldName:e}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m),t.Y36(L.Z),t.Y36(A.F0),t.Y36(r.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-affectation-employe-unite-form"]],inputs:{affectationEmployeUnite:"affectationEmployeUnite",affectationType:"affectationType",employeSelectItemsHeader:"employeSelectItemsHeader"},outputs:{formSubmitted:"formSubmitted"},features:[t._Bn([m])],decls:2,vars:1,consts:[[1,"pe-3","ps-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Historique"],[1,"general-info"],[1,"input-container","col-4"],["title","Date Cr\xe9ation",1,"w-form","text-end"],[1,"input-textfield-container","col"],["otherclass","custom-style-form","placeholder","","formControlName","dateCreation",3,"readonly"],["title","Cr\xe9\xe9 Par",1,"col-4","text-end"],[1,"input-textfield-container","col-7"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurCreation",3,"readonly"],["title","Date Derni\xe8re Modif",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","dateDerniereModification",3,"readonly"],["title","Modifi\xe9 Par",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurModification",3,"readonly"],["icon","fa fa-angle-right","title","Informations sur l'Unit\xe9 Fonctionnelle & l'Employ\xe9"],["title","Sigle Unit\xe9 Fonct.",1,"w-form","text-end"],[3,"errors","resetField"],["otherclass","custom-style-form","placeholder","","formControlName","sigleUniteFonctionnel",3,"readonly"],[1,"input-container","col-4","ms-0","me-0"],["title","Libell\xe9 Unit\xe9 Fonct.",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","libelleUniteFonctionnel",3,"readonly"],[3,"errors","resetField",4,"ngIf"],["title","Matricule",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","matricule",3,"readonly"],[1,"input-container","col-4","ms-0"],["title","Noms Employ\xe9",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","nomEmploye",3,"readonly"],["icon","fa fa-angle-right","title","Informations g\xe9n\xe9rales"],[1,"general-info","flex-column"],[1,"col-12","mb-1"],[1,"input-container","col-12"],["title","Libell\xe9",1,"w-form","text-end","me-1"],["otherclass","custom-style-form emphase","placeholder","","formControlName","libelle"],[1,"col-12"],[1,"input-container","col-12","d-flex","align-items-center"],["title","Description",1,"w-form","text-end","me-1"],["placeholder","","formControlName","description",1,"custom-style-textarea","emphase"],["icon","fa fa-angle-right","title","Fin de l'Affectation",4,"ngIf"],[1,"form-actions"],["class","me-1","title","Enregistrer",3,"buttonClicked",4,"ngIf"],["otherclass","custom-cancel-button","title","Annuler",3,"buttonClicked"],["otherclass","custom-style-item-selection-form col","formControlName","uniteFonctionnel",3,"headers","items","criterias","itemDescription"],["app-item-search-template-attribute","",4,"appItemSearchTemplate"],["app-item-search-template-attribute",""],["appItemSearchCellDef","Sigle"],["app-item-search-header-def-template","","class","custom-head",4,"appItemSearchHeaderDefTemplate"],["app-item-search-cell-def-template","","class","custom-head",4,"appItemSearchCellDefTemplate"],["appItemSearchCellDef","Libell\xe9"],["app-item-search-header-def-template","",1,"custom-head"],["app-item-search-cell-def-template","",1,"custom-head"],["otherclass","custom-style-item-selection-form col","formControlName","employe",3,"headers","items","criterias","itemDescription"],["appItemSearchCellDef","Matricule"],["appItemSearchCellDef","Num\xe9ro S\xe9curit\xe9 Sociale"],["appItemSearchCellDef","Noms & Pr\xe9noms"],["appItemSearchCellDef","Adresse Mail"],["icon","fa fa-angle-right","title","Fin de l'Affectation"],[1,"input-container","col-8","d-flex","align-items-center"],["title","Motif",1,"col-2","text-end"],["placeholder","","formControlName","motifFinAffectation",1,"custom-style-textarea","emphase"],["title","Enregistrer",1,"me-1",3,"buttonClicked"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t.YNc(1,xe,62,19,"form",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",l.form))},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,qt.F,k.W,G.h,Wt.C,z.Z,jt.p,Xt.l,Vt.v,te.K,ee.d,oe.D,ie.T,ne.o,re.g,ae.K,p.Ov],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:3px 0}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex}.input-container[_ngcontent-%COMP%] + .input-container[_ngcontent-%COMP%]{//margin-left: 32px}.input-textfield-container[_ngcontent-%COMP%]{//width: 250px;margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return o})(),Fe=(()=>{class o{constructor(e){this.store=e,this.formModel$=this.store.select(M),this.affectationType=O.X.AFFECT,this.affectationEmployeUnite={id:"",libelle:"",description:"",libelleUniteFonctionnel:"",sigleUniteFonctionnel:"",nomEmploye:"",matricule:"",motifFinAffectation:"",uniteFonctionnel:null,employe:null,dateDerniereModification:null,dateCreation:null,dateDebutAffectation:null,dateFinAffectation:null,utilisateurCreation:"",utilisateurModification:""}}ngOnInit(){this.store.dispatch(c.resetItem()),this.store.dispatch(c.resetFormModel())}addAffectation(e){this.store.dispatch(c.createItem({item:{libelle:e.libelle,description:e.description,uniteFonctionnel:e.uniteFonctionnel,employe:e.employe}}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-affectation-employe-unite-add"]],decls:3,vars:2,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Organisation Personnelle","pathLevelTwo","Affectation Employ\xe9 Unit\xe9 Fonct.","pathLevelThree","Ajouter"],[3,"affectationEmployeUnite","affectationType","formSubmitted"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.TgZ(2,"app-affectation-employe-unite-form",2),t.NdJ("formSubmitted",function(U){return l.addAffectation(U)}),t.qZA()),2&i&&(t.xp6(2),t.Q6J("affectationEmployeUnite",l.affectationEmployeUnite)("affectationType",l.affectationType))},dependencies:[v.V,$],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})();function Ze(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-affectation-employe-unite-form",3),t.NdJ("formSubmitted",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.editAffectation(l))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("affectationEmployeUnite",e.affectationEmployeUniteDto)("affectationType",e.affectationType)}}let Ie=(()=>{class o{constructor(e,i){this.store=e,this.route=i,this.formModel$=this.store.select(M),this.affectationEmployeUnite$=this.store.select(Y),this.affectationEmployeUniteDto=null,this.affectationType=O.X.AFFECT,this.subscription=new B.w0}ngOnInit(){this.store.dispatch(c.resetFormModel()),this.subscription=this.route.params.subscribe(e=>{this.id=e.id,this.id&&this.store.dispatch(c.loadItem({id:this.id}))}),this.affectationEmployeUnite$.subscribe(e=>{null!==e&&(this.affectationEmployeUniteDto={id:e.id,libelle:e.libelle,description:e.description,sigleUniteFonctionnel:null===e.uniteFonctionnel?"":e.uniteFonctionnel.sigle,libelleUniteFonctionnel:null===e.uniteFonctionnel?"":e.uniteFonctionnel.libelle,nomEmploye:null===e.employe?"":e.employe.user.firstName+" "+e.employe.user.lastName,matricule:null===e.employe?"":e.employe.matricule,motifFinAffectation:null==e.motifFinAffectation?"":e.motifFinAffectation,uniteFonctionnel:null===e.uniteFonctionnel?null:e.uniteFonctionnel,employe:null===e.employe?null:e.employe,dateDerniereModification:null===e.dateDerniereModification?"":this.formatDate(e.dateDerniereModification),dateCreation:null===e.dateCreation?"":this.formatDate(e.dateCreation),dateDebutAffectation:null==e.dateDebutAffectation?"":this.formatDate(e.dateDebutAffectation),dateFinAffectation:null==e.dateFinAffectation?"":this.formatDate(e.dateFinAffectation),utilisateurCreation:e.utilisateurCreation,utilisateurModification:e.utilisateurModification})})}formatDate(e){if(e){const i=new Date(e);return i.toLocaleDateString()+" \xe0 "+i.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}editAffectation(e){const i={id:e.id,libelle:e.libelle,description:e.description,uniteFonctionnel:e.uniteFonctionnel,employe:e.employe};this.store.dispatch(c.updateItem({id:Number(this.id),item:i}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.yh),t.Y36(A.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-affectation-employe-unite-edit"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Organisation Personnelle","pathLevelTwo","Affectation Employ\xe9 Unit\xe9 Fonct.","pathLevelThree","Editer"],[3,"affectationEmployeUnite","affectationType","formSubmitted",4,"ngIf"],[3,"affectationEmployeUnite","affectationType","formSubmitted"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,Ze,1,2,"app-affectation-employe-unite-form",2)),2&i&&(t.xp6(2),t.Q6J("ngIf",l.affectationEmployeUniteDto))},dependencies:[p.O5,v.V,$],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})();var u=a(6465),Se=a(2460),b=a(6328),Me=a(9026),I=a(6306),P=a(9397),ve=a(1631),y=a(6063),E=a(2096),Pe=a(9989),De=a(1946);let R=(()=>{class o extends Pe.v{getResourceBasePath(){return`${De.y}/affectation-employe-unite`}finAffectation(e,i){return this.http.post(`${this.url}/${this.getResourceBasePath()}/fin-affectation/${e}`,i)}static#t=this.\u0275fac=function(){let e;return function(l){return(e||(e=t.n5z(o)))(l||o)}}();static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var Ne=a(6366);let Le=(()=>{class o{constructor(e,i,l,d,U,w){this.affectationEmployeUniteService=e,this.authService=i,this.actions$=l,this.router=d,this.modalService=U,this.store=w,this.loadItems$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.loadItems),(0,Se.M)(this.store.select(K),this.store.select(H),this.store.select(gt)),(0,b.b)(([_,h,Je,q])=>(console.log(h),this.store.dispatch((0,y.Q)()),(0,Me.$)(this.affectationEmployeUniteService.getAllWithPagination(h,Je,q),this.affectationEmployeUniteService.count(q)).pipe((0,g.U)(([J,Ye])=>(this.store.dispatch((0,y.Z)()),c.loadItemsSuccess({items:J,totalElement:Ye}))),(0,I.K)(J=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:J})))))))),{dispatch:!0}),this.createItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.createItem),(0,b.b)(_=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeUniteService.add(_.item).pipe((0,P.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Employ\xe9 Affect\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-unite")}),(0,g.U)(h=>c.createItemSuccess({item:h})),(0,I.K)(h=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:h})))))))),{dispatch:!0}),this.loadItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.loadItem),(0,ve.z)(_=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeUniteService.findById(_.id).pipe((0,g.U)(h=>(this.store.dispatch((0,y.Z)()),c.loadItemSuccess({item:h}))),(0,I.K)(h=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:h})))))))),{dispatch:!0}),this.deleteItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.deleteItem),(0,b.b)(_=>this.affectationEmployeUniteService.delete(_.item.id,_.item)),(0,P.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Affectation supprim\xe9e avec succ\xe8s"})}),(0,g.U)(()=>c.loadItems()),(0,I.K)(_=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:_}))))),{dispatch:!0}),this.updateItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.updateItem),(0,b.b)(_=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeUniteService.update(_.id,_.item).pipe((0,P.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Affectation Employ\xe9 modifi\xe9e avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-unite")}),(0,g.U)(h=>c.updateItemSuccess({item:h})),(0,I.K)(h=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:h})))))))),{dispatch:!0}),this.decommissionateItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.decommissionateItem),(0,b.b)(_=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeUniteService.finAffectation(_.id,_.item).pipe((0,P.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"D\xe9saffectation de l'Employ\xe9 effectu\xe9e avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-unite")}),(0,g.U)(h=>c.decommissionateItemSuccess({item:h})),(0,I.K)(h=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:h})))))))),{dispatch:!0}),this.loadFormModel$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.loadFormModel),(0,b.b)(()=>this.affectationEmployeUniteService.getFormModel()),(0,g.U)(_=>c.loadFormModelSuccess({formModel:_})),(0,I.K)(_=>(this.store.dispatch((0,y.Z)()),(0,E.of)(c.setError({errors:_})))))),this.resetSearch$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.resetSearch),(0,b.b)(()=>(0,E.of)(c.changePage({page:1}))))),this.search$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.search),(0,b.b)(()=>(0,E.of)(c.changePage({page:1}))))),this.changePage$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.changePage),(0,g.U)(_=>c.loadItems()))),this.changePageSize$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(c.changePageSize),(0,b.b)(()=>(0,E.of)(c.changePage({page:1})))))}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(R),t.LFG(Ne.e),t.LFG(u.eX),t.LFG(A.F0),t.LFG(L.Z),t.LFG(r.yh))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})();var Oe=a(9207);function Be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-affectation-employe-unite-form",3),t.NdJ("formSubmitted",function(l){t.CHM(e);const d=t.oxw();return t.KtG(d.finAffectation(l))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("affectationEmployeUnite",e.affectationEmployeUniteDto)("affectationType",e.affectationType)}}const $e=[{path:"",component:Rt,pathMatch:"prefix"},{path:"add",component:Fe,pathMatch:"prefix"},{path:"edit/:id",component:Ie,pathMatch:"prefix"},{path:"desaffect/:id",component:(()=>{class o{constructor(e,i){this.store=e,this.route=i,this.formModel$=this.store.select(M),this.affectationEmployeUnite$=this.store.select(Y),this.affectationEmployeUniteDto=null,this.affectationType=O.X.DESAFFECT,this.subscription=new B.w0}ngOnInit(){this.store.dispatch(c.resetFormModel()),this.subscription=this.route.params.subscribe(e=>{this.id=e.id,this.id&&this.store.dispatch(c.loadItem({id:this.id}))}),this.affectationEmployeUnite$.subscribe(e=>{null!==e&&(this.affectationEmployeUniteDto={id:e.id,libelle:e.libelle,description:e.description,sigleUniteFonctionnel:null===e.uniteFonctionnel?"":e.uniteFonctionnel.sigle,libelleUniteFonctionnel:null===e.uniteFonctionnel?"":e.uniteFonctionnel.libelle,nomEmploye:null===e.employe?"":e.employe.user.firstName+" "+e.employe.user.lastName,matricule:null===e.employe?"":e.employe.matricule,motifFinAffectation:e.motifFinAffectation,uniteFonctionnel:null===e.uniteFonctionnel?null:e.uniteFonctionnel,employe:null===e.employe?null:e.employe,dateDerniereModification:null===e.dateDerniereModification?"":this.formatDate(e.dateDerniereModification),dateCreation:null===e.dateCreation?"":this.formatDate(e.dateCreation),dateDebutAffectation:null==e.dateDebutAffectation?"":this.formatDate(e.dateDebutAffectation),dateFinAffectation:null==e.dateFinAffectation?"":this.formatDate(e.dateFinAffectation),utilisateurCreation:e.utilisateurCreation,utilisateurModification:e.utilisateurModification})})}formatDate(e){if(e){const i=new Date(e);return i.toLocaleDateString()+" \xe0 "+i.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}finAffectation(e){console.log(e);const i={id:e.id,libelle:e.libelle,description:e.description,uniteFonctionnel:e.uniteFonctionnel,employe:e.employe,motifFinAffectation:e.motifFinAffectation};this.store.dispatch(c.decommissionateItem({id:Number(this.id),item:i}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.yh),t.Y36(A.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-affectation-employe-unite-desaffect"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Organisation Personnelle","pathLevelTwo","Affectation Employ\xe9 Unit\xe9 Fonct.","pathLevelThree","Fin d'affectation"],[3,"affectationEmployeUnite","affectationType","formSubmitted",4,"ngIf"],[3,"affectationEmployeUnite","affectationType","formSubmitted"]],template:function(i,l){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,Be,1,2,"app-affectation-employe-unite-form",2)),2&i&&(t.xp6(2),t.Q6J("ngIf",l.affectationEmployeUniteDto))},dependencies:[p.O5,v.V,$],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})(),pathMatch:"prefix"}];let we=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[R],imports:[p.ez,Q.L,r.Aw.forFeature("affectation-employe-unites",ht),u.sQ.forFeature(Le),Oe.m,A.Bz.forChild($e)]})}return o})()},8819:(D,T,a)=>{a.d(T,{F:()=>A});var p=a(9468);let A=(()=>{class t{constructor(){this.disabled=!1,this.buttonClicked=new p.vpe}emitButtonClicked(){this.buttonClicked.emit()}static#t=this.\u0275fac=function(C){return new(C||t)};static#e=this.\u0275cmp=p.Xpm({type:t,selectors:[["app-cancel-button"]],inputs:{title:"title",url:"url",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(C,g){1&C&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return g.emitButtonClicked()}),p._uU(1),p.qZA()),2&C&&(p.Gre("cancel-button ",g.otherclass,""),p.Q6J("disabled",g.disabled),p.xp6(1),p.hij(" ",g.title,"\n"))},styles:[".cancel-button[_ngcontent-%COMP%]{color:#000;border:1px solid #6d7582;background-color:#fff;min-width:120px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:25px;padding:.75rem 0rem;border-radius:3px}"]})}return t})()},4849:(D,T,a)=>{a.d(T,{n:()=>g});var p=a(1892),A=a(6814),t=a(8666),s=a(2463),m=a(9468),C=a(166);let g=(()=>{class r{constructor(Z,x){this.modalData=Z,this.modalRef=x}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#t=this.\u0275fac=function(x){return new(x||r)(m.Y36(p.S),m.Y36(p.R))};static#e=this.\u0275cmp=m.Xpm({type:r,selectors:[["app-confirm-alert"]],standalone:!0,features:[m.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(x,S){1&x&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),m._uU(3,"Confirmation de Suppression"),m.qZA()()(),m.TgZ(4,"div",3)(5,"div",4)(6,"div",5),m._UZ(7,"img",6),m.qZA(),m.TgZ(8,"div",7),m._uU(9," Voulez-vous vraiment effectuer cette action ? "),m.qZA()(),m.TgZ(10,"div",8)(11,"app-custom-button",9),m.NdJ("buttonClicked",function(){return S.confirmAction()}),m.qZA(),m.TgZ(12,"app-custom-button",10),m.NdJ("buttonClicked",function(){return S.close()}),m.qZA()()())},dependencies:[A.ez,t.a,s.v,C.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return r})()},3849:(D,T,a)=>{a.d(T,{L:()=>m});var p=a(9468),A=a(2463),t=a(6814),s=a(166);let m=(()=>{class C{constructor(){this.printButtonClicked=new p.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#t=this.\u0275fac=function(f){return new(f||C)};static#e=this.\u0275cmp=p.Xpm({type:C,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[p.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(f,Z){1&f&&(p.TgZ(0,"app-custom-button",0),p.NdJ("buttonClicked",function(){return Z.emitPrintButtonClicked()}),p.qZA())},dependencies:[t.ez,A.v,s.x],styles:["[_nghost-%COMP%]{display:block}"]})}return C})()}}]);