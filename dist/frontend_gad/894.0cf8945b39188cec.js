"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[894],{894:(N,b,i)=>{i.r(b),i.d(b,{VilleModule:()=>Pe});var p=i(6814),t=i(9468),c=i(95);let x=(()=>{class e{constructor(){}createForm(o){return new c.cw({nomCourt:new c.NI(o.nomCourt,{nonNullable:!0,validators:[c.kI.required]}),nomLong:new c.NI(o.nomLong),pays:new c.NI(o.pays),nomDepartement:new c.NI(o.nomDepartement),departement:new c.NI(o.departement,{nonNullable:!0,validators:[c.kI.required]}),utilisateurModification:new c.NI(o.utilisateurModification),utilisateurCreation:new c.NI(o.utilisateurCreation),dateCreation:new c.NI(o.dateCreation),dateDerniereModification:new c.NI(o.dateDerniereModification)})}createSearchForm(){return new c.cw({nomCourt:new c.NI("",{nonNullable:!0,validators:[c.kI.required]}),nomLong:new c.NI("",{nonNullable:!0,validators:[c.kI.required]})})}static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var d=i(2572),f=i(7398),n=i(676);const m="Ville",A=(0,n.PH)(`[${m} API] Load All`),I=(0,n.PH)(`[${m} API] Load All Success`,(0,n.Ky)()),Z=(0,n.PH)(`[${m} API] Create`,(0,n.Ky)()),E=(0,n.PH)(`[${m} API] Create Success`,(0,n.Ky)()),F=(0,n.PH)(`[${m} API] Load`,(0,n.Ky)()),R=(0,n.PH)(`[${m} API] Load Success`,(0,n.Ky)()),W=(0,n.PH)(`[${m} API] Create Error`,(0,n.Ky)()),j=(0,n.PH)(`[${m} API] Reset Error`),X=(0,n.PH)(`[${m} API] Reset Error Field`,(0,n.Ky)()),q=(0,n.PH)(`[${m} API] Reset`),tt=(0,n.PH)(`[${m} API] Delete`,(0,n.Ky)()),et=(0,n.PH)(`[${m} API] Delete Success`,(0,n.Ky)()),l={loadItems:A,loadItemsSuccess:I,resetItem:q,createItem:Z,createItemSuccess:E,loadItem:F,loadItemSuccess:R,updateItem:(0,n.PH)(`[${m} API] Update`,(0,n.Ky)()),updateItemSuccess:(0,n.PH)(`[${m} API] Update Success`,(0,n.Ky)()),deleteItem:tt,deleteItemSuccess:et,setError:W,resetError:j,resetErrorField:X,loadFormModel:(0,n.PH)(`[${m} API] Load Form Model`),resetFormModel:(0,n.PH)(`[${m} API] Reset Form Model`),loadFormModelSuccess:(0,n.PH)(`[${m} API] Load Form Model Success`,(0,n.Ky)()),resetSearch:(0,n.PH)(`[${m} API] Reset Search`),search:(0,n.PH)(`[${m} API] Search`,(0,n.Ky)()),changePage:(0,n.PH)(`[${m} API] Change Page`,(0,n.Ky)()),changePageSize:(0,n.PH)(`[${m} API] Change Page Size`,(0,n.Ky)())},dt=(0,n.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,n.on)(l.loadItemsSuccess,(e,s)=>(console.log(s.items),{...e,items:s.items,totalElement:s.totalElement})),(0,n.on)(l.resetItem,(e,s)=>({...e,currentItem:null})),(0,n.on)(l.createItemSuccess,(e,s)=>({...e})),(0,n.on)(l.deleteItemSuccess,(e,s)=>({...e})),(0,n.on)(l.loadItemSuccess,(e,s)=>({...e,currentItem:s.item})),(0,n.on)(l.updateItemSuccess,(e,s)=>({...e})),(0,n.on)(l.loadFormModel,(e,s)=>({...e,formModel:null})),(0,n.on)(l.loadFormModelSuccess,(e,s)=>({...e,formModel:s.formModel})),(0,n.on)(l.resetSearch,(e,s)=>({...e,searchModel:{}})),(0,n.on)(l.search,(e,s)=>({...e,searchModel:s.searchModel})),(0,n.on)(l.changePage,(e,s)=>({...e,page:s.page})),(0,n.on)(l.changePageSize,(e,s)=>({...e,pageSize:s.pageSize})),(0,n.on)(l.setError,(e,s)=>({...e,errors:s.errors})),(0,n.on)(l.resetError,(e,s)=>({...e,errors:null})),(0,n.on)(l.resetErrorField,(e,s)=>{let o={};return null!==e.errors&&Object.entries(e.errors).forEach(([r,a])=>{r!==s.fieldName&&(o[`${r}`]=a)}),{...e,errors:o}})),T=(0,n.ZF)("villes"),ut=(0,n.P1)(T,e=>e.items),_t=(0,n.P1)(T,e=>e.currentItem),O=(0,n.P1)(T,e=>e.formModel),ht=(0,n.P1)(T,e=>e.searchModel),J=(0,n.P1)(T,e=>e.page),H=(0,n.P1)(T,e=>e.pageSize),ft=(0,n.P1)(T,e=>e.totalElement),gt=(0,n.P1)(T,e=>e.errors);var Ct=i(4849),L=i(8281),B=i(797),z=i(3849),vt=i(7251),bt=i(166),xt=i(6327),Zt=i(8564),Tt=i(8223),yt=i(602),It=i(1469),Pt=i(6326),Y=i(8346),G=i(1171),k=i(547),U=i(362);function Mt(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"R\xe9f\xe9rence"),t.qZA())}function St(e,s){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.refSys)}}function At(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Nom Court"),t.qZA())}function Lt(e,s){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.nomCourt)}}function Et(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Nom Long"),t.qZA())}function Dt(e,s){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.nomLong)}}function Nt(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"D\xe9partement"),t.qZA())}function Ft(e,s){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.departement.nomLong)}}function Ot(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Pays"),t.qZA())}function Bt(e,s){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o.departement.pays.libelle)}}function Ut(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Date cr\xe9ation"),t.qZA())}function Vt(e,s){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.dateCreation,"dd/MM/y \xe0 HH:mm:ss"))}}function $t(e,s){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Date Derni\xe8re Modif"),t.qZA())}function Kt(e,s){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.dateDerniereModification,"dd/MM/y \xe0 HH:mm:ss"))}}function Jt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"table",24),t.NdJ("itemSelected",function(a){t.CHM(o);const g=t.oxw(2);return t.KtG(g.itemSelected(a))}),t.ynx(1,25),t.YNc(2,Mt,2,0,"th",26),t.YNc(3,St,2,1,"td",27),t.BQk(),t.ynx(4,28),t.YNc(5,At,2,0,"th",26),t.YNc(6,Lt,2,1,"td",27),t.BQk(),t.ynx(7,29),t.YNc(8,Et,2,0,"th",26),t.YNc(9,Dt,2,1,"td",27),t.BQk(),t.ynx(10,30),t.YNc(11,Nt,2,0,"th",26),t.YNc(12,Ft,2,1,"td",27),t.BQk(),t.ynx(13,31),t.YNc(14,Ot,2,0,"th",26),t.YNc(15,Bt,2,1,"td",27),t.BQk(),t.ynx(16,32),t.YNc(17,Ut,2,0,"th",26),t.YNc(18,Vt,3,4,"td",33),t.BQk(),t.ynx(19,34),t.YNc(20,$t,2,0,"th",26),t.YNc(21,Kt,3,4,"td",33),t.BQk(),t.qZA()}if(2&e){const o=s.ngIf,r=t.oxw(2);t.Q6J("items",o)("headers",r.headerTable)("selectable",!0)}}function Ht(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"app-crud-list",3),t.NdJ("searchButtonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.searchButtonClicked())})("refreshButtonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.refreshButtonClicked())})("pageSelected",function(a){t.CHM(o);const g=t.oxw();return t.KtG(g.pageSelected(a))})("pageSizeChange",function(a){t.CHM(o);const g=t.oxw();return t.KtG(g.pageSizeChange(a))})("closeButtonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.closeButtonClicked())}),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6),t._UZ(4,"app-form-label",7),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"app-custom-textfield",9),t.qZA()()(),t.TgZ(7,"div",10)(8,"div",11)(9,"div",6),t._UZ(10,"app-form-label",12),t.qZA(),t.TgZ(11,"div",8),t._UZ(12,"app-custom-textfield",13),t.qZA()()(),t.TgZ(13,"div",14)(14,"app-custom-button",15),t.NdJ("buttonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.addButtonClicked())}),t.qZA(),t.TgZ(15,"app-custom-button",16),t.NdJ("buttonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.editButtonClicked())}),t.qZA(),t.TgZ(16,"app-custom-button",17),t.NdJ("buttonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.deleteButtonClicked())}),t.qZA()(),t.TgZ(17,"div",18),t._UZ(18,"app-custom-button",19)(19,"app-custom-button",20),t.TgZ(20,"app-print-button",21),t.NdJ("printButtonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.printButtonClicked())}),t.qZA()(),t.TgZ(21,"div",22),t.YNc(22,Jt,22,3,"table",23),t.ALo(23,"async"),t.qZA()()}if(2&e){const o=s.ngIf,r=t.oxw();t.Q6J("itemSelected",r.isItemSelected())("pageSize",o.pageSize)("currentPage",o.page)("totalElements",o.totalElement),t.xp6(1),t.Q6J("formGroup",r.searchForm),t.xp6(6),t.Q6J("formGroup",r.searchForm),t.xp6(8),t.Q6J("disabled",!r.isItemSelected()),t.xp6(1),t.Q6J("disabled",!r.isItemSelected()),t.xp6(6),t.Q6J("ngIf",t.lcZ(23,9,r.items$))}}let zt=(()=>{class e{constructor(o,r,a,g){this.router=o,this.modalService=r,this.store=a,this.villeFormService=g,this.headerTable=["R\xe9f\xe9rence","Nom Court","Nom Long","D\xe9partement","Pays","Date Cr\xe9ation","Date Derni\xe8re Modif"],this.items$=this.store.select(ut),this.page$=this.store.select(J),this.pageSize$=this.store.select(H),this.totalElement$=this.store.select(ft),this.data$=(0,d.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,f.U)(([P,$,u])=>({page:P,pageSize:$,totalElement:u}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.villeFormService.createSearchForm(),this.store.dispatch(l.loadItems())}addButtonClicked(){this.router.navigate(["administration","villes","add"])}editButtonClicked(){const o=this.selectedItem?.id;o&&(this.store.dispatch(l.resetItem()),this.router.navigate(["administration","villes","edit",o]))}deleteButtonClicked(){const o=this.selectedItem;o&&this.modalService.openComponent(Ct.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(r=>{r&&"yes"===r&&this.store.dispatch(l.deleteItem({item:o}))})}itemSelected(o){this.selectedItem=o}pageSelected(o){this.store.dispatch(l.changePage({page:o}))}pageSizeChange(o){this.store.dispatch(l.changePageSize({pageSize:o}))}closeButtonClicked(){this.router.navigate(["administration"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(l.resetSearch())}searchButtonClicked(){this.store.dispatch(l.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(L.F0),t.Y36(B.Z),t.Y36(n.yh),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ville-list"]],features:[t._Bn([x,{provide:t.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Tables","pathLevelTwo","Ville","pathLevelThree","Liste"],["title","Liste des Villes",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Villes",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Nom Court"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","nomCourt"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Nom Long"],["placeholder","","otherclass","item-input","formControlName","nomLong"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Ajouter",1,"me-1",3,"buttonClicked"],["icon","icon-edit-alt btn-icon-edit","title","Modifier",1,"me-1",3,"disabled","buttonClicked"],["icon","icon-trash btn-icon-delete","title","Supprimer",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Importer","url","import.svg"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Nom Court"],["appCellDef","Nom Long"],["appCellDef","D\xe9partement"],["appCellDef","Pays"],["appCellDef","Date Cr\xe9ation"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Date Derni\xe8re Modif"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template",""]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,Ht,24,11,"app-crud-list",2),t.ALo(3,"async")),2&r&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,a.data$)))},dependencies:[p.O5,z.L,c.JJ,c.JL,c.sg,c.u,vt._,bt.x,xt.N,Zt.D,Tt.h,yt.u,It.O,Pt.q,Y.W,G.h,k.Z,U.V,p.Ov,p.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return e})();var Yt=i(8819),Gt=i(9543),kt=i(7426),Qt=i(9887),wt=i(5973),Rt=i(4944),Wt=i(2093),jt=i(6136),Xt=i(8513),qt=i(586),te=i(1327),ee=i(5188);function oe(e,s){1&e&&(t.TgZ(0,"th",40),t._uU(1,"Nom Court"),t.qZA())}function re(e,s){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.hij(" ",o.nomCourt," ")}}function ne(e,s){1&e&&(t.TgZ(0,"th",40),t._uU(1,"Nom Long"),t.qZA())}function ie(e,s){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.hij(" ",o.nomLong," ")}}function se(e,s){1&e&&(t.TgZ(0,"table",35),t.ynx(1,36),t.YNc(2,oe,2,0,"th",37),t.YNc(3,re,2,1,"td",38),t.BQk(),t.ynx(4,39),t.YNc(5,ne,2,0,"th",37),t.YNc(6,ie,2,1,"td",38),t.BQk(),t.qZA())}function le(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"app-field-error-wrapper",32),t.NdJ("resetField",function(a){t.CHM(o);const g=t.oxw(2);return t.KtG(g.resetBackendError(a))}),t.TgZ(1,"app-item-search",33),t.YNc(2,se,7,0,"table",34),t.qZA()()}if(2&e){const o=s.ngIf,r=t.oxw(2);t.Q6J("errors",r.errors),t.xp6(1),t.Q6J("headers",r.departementSelectItemsHeader)("items",o.departements)("criterias",r.departementItemCritterias)("itemDescription",r.departementItemDescription)}}function ae(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),t._UZ(5,"app-form-label",7),t.TgZ(6,"div",8),t._UZ(7,"app-custom-textfield",9),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"app-form-label",10),t.TgZ(10,"div",8),t._UZ(11,"app-custom-textfield",11),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6),t._UZ(14,"app-form-label",12),t.TgZ(15,"div",8),t._UZ(16,"app-custom-textfield",13),t.qZA()(),t.TgZ(17,"div",6),t._UZ(18,"app-form-label",14),t.TgZ(19,"div",8),t._UZ(20,"app-custom-textfield",15),t.qZA()()()(),t.TgZ(21,"app-panel-custom",16)(22,"div",5)(23,"div",6),t._UZ(24,"app-form-label",17),t.TgZ(25,"div",8)(26,"app-field-error-wrapper",18),t.NdJ("resetField",function(a){t.CHM(o);const g=t.oxw();return t.KtG(g.resetBackendError(a))}),t._UZ(27,"app-custom-textfield",19),t.qZA()()(),t.TgZ(28,"div",20),t._UZ(29,"app-form-label",21),t.TgZ(30,"div",8),t._UZ(31,"app-custom-textfield",22),t.qZA()()(),t.TgZ(32,"div",5)(33,"div",6),t._UZ(34,"app-form-label",23),t.TgZ(35,"div",8),t._UZ(36,"app-custom-textfield",24),t.qZA()(),t.TgZ(37,"div",25),t._UZ(38,"app-form-label",26),t.TgZ(39,"div",8),t._UZ(40,"app-custom-textfield",27),t.qZA(),t.YNc(41,le,3,5,"app-field-error-wrapper",28),t.ALo(42,"async"),t.qZA()()(),t.TgZ(43,"div",29)(44,"app-primary-button",30),t.NdJ("buttonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.submitForm())}),t.qZA(),t.TgZ(45,"app-cancel-button",31),t.NdJ("buttonClicked",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.returnToList())}),t.qZA()()()()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(6),t.Q6J("errors",o.errors),t.xp6(10),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(42,9,o.formModel$))}}let Q=(()=>{class e{constructor(o,r,a,g){this.formService=o,this.modalService=r,this.router=a,this.store=g,this.formModel$=this.store.select(O),this.errors=null,this.departementSelectItemsHeader=["Nom Court","Nom Long"],this.departementItemDescription=P=>P.nomCourt,this.departementItemCritterias={nomCourt:"Nom Court",nomLong:"Nom Long"},this.formSubmitted=new t.vpe}ngOnInit(){this.store.select(gt).subscribe(o=>{this.errors=o}),this.store.dispatch(l.resetError()),this.form=this.formService.createForm(this.ville),this.form.get("departement")?.valueChanges.subscribe(o=>{null!==o&&(this.form.get("pays")?.setValue(o.pays.libelle),this.form.get("nomDepartement")?.setValue(o.nomLong))})}ngOnDestroy(){}submitForm(){this.formSubmitted.emit(this.form.value)}returnToList(){this.router.navigateByUrl("administration/villes")}resetBackendError(o){this.store.dispatch(l.resetErrorField({fieldName:o}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(x),t.Y36(B.Z),t.Y36(L.F0),t.Y36(n.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ville-form"]],inputs:{ville:"ville"},outputs:{formSubmitted:"formSubmitted"},features:[t._Bn([x])],decls:2,vars:1,consts:[["id","main",1,"ps-3","pe-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Historique"],[1,"general-info"],[1,"input-container","col-4"],["title","Date Cr\xe9ation",1,"col-5","text-end"],[1,"input-textfield-container","col"],["otherclass","custom-style-form","placeholder","","formControlName","dateCreation",3,"readonly"],["title","Cr\xe9\xe9 Par",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurCreation",3,"readonly"],["title","Date Derni\xe8re Modif",1,"col-5","text-end"],["otherclass","custom-style-form","formControlName","dateDerniereModification","placeholder","",3,"readonly"],["title","Modifi\xe9 Par",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurModification",3,"readonly"],["icon","fa fa-angle-right","title","Informations g\xe9n\xe9rales"],["title","Nom Court",1,"col-5","text-end"],[3,"errors","resetField"],["otherclass","custom-style-form","placeholder","","formControlName","nomCourt"],[1,"input-container","col-6"],["title","Nom Long",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","nomLong"],["title","Pays",1,"col-5","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","pays",3,"readonly"],[1,"input-container","col-5"],["title","D\xe9partement",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","nomDepartement",3,"readonly"],["class","",3,"errors","resetField",4,"ngIf"],[1,"form-actions"],["title","Enregistrer",1,"me-1",3,"buttonClicked"],["title","Annuler","otherclass","custom-cancel-button",3,"buttonClicked"],[1,"",3,"errors","resetField"],["otherclass","custom-style-item-selection-form","formControlName","departement",1,"ml-2",3,"headers","items","criterias","itemDescription"],["app-item-search-template-attribute","",4,"appItemSearchTemplate"],["app-item-search-template-attribute",""],["appItemSearchCellDef","Nom Court"],["app-item-search-header-def-template","","class","custom-head",4,"appItemSearchHeaderDefTemplate"],["app-item-search-cell-def-template","","class","custom-head",4,"appItemSearchCellDefTemplate"],["appItemSearchCellDef","Nom Long"],["app-item-search-header-def-template","",1,"custom-head"],["app-item-search-cell-def-template","",1,"custom-head"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t.YNc(1,ae,46,11,"form",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",a.form))},dependencies:[p.O5,c._Y,c.JJ,c.JL,c.sg,c.u,Yt.F,Y.W,G.h,Gt.C,k.Z,kt.p,Qt.l,wt.v,Rt.K,Wt.d,jt.D,Xt.T,qt.o,te.g,ee.K,p.Ov],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:3px 0}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return e})(),ce=(()=>{class e{constructor(o){this.store=o,this.formModel$=this.store.select(O),this.ville={id:"",nomCourt:"",nomLong:"",pays:"",nomDepartement:"",departement:null,dateDerniereModification:null,dateCreation:null,utilisateurCreation:"",utilisateurModification:""}}ngOnInit(){this.store.dispatch(l.resetItem()),this.store.dispatch(l.resetFormModel()),this.store.dispatch(l.loadFormModel())}addVille(o){this.store.dispatch(l.createItem({item:{nomCourt:o.nomCourt,nomLong:o.nomLong,departement:o.departement}}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(n.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ville-add"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Tables","pathLevelTwo","Ville","pathLevelThree","Ajouter"],["id","main",3,"ville","formSubmitted"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.TgZ(2,"app-ville-form",2),t.NdJ("formSubmitted",function(P){return a.addVille(P)}),t.qZA()),2&r&&(t.xp6(2),t.Q6J("ville",a.ville))},dependencies:[U.V,Q],styles:["[_nghost-%COMP%]{width:100%}"]})}return e})();var pe=i(7394);function me(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"app-ville-form",4),t.NdJ("formSubmitted",function(a){t.CHM(o);const g=t.oxw(2);return t.KtG(g.editVille(a))}),t.qZA()}if(2&e){const o=t.oxw(2);t.Q6J("ville",o.villeDto)}}function de(e,s){if(1&e&&(t.ynx(0),t.YNc(1,me,1,1,"app-ville-form",3),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.villeDto)}}let ue=(()=>{class e{constructor(o,r){this.store=o,this.route=r,this.formModel$=this.store.select(O),this.ville$=this.store.select(_t),this.villeDto=null,this.subscription=new pe.w0}ngOnInit(){this.store.dispatch(l.resetFormModel()),this.subscription=this.route.params.subscribe(o=>{this.id=o.id,this.id&&this.store.dispatch(l.loadItem({id:this.id}))}),this.ville$.subscribe(o=>{null!==o&&(this.villeDto={id:o.id,nomLong:o.nomLong,nomCourt:o.nomCourt,pays:null===o.departement?"":o.departement.pays.libelle,nomDepartement:null===o.departement?"":o.departement.nomLong,departement:null===o.departement?null:o.departement,dateDerniereModification:null===o.dateDerniereModification?"":this.formatDate(o.dateDerniereModification),dateCreation:null===o.dateCreation?"":this.formatDate(o.dateCreation),utilisateurCreation:o.utilisateurCreation,utilisateurModification:o.utilisateurModification})})}formatDate(o){if(o){const r=new Date(o);return r.toLocaleDateString()+" \xe0 "+r.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}editVille(o){const r={id:o.id,nomLong:o.nomLong,nomCourt:o.nomCourt,departement:o.departement};this.store.dispatch(l.updateItem({id:Number(this.id),item:r}))}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(n.yh),t.Y36(L.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-ville-edit"]],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Tables","pathLevelTwo","Ville","pathLevelThree","Editer"],[4,"ngIf"],["id","main",3,"ville","formSubmitted",4,"ngIf"],["id","main",3,"ville","formSubmitted"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"app-custom-breadcrumb",1),t.qZA(),t.YNc(2,de,2,1,"ng-container",2),t.ALo(3,"async")),2&r&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,a.formModel$)))},dependencies:[p.O5,U.V,Q,p.Ov],styles:["[_nghost-%COMP%]{width:100%}"]})}return e})();var _=i(6465),_e=i(9207),C=i(6063),y=i(6328),M=i(6306),V=i(9397),he=i(1631),fe=i(9026),ge=i(9862),v=i(2096),Ce=i(2460),ve=i(3186),be=i(4664),xe=i(9989),Ze=i(1946);let w=(()=>{class e extends xe.v{getResourceBasePath(){return`${Ze.y}/ville`}static#t=this.\u0275fac=function(){let o;return function(a){return(o||(o=t.n5z(e)))(a||e)}}();static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var Te=i(6366);let ye=(()=>{class e{constructor(o,r,a,g,P,$){this.villeService=o,this.authService=r,this.actions$=a,this.router=g,this.modalService=P,this.store=$,this.loadItems$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.loadItems),(0,Ce.M)(this.store.select(J),this.store.select(H),this.store.select(ht)),(0,y.b)(([u,h,D,K])=>(console.log(h),this.store.dispatch((0,C.Q)()),(0,fe.$)(this.villeService.getAllWithPagination(h,D,K),this.villeService.count(K)).pipe((0,f.U)(([S,Me])=>(this.store.dispatch((0,C.Z)()),l.loadItemsSuccess({items:S,totalElement:Me}))),(0,M.K)(S=>(this.store.dispatch((0,C.Z)()),(0,v.of)(l.setError({errors:S})))))))),{dispatch:!0}),this.createItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.createItem),(0,y.b)(u=>(this.store.dispatch((0,C.Q)()),this.villeService.add(u.item).pipe((0,V.b)(()=>{this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Ville ajout\xe9e avec succ\xe8s"}),this.router.navigateByUrl("administration/villes")}),(0,f.U)(h=>l.createItemSuccess({item:h})),(0,M.K)(h=>(this.store.dispatch((0,C.Z)()),(0,v.of)(l.setError({errors:h})))))))),{dispatch:!0}),this.loadItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.loadItem),(0,he.z)(u=>this.villeService.findById(u.id).pipe((0,f.U)(h=>l.loadItemSuccess({item:h})),(0,M.K)(h=>(this.store.dispatch((0,C.Z)()),(0,v.of)(l.setError({errors:h}))))))),{dispatch:!0}),this.deleteItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.deleteItem),(0,y.b)(u=>this.villeService.delete(u.item.id,u.item)),(0,V.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Ville supprim\xe9e avec succ\xe8s"})}),(0,f.U)(()=>l.loadItems()),(0,M.K)(u=>(this.store.dispatch((0,C.Z)()),(0,v.of)(l.setError({errors:u}))))),{dispatch:!0}),this.updateItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.updateItem),(0,y.b)(u=>(this.store.dispatch((0,C.Q)()),this.villeService.update(u.id,u.item).pipe((0,V.b)(()=>{this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Ville modifi\xe9e avec succ\xe8s"}),this.router.navigateByUrl("administration/villes")}),(0,f.U)(h=>l.createItemSuccess({item:h})),(0,M.K)(h=>(this.store.dispatch((0,C.Z)()),(0,v.of)(l.setError({errors:h})))))))),{dispatch:!0}),this.loadFormModel$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.loadFormModel),(0,y.b)(()=>this.villeService.getFormModel()),(0,f.U)(u=>l.loadFormModelSuccess({formModel:u})),(0,M.K)(u=>(0,v.of)(l.setError({errors:u}))))),this.resetSearch$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.resetSearch),(0,y.b)(()=>(0,v.of)(l.changePage({page:1}))))),this.search$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.search),(0,y.b)(()=>(0,v.of)(l.changePage({page:1}))))),this.changePage$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.changePage),(0,f.U)(u=>l.loadItems()))),this.changePageSize$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.changePageSize),(0,y.b)(()=>(0,v.of)(l.changePage({page:1}))))),this.handleError$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(l.setError),(0,be.w)(u=>{if(this.store.dispatch((0,C.Q)()),u.errors instanceof ge.UA){if(422===u.errors.status){let h="",D=0;for(const[K,S]of Object.entries(u.errors.error))h+=0===D?S:"\n"+S,D++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:h})}if(403===u.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===u.errors.status){let h="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,C.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:h}),(0,v.of)(ve.jM())}}return this.store.dispatch((0,C.Z)()),(0,v.of)({type:"noop"})})),{dispatch:!0})}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(w),t.LFG(Te.e),t.LFG(_.eX),t.LFG(L.F0),t.LFG(B.Z),t.LFG(n.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();const Ie=[{path:"",component:zt,pathMatch:"prefix"},{path:"add",component:ce,pathMatch:"prefix"},{path:"edit/:id",component:ue,pathMatch:"prefix"}];let Pe=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({providers:[w],imports:[p.ez,z.L,n.Aw.forFeature("villes",dt),_.sQ.forFeature(ye),_e.m,L.Bz.forChild(Ie)]})}return e})()},8819:(N,b,i)=>{i.d(b,{F:()=>t});var p=i(9468);let t=(()=>{class c{constructor(){this.disabled=!1,this.buttonClicked=new p.vpe}emitButtonClicked(){this.buttonClicked.emit()}static#t=this.\u0275fac=function(f){return new(f||c)};static#e=this.\u0275cmp=p.Xpm({type:c,selectors:[["app-cancel-button"]],inputs:{title:"title",url:"url",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(f,n){1&f&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return n.emitButtonClicked()}),p._uU(1),p.qZA()),2&f&&(p.Gre("cancel-button ",n.otherclass,""),p.Q6J("disabled",n.disabled),p.xp6(1),p.hij(" ",n.title,"\n"))},styles:[".cancel-button[_ngcontent-%COMP%]{color:#000;border:1px solid #6d7582;background-color:#fff;min-width:120px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:25px;padding:.75rem 0rem;border-radius:3px}"]})}return c})()},4849:(N,b,i)=>{i.d(b,{n:()=>n});var p=i(1892),t=i(6814),c=i(8666),x=i(2463),d=i(9468),f=i(166);let n=(()=>{class m{constructor(I,Z){this.modalData=I,this.modalRef=Z}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#t=this.\u0275fac=function(Z){return new(Z||m)(d.Y36(p.S),d.Y36(p.R))};static#e=this.\u0275cmp=d.Xpm({type:m,selectors:[["app-confirm-alert"]],standalone:!0,features:[d.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(Z,E){1&Z&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),d._uU(3,"Confirmation de Suppression"),d.qZA()()(),d.TgZ(4,"div",3)(5,"div",4)(6,"div",5),d._UZ(7,"img",6),d.qZA(),d.TgZ(8,"div",7),d._uU(9," Voulez-vous vraiment effectuer cette action ? "),d.qZA()(),d.TgZ(10,"div",8)(11,"app-custom-button",9),d.NdJ("buttonClicked",function(){return E.confirmAction()}),d.qZA(),d.TgZ(12,"app-custom-button",10),d.NdJ("buttonClicked",function(){return E.close()}),d.qZA()()())},dependencies:[t.ez,c.a,x.v,f.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return m})()},3849:(N,b,i)=>{i.d(b,{L:()=>d});var p=i(9468),t=i(2463),c=i(6814),x=i(166);let d=(()=>{class f{constructor(){this.printButtonClicked=new p.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#t=this.\u0275fac=function(A){return new(A||f)};static#e=this.\u0275cmp=p.Xpm({type:f,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[p.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(A,I){1&A&&(p.TgZ(0,"app-custom-button",0),p.NdJ("buttonClicked",function(){return I.emitPrintButtonClicked()}),p.qZA())},dependencies:[c.ez,t.v,x.x],styles:["[_nghost-%COMP%]{display:block}"]})}return f})()}}]);