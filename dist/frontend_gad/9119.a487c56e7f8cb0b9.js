"use strict";(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[9119],{9119:($,T,a)=>{a.r(T),a.d(T,{AffectationEmployeBureauModule:()=>Yt});var m=a(6814),g=a(8281),i=a(676),u=a(6465),h=a(9207);const p="Affectation Employe Bureau",A=(0,i.PH)(`[${p} API] Load All`),C=(0,i.PH)(`[${p} API] Load All Success`,(0,i.Ky)()),F=(0,i.PH)(`[${p} API] Create`,(0,i.Ky)()),v=(0,i.PH)(`[${p} API] Create Success`,(0,i.Ky)()),B=(0,i.PH)(`[${p} API] Create Error`,(0,i.Ky)()),P=(0,i.PH)(`[${p} API] Reset Error`),w=(0,i.PH)(`[${p} API] Reset Error Field`,(0,i.Ky)()),ee=(0,i.PH)(`[${p} API] Load`,(0,i.Ky)()),te=(0,i.PH)(`[${p} API] Load Success`,(0,i.Ky)()),oe=(0,i.PH)(`[${p} API] Reset`),re=(0,i.PH)(`[${p} API] Delete`,(0,i.Ky)()),ie=(0,i.PH)(`[${p} API] Delete Success`,(0,i.Ky)()),s={loadItems:A,loadItemsSuccess:C,resetItem:oe,createItem:F,createItemSuccess:v,loadItem:ee,loadItemSuccess:te,updateItem:(0,i.PH)(`[${p} API] Update`,(0,i.Ky)()),updateItemSuccess:(0,i.PH)(`[${p} API] Update Success`,(0,i.Ky)()),deleteItem:re,deleteItemSuccess:ie,setError:B,resetError:P,resetErrorField:w,decommissionateItem:(0,i.PH)(`[${p} API] Decommissionate`,(0,i.Ky)()),decommissionateItemSuccess:(0,i.PH)(`[${p} API] Decommissionate Success`,(0,i.Ky)()),loadFormModel:(0,i.PH)(`[${p} API] Load Form Model`),resetFormModel:(0,i.PH)(`[${p} API] Reset Form Model`),loadFormModelSuccess:(0,i.PH)(`[${p} API] Load Form Model Success`,(0,i.Ky)()),resetSearch:(0,i.PH)(`[${p} API] Reset Search`),search:(0,i.PH)(`[${p} API] Search`,(0,i.Ky)()),changePage:(0,i.PH)(`[${p} API] Change Page`,(0,i.Ky)()),changePageSize:(0,i.PH)(`[${p} API] Change Page Size`,(0,i.Ky)())},ye=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(s.loadItemsSuccess,(o,n)=>(console.log(n.items),{...o,items:n.items,totalElement:n.totalElement})),(0,i.on)(s.resetItem,(o,n)=>({...o,currentItem:null})),(0,i.on)(s.createItemSuccess,(o,n)=>({...o})),(0,i.on)(s.deleteItemSuccess,(o,n)=>({...o})),(0,i.on)(s.loadItemSuccess,(o,n)=>({...o,currentItem:n.item})),(0,i.on)(s.updateItemSuccess,(o,n)=>({...o})),(0,i.on)(s.decommissionateItemSuccess,(o,n)=>({...o})),(0,i.on)(s.loadFormModel,(o,n)=>({...o,formModel:null})),(0,i.on)(s.loadFormModelSuccess,(o,n)=>({...o,formModel:n.formModel})),(0,i.on)(s.resetSearch,(o,n)=>({...o,searchModel:{}})),(0,i.on)(s.search,(o,n)=>({...o,searchModel:n.searchModel})),(0,i.on)(s.changePage,(o,n)=>({...o,page:n.page})),(0,i.on)(s.changePageSize,(o,n)=>({...o,pageSize:n.pageSize})),(0,i.on)(s.setError,(o,n)=>({...o,errors:n.errors})),(0,i.on)(s.resetError,(o,n)=>({...o,errors:null})),(0,i.on)(s.resetErrorField,(o,n)=>{let t={};return null!==o.errors&&Object.entries(o.errors).forEach(([r,l])=>{r!==n.fieldName&&(t[`${r}`]=l)}),{...o,errors:t}})),I=(0,i.ZF)("employe-bureaux");var ge=a(2460),E=a(6328),be=a(9026),x=a(7398),M=a(6306),D=a(9397),Ce=a(1631),y=a(6063),Ee=a(9862),b=a(2096);const xe=(0,i.P1)(I,o=>o.items),z=(0,i.P1)(I,o=>o.currentItem),N=(0,i.P1)(I,o=>o.formModel),Ze=(0,i.P1)(I,o=>o.searchModel),G=(0,i.P1)(I,o=>o.page),R=(0,i.P1)(I,o=>o.pageSize),Te=(0,i.P1)(I,o=>o.totalElement),Ae=(0,i.P1)(I,o=>o.errors);var Be=a(4664),Ie=a(3186),e=a(9468),ve=a(1946),Me=a(9989);let q=(()=>{class o extends Me.v{getResourceBasePath(){return`${ve.y}/affectation-employe-bureau`}finAffectation(t,r){return this.http.post(`${this.url}/${this.getResourceBasePath()}/fin-affectation/${t}`,r)}static#e=this.\u0275fac=function(){let t;return function(l){return(t||(t=e.n5z(o)))(l||o)}}();static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac})}return o})();var Se=a(6366),J=a(797);let Fe=(()=>{class o{constructor(t,r,l,f,Z,H){this.affectationEmployeBureauService=t,this.authService=r,this.actions$=l,this.router=f,this.modalService=Z,this.store=H,this.loadItems$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.loadItems),(0,ge.M)(this.store.select(G),this.store.select(R),this.store.select(Ze)),(0,E.b)(([d,_,O,k])=>(console.log(_),this.store.dispatch((0,y.Q)()),(0,be.$)(this.affectationEmployeBureauService.getAllWithPagination(_,O,k),this.affectationEmployeBureauService.count(k)).pipe((0,x.U)(([S,Kt])=>(this.store.dispatch((0,y.Z)()),s.loadItemsSuccess({items:S,totalElement:Kt}))),(0,M.K)(S=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:S})))))))),{dispatch:!0}),this.createItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.createItem),(0,E.b)(d=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeBureauService.add(d.item).pipe((0,D.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Employ\xe9 Affect\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-bureau")}),(0,x.U)(_=>s.createItemSuccess({item:_})),(0,M.K)(_=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.loadItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.loadItem),(0,Ce.z)(d=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeBureauService.findById(d.id).pipe((0,x.U)(_=>(this.store.dispatch((0,y.Z)()),s.loadItemSuccess({item:_}))),(0,M.K)(_=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.deleteItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.deleteItem),(0,E.b)(d=>this.affectationEmployeBureauService.delete(d.item.id,d.item)),(0,D.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Affectation supprim\xe9e avec succ\xe8s"})}),(0,x.U)(()=>s.loadItems()),(0,M.K)(d=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:d}))))),{dispatch:!0}),this.updateItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.updateItem),(0,E.b)(d=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeBureauService.update(d.id,d.item).pipe((0,D.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Affectation Employ\xe9 modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-bureau")}),(0,x.U)(_=>s.updateItemSuccess({item:_})),(0,M.K)(_=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.decommissionateItem$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.decommissionateItem),(0,E.b)(d=>(this.store.dispatch((0,y.Q)()),this.affectationEmployeBureauService.finAffectation(d.id,d.item).pipe((0,D.b)(()=>{this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"D\xe9saffectation de l'Employ\xe9 effectu\xe9e avec succ\xe8s"}),this.router.navigateByUrl("administration/affectation-employe-bureau")}),(0,x.U)(_=>s.decommissionateItemSuccess({item:_})),(0,M.K)(_=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:_})))))))),{dispatch:!0}),this.loadFormModel$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.loadFormModel),(0,E.b)(()=>this.affectationEmployeBureauService.getFormModel()),(0,x.U)(d=>s.loadFormModelSuccess({formModel:d})),(0,M.K)(d=>(this.store.dispatch((0,y.Z)()),(0,b.of)(s.setError({errors:d})))))),this.resetSearch$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.resetSearch),(0,E.b)(()=>(0,b.of)(s.changePage({page:1}))))),this.search$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.search),(0,E.b)(()=>(0,b.of)(s.changePage({page:1}))))),this.changePage$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.changePage),(0,x.U)(d=>s.loadItems()))),this.changePageSize$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.changePageSize),(0,E.b)(()=>(0,b.of)(s.changePage({page:1}))))),this.handleError$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(s.setError),(0,Be.w)(d=>{if(this.store.dispatch((0,y.Q)()),d.errors instanceof Ee.UA){if(422===d.errors.status){let _="",O=0;for(const[k,S]of Object.entries(d.errors.error))_+=0===O?S:"\n"+S,O++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:_})}if(403===d.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===d.errors.status){let _="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,y.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:_}),(0,b.of)(Ie.jM())}}return this.store.dispatch((0,y.Z)()),(0,b.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(r){return new(r||o)(e.LFG(q),e.LFG(Se.e),e.LFG(u.eX),e.LFG(g.F0),e.LFG(J.Z),e.LFG(i.yh))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac})}return o})();var Pe=a(1227),c=a(95);let L=(()=>{class o{constructor(){}createForm(t,r){return new c.cw({libelle:new c.NI(t.libelle,{nonNullable:!0,validators:[c.kI.required]}),description:new c.NI(t.description),batiment:new c.NI(t.batiment),site:new c.NI(t.site),entreprise:new c.NI(t.enteprise),filiale:new c.NI(t.filiale),nomBureau:new c.NI(t.nomBureau),nomEmploye:new c.NI(t.nomEmploye),matricule:new c.NI(t.matricule),employe:new c.NI(t.employe,{nonNullable:!0,validators:[c.kI.required]}),bureau:new c.NI(t.bureau,{nonNullable:!0,validators:[c.kI.required]}),motifFinAffectation:new c.NI(t.motifFinAffectation,{nonNullable:"DESAFFECT"===r,validators:[c.kI.required]}),utilisateurModification:new c.NI(t.utilisateurModification),utilisateurCreation:new c.NI(t.utilisateurCreation),dateCreation:new c.NI(t.dateCreation),dateDerniereModification:new c.NI(t.dateDerniereModification),dateDebutAffectation:new c.NI(t.dateDebutAffectation),dateFinAffectation:new c.NI(t.dateFinAffectation)})}createSearchForm(){return new c.cw({libelle:new c.NI("",{nonNullable:!0,validators:[c.kI.required]}),description:new c.NI("",{nonNullable:!0,validators:[c.kI.required]})})}static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac})}return o})();var De=a(2572),Ne=a(4849),W=a(3849),Le=a(7251),Ue=a(166),Oe=a(6327),$e=a(8564),we=a(8223),Je=a(602),Qe=a(1469),Ye=a(6326),j=a(8346),V=a(1171),X=a(547),U=a(362);function Ke(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"R\xe9f\xe9rence"),e.qZA())}function He(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.refSys)}}function ke(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Libell\xe9"),e.qZA())}function ze(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.libelle)}}function Ge(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Description"),e.qZA())}function Re(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.description)}}function qe(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Employ\xe9"),e.qZA())}function We(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.employe.matricule)}}function je(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Bureau"),e.qZA())}function Ve(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.bureau.code)}}function Xe(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Date D\xe9but d'Affectation"),e.qZA())}function et(o,n){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dateDebutAffectation,"dd/MM/y \xe0 HH:mm:ss"))}}function tt(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Motif Fin Affectation"),e.qZA())}function ot(o,n){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.motifFinAffectation)}}function rt(o,n){1&o&&(e.TgZ(0,"th",34),e._uU(1,"Date Fin d'Affectation"),e.qZA())}function it(o,n){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.dateFinAffectation,"dd/MM/y \xe0 HH:mm:ss"))}}function nt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"table",22),e.NdJ("itemSelected",function(l){e.CHM(t);const f=e.oxw(2);return e.KtG(f.itemSelected(l))}),e.ynx(1,23),e.YNc(2,Ke,2,0,"th",24),e.YNc(3,He,2,1,"td",25),e.BQk(),e.ynx(4,26),e.YNc(5,ke,2,0,"th",24),e.YNc(6,ze,2,1,"td",25),e.BQk(),e.ynx(7,27),e.YNc(8,Ge,2,0,"th",24),e.YNc(9,Re,2,1,"td",25),e.BQk(),e.ynx(10,28),e.YNc(11,qe,2,0,"th",24),e.YNc(12,We,2,1,"td",25),e.BQk(),e.ynx(13,29),e.YNc(14,je,2,0,"th",24),e.YNc(15,Ve,2,1,"td",25),e.BQk(),e.ynx(16,30),e.YNc(17,Xe,2,0,"th",24),e.YNc(18,et,3,4,"td",31),e.BQk(),e.ynx(19,32),e.YNc(20,tt,2,0,"th",24),e.YNc(21,ot,2,1,"td",25),e.BQk(),e.ynx(22,33),e.YNc(23,rt,2,0,"th",24),e.YNc(24,it,3,4,"td",31),e.BQk(),e.qZA()}if(2&o){const t=n.ngIf,r=e.oxw(2);e.Q6J("items",t)("headers",r.headerTable)("selectable",!0)}}function at(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.refreshButtonClicked())})("pageSelected",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.pageSelected(l))})("pageSizeChange",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.pageSizeChange(l))})("closeButtonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e.TgZ(7,"div",10)(8,"div",11)(9,"div",6),e._UZ(10,"app-form-label",12),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-custom-textfield",13),e.qZA()()(),e.TgZ(13,"div",14)(14,"app-custom-button",15),e.NdJ("buttonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.addButtonClicked())}),e.qZA(),e.TgZ(15,"app-custom-button",16),e.NdJ("buttonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.desaffectButtonClicked())}),e.qZA()(),e.TgZ(16,"div",17),e._UZ(17,"app-custom-button",18),e.TgZ(18,"app-print-button",19),e.NdJ("printButtonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.printButtonClicked())}),e.qZA()(),e.TgZ(19,"div",20),e.YNc(20,nt,25,3,"table",21),e.ALo(21,"async"),e.qZA()()}if(2&o){const t=n.ngIf,r=e.oxw();e.Q6J("itemSelected",r.isItemSelected())("pageSize",t.pageSize)("currentPage",t.page)("totalElements",t.totalElement),e.xp6(1),e.Q6J("formGroup",r.searchForm),e.xp6(6),e.Q6J("formGroup",r.searchForm),e.xp6(8),e.Q6J("disabled",!r.isItemSelected()),e.xp6(5),e.Q6J("ngIf",e.lcZ(21,8,r.items$))}}(0,m.qS)(Pe.Z,"fr-Fr");let st=(()=>{class o{constructor(t,r,l,f){this.router=t,this.modalService=r,this.store=l,this.aebFormService=f,this.headerTable=["R\xe9f\xe9rence","Lib\xe9ll\xe9","Description","Employ\xe9","Bureau","Date D\xe9but d'Affectation","Motif Fin Affectation","Date Fin d'Affectation"],this.items$=this.store.select(xe),this.page$=this.store.select(G),this.pageSize$=this.store.select(R),this.totalElement$=this.store.select(Te),this.data$=(0,De.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,x.U)(([Z,H,d])=>({page:Z,pageSize:H,totalElement:d}))),this.selectedItem=null}ngOnInit(){this.searchForm=this.aebFormService.createSearchForm(),this.store.dispatch(s.loadItems())}addButtonClicked(){this.router.navigate(["administration","affectation-employe-bureau","add"])}editButtonClicked(){const t=this.selectedItem?.id;t&&(this.store.dispatch(s.resetItem()),this.router.navigate(["administration","affectation-employe-bureau","edit",t]))}desaffectButtonClicked(){const t=this.selectedItem?.id;t&&(this.store.dispatch(s.resetItem()),this.router.navigate(["administration","affectation-employe-bureau","desaffect",t]))}deleteButtonClicked(){const t=this.selectedItem;t&&this.modalService.openComponent(Ne.n,{size:"md",otherclass:"custom-modal-height"}).afterClosed.subscribe(r=>{r&&"yes"===r&&this.store.dispatch(s.deleteItem({item:t}))})}itemSelected(t){this.selectedItem=t}pageSelected(t){this.store.dispatch(s.changePage({page:t}))}pageSizeChange(t){this.store.dispatch(s.changePageSize({pageSize:t}))}closeButtonClicked(){this.router.navigate(["administration"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(s.resetSearch())}searchButtonClicked(){this.store.dispatch(s.search({searchModel:this.searchForm.value}))}printButtonClicked(){}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(g.F0),e.Y36(J.Z),e.Y36(i.yh),e.Y36(L))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employe-bureau-list"]],features:[e._Bn([L,{provide:e.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliations","pathLevelTwo","Affectation Employ\xe9 Bureau","pathLevelThree","Liste"],["title","Liste des Affectations des Employ\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Affectations des Employ\xe9s",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","libelle"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Description"],["placeholder","","otherclass","item-input","formControlName","description"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Ajouter",1,"me-1",3,"buttonClicked"],["icon","icon-check btn-icon-delete","title","D\xe9saffecter",3,"disabled","buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","text-start",4,"appCellDefTemplate"],["appCellDef","Lib\xe9ll\xe9"],["appCellDef","Description"],["appCellDef","Employ\xe9"],["appCellDef","Bureau"],["appCellDef","Date D\xe9but d'Affectation"],["app-cell-def-template","",4,"appCellDefTemplate"],["appCellDef","Motif Fin Affectation"],["appCellDef","Date Fin d'Affectation"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"text-start"],["app-cell-def-template",""]],template:function(r,l){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,at,22,10,"app-crud-list",2),e.ALo(3,"async")),2&r&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,l.data$)))},dependencies:[m.O5,W.L,c.JJ,c.JL,c.sg,c.u,Le._,Ue.x,Oe.N,$e.D,we.h,Je.u,Qe.O,Ye.q,j.W,V.h,X.Z,U.V,m.Ov,m.uU],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return o})();var Q=a(1239),Y=a(7394),lt=a(8819),ct=a(9543),pt=a(7426),mt=a(9887),ut=a(5973),dt=a(4944),ft=a(2093),_t=a(6136),ht=a(8513),yt=a(586),gt=a(1327),bt=a(5188);function Ct(o,n){1&o&&(e.TgZ(0,"th",57),e._uU(1,"Code"),e.qZA())}function Et(o,n){if(1&o&&(e.TgZ(0,"td",58),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function xt(o,n){1&o&&(e.TgZ(0,"th",57),e._uU(1,"Niveau"),e.qZA())}function Zt(o,n){if(1&o&&(e.TgZ(0,"td",58),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.niveau," ")}}function Tt(o,n){1&o&&(e.TgZ(0,"table",52),e.ynx(1,53),e.YNc(2,Ct,2,0,"th",54),e.YNc(3,Et,2,1,"td",55),e.BQk(),e.ynx(4,56),e.YNc(5,xt,2,0,"th",54),e.YNc(6,Zt,2,1,"td",55),e.BQk(),e.qZA())}function At(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-field-error-wrapper",19),e.NdJ("resetField",function(l){e.CHM(t);const f=e.oxw(2);return e.KtG(f.resetBackendError(l))}),e.TgZ(1,"app-item-search",50),e.YNc(2,Tt,7,0,"table",51),e.qZA()()}if(2&o){const t=n.ngIf,r=e.oxw(2);e.Q6J("errors",r.errors),e.xp6(1),e.Q6J("headers",r.bureauSelectItemsHeader)("items",t.bureaux)("criterias",r.bureauItemCritterias)("itemDescription",r.bureauItemDescription)}}function Bt(o,n){1&o&&(e.TgZ(0,"th",57),e._uU(1,"Matricule"),e.qZA())}function It(o,n){if(1&o&&(e.TgZ(0,"td",58),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.matricule," ")}}function vt(o,n){1&o&&(e.TgZ(0,"th",57),e._uU(1,"Num\xe9ro S\xe9curit\xe9 Sociale "),e.qZA())}function Mt(o,n){if(1&o&&(e.TgZ(0,"td",58),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.numeroSecuriteSocial," ")}}function St(o,n){1&o&&(e.TgZ(0,"th",57),e._uU(1,"Adresse Mail"),e.qZA())}function Ft(o,n){if(1&o&&(e.TgZ(0,"td",58),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.adresseMail," ")}}function Pt(o,n){1&o&&(e.TgZ(0,"table",52),e.ynx(1,60),e.YNc(2,Bt,2,0,"th",54),e.YNc(3,It,2,1,"td",55),e.BQk(),e.ynx(4,61),e.YNc(5,vt,2,0,"th",54),e.YNc(6,Mt,2,1,"td",55),e.BQk(),e.ynx(7,62),e.YNc(8,St,2,0,"th",54),e.YNc(9,Ft,2,1,"td",55),e.BQk(),e.qZA())}function Dt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-field-error-wrapper",19),e.NdJ("resetField",function(l){e.CHM(t);const f=e.oxw(2);return e.KtG(f.resetBackendError(l))}),e.TgZ(1,"app-item-search",59),e.YNc(2,Pt,10,0,"table",51),e.qZA()()}if(2&o){const t=n.ngIf,r=e.oxw(2);e.Q6J("errors",r.errors),e.xp6(1),e.Q6J("headers",r.employeSelectItemsHeader)("items",t.employes)("criterias",r.employeItemCritterias)("itemDescription",r.employeItemDescription)}}function Nt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-panel-custom",63)(1,"div",5)(2,"div",64),e._UZ(3,"app-form-label",65),e.TgZ(4,"div",8)(5,"app-field-error-wrapper",19),e.NdJ("resetField",function(l){e.CHM(t);const f=e.oxw(2);return e.KtG(f.resetBackendError(l))}),e._UZ(6,"textarea",66),e.qZA()()()()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("errors",t.errors)}}function Lt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-primary-button",67),e.NdJ("buttonClicked",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.submitForm())}),e.qZA()}}function Ut(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),e._UZ(5,"app-form-label",7),e.TgZ(6,"div",8),e._UZ(7,"app-custom-textfield",9),e.qZA()(),e.TgZ(8,"div",6),e._UZ(9,"app-form-label",10),e.TgZ(10,"div",11),e._UZ(11,"app-custom-textfield",12),e.qZA()()(),e.TgZ(12,"div",5)(13,"div",6),e._UZ(14,"app-form-label",13),e.TgZ(15,"div",8),e._UZ(16,"app-custom-textfield",14),e.qZA()(),e.TgZ(17,"div",6),e._UZ(18,"app-form-label",15),e.TgZ(19,"div",11),e._UZ(20,"app-custom-textfield",16),e.qZA()()()(),e.TgZ(21,"app-panel-custom",17)(22,"div",5)(23,"div",6),e._UZ(24,"app-form-label",18),e.TgZ(25,"div",8)(26,"app-field-error-wrapper",19),e.NdJ("resetField",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.resetBackendError(l))}),e._UZ(27,"app-custom-textfield",20),e.qZA()()(),e.TgZ(28,"div",21),e._UZ(29,"app-form-label",22),e.TgZ(30,"div",8),e._UZ(31,"app-custom-textfield",23),e.qZA()(),e.TgZ(32,"div",24),e._UZ(33,"app-form-label",25),e.TgZ(34,"div",8),e._UZ(35,"app-custom-textfield",26),e.qZA()()(),e.TgZ(36,"div",5)(37,"div",6),e._UZ(38,"app-form-label",27),e.TgZ(39,"div",8),e._UZ(40,"app-custom-textfield",28),e.qZA()(),e.TgZ(41,"div",21),e._UZ(42,"app-form-label",29),e.TgZ(43,"div",8),e._UZ(44,"app-custom-textfield",30),e.qZA(),e.YNc(45,At,3,5,"app-field-error-wrapper",31),e.ALo(46,"async"),e.qZA()(),e.TgZ(47,"div",5)(48,"div",6),e._UZ(49,"app-form-label",32),e.TgZ(50,"div",8),e._UZ(51,"app-custom-textfield",33),e.qZA()(),e.TgZ(52,"div",24),e._UZ(53,"app-form-label",34),e.TgZ(54,"div",8),e._UZ(55,"app-custom-textfield",35),e.qZA(),e.YNc(56,Dt,3,5,"app-field-error-wrapper",31),e.ALo(57,"async"),e.qZA()()(),e.TgZ(58,"app-panel-custom",36)(59,"div",37)(60,"div",38)(61,"div",39),e._UZ(62,"app-form-label",40),e.TgZ(63,"div",8)(64,"app-field-error-wrapper",19),e.NdJ("resetField",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.resetBackendError(l))}),e._UZ(65,"app-custom-textfield",41),e.qZA()()()(),e.TgZ(66,"div",42)(67,"div",43),e._UZ(68,"app-form-label",44),e.TgZ(69,"div",8),e._UZ(70,"textarea",45),e.qZA()()()()(),e.YNc(71,Nt,7,1,"app-panel-custom",46),e.TgZ(72,"div",47),e.YNc(73,Lt,1,0,"app-primary-button",48),e.TgZ(74,"app-cancel-button",49),e.NdJ("buttonClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.returnToList())}),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("errors",t.errors),e.xp6(1),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(1),e.Q6J("ngIf",e.lcZ(46,18,t.formModel$)),e.xp6(6),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(1),e.Q6J("ngIf",e.lcZ(57,20,t.formModel$)),e.xp6(8),e.Q6J("errors",t.errors),e.xp6(7),e.Q6J("ngIf",!t.isAffect()),e.xp6(2),e.Q6J("ngIf",t.isDesaffected())}}let K=(()=>{class o{constructor(t,r,l,f){this.formService=t,this.modalService=r,this.router=l,this.store=f,this.formModel$=this.store.select(N),this.errors=null,this.formSubmitted=new e.vpe,this.employeSelectItemsHeader=["Matricule","Num\xe9ro S\xe9curit\xe9 Sociale","Adresse Mail"],this.employeItemDescription=Z=>Z.matricule,this.employeItemCritterias={matricule:"Matricule",numeroSecuriteSocial:"Num\xe9ro S\xe9curit\xe9 Sociale",adresseMail:"Adresse Mail"},this.bureauSelectItemsHeader=["Code","Niveau"],this.bureauItemDescription=Z=>Z.code,this.bureauItemCritterias={code:"Code",niveau:"Niveau"},this.subscription=new Y.w0}ngOnInit(){this.store.select(Ae).subscribe(t=>{this.errors=t}),this.store.dispatch(s.resetError()),this.store.dispatch(s.loadFormModel()),this.form=this.formService.createForm(this.affectationEmployeBureau,this.affectationType),this.form.get("bureau")?.valueChanges.subscribe(t=>{t&&(this.form.get("entreprise")?.setValue(t.batiment.site.filiale.entreprise.nomLong),this.form.get("filiale")?.setValue(t.batiment.site.filiale.nomLong),this.form.get("batiment")?.setValue(t.batiment.code),this.form.get("site")?.setValue(t.batiment.site.nomLong),this.form.get("nomBureau")?.setValue(t.code))}),this.form.get("employe")?.valueChanges.subscribe(t=>{t&&(this.form.get("matricule")?.setValue(t.matricule),this.form.get("nomEmploye")?.setValue(t.user.firstName+" "+t.user.lastName))})}isAffect(){return"AFFECT"===this.affectationType}isDesaffected(){return console.log(this.affectationEmployeBureau.motifFinAffectation),!this.affectationEmployeBureau.motifFinAffectation}ngOnDestroy(){this.subscription.unsubscribe()}submitForm(){this.formSubmitted.emit(this.form.value)}returnToList(){this.router.navigateByUrl("administration/affectation-employe-bureau")}resetBackendError(t){this.store.dispatch(s.resetErrorField({fieldName:t}))}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(L),e.Y36(J.Z),e.Y36(g.F0),e.Y36(i.yh))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employe-bureau-form"]],inputs:{affectationEmployeBureau:"affectationEmployeBureau",affectationType:"affectationType"},outputs:{formSubmitted:"formSubmitted"},features:[e._Bn([L])],decls:2,vars:1,consts:[[1,"pe-3","ps-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Historique"],[1,"general-info"],[1,"input-container","col-4"],["title","Date Cr\xe9ation",1,"w-form","text-end"],[1,"input-textfield-container","col"],["otherclass","custom-style-form","placeholder","","formControlName","dateCreation",3,"readonly"],["title","Cr\xe9\xe9 Par",1,"col-4","text-end"],[1,"input-textfield-container","col-7"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurCreation",3,"readonly"],["title","Date Derni\xe8re Modif",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","dateDerniereModification",3,"readonly"],["title","Modifi\xe9 Par",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","utilisateurModification",3,"readonly"],["icon","fa fa-angle-right","title","Informations sur le Bureau & l'Employ\xe9"],["title","Entreprise",1,"w-form","text-end"],[3,"errors","resetField"],["otherclass","custom-style-form","placeholder","","formControlName","entreprise",3,"readonly"],[1,"input-container","col-4","ms-0","me-0"],["title","Filiale",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","filiale",3,"readonly"],[1,"input-container","col-4","ms-0"],["title","B\xe2timent",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","batiment",3,"readonly"],["title","Site",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","site",3,"readonly"],["title","Bureau",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","nomBureau",3,"readonly"],[3,"errors","resetField",4,"ngIf"],["title","Matricule",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","matricule",3,"readonly"],["title","Noms Employ\xe9",1,"col-4","text-end"],["otherclass","custom-style-form","placeholder","","formControlName","nomEmploye",3,"readonly"],["icon","fa fa-angle-right","title","Informations g\xe9n\xe9rales"],[1,"general-info","flex-column"],[1,"col-12","mb-1"],[1,"input-container","col-12"],["title","Libell\xe9",1,"w-form","text-end","me-1"],["otherclass","custom-style-form emphase","placeholder","","formControlName","libelle"],[1,"col-12"],[1,"input-container","col-12","d-flex","align-items-center"],["title","Description",1,"w-form","text-end","me-1"],["placeholder","","formControlName","description",1,"custom-style-textarea","emphase"],["icon","fa fa-angle-right","title","Fin de l'Affectation",4,"ngIf"],[1,"form-actions"],["class","me-1","title","Enregistrer",3,"buttonClicked",4,"ngIf"],["otherclass","custom-cancel-button","title","Annuler",3,"buttonClicked"],["otherclass","custom-style-item-selection-form col","formControlName","bureau",3,"headers","items","criterias","itemDescription"],["app-item-search-template-attribute","",4,"appItemSearchTemplate"],["app-item-search-template-attribute",""],["appItemSearchCellDef","Code"],["app-item-search-header-def-template","","class","custom-head",4,"appItemSearchHeaderDefTemplate"],["app-item-search-cell-def-template","","class","custom-head",4,"appItemSearchCellDefTemplate"],["appItemSearchCellDef","Niveau"],["app-item-search-header-def-template","",1,"custom-head"],["app-item-search-cell-def-template","",1,"custom-head"],["otherclass","custom-style-item-selection-form col","formControlName","employe",3,"headers","items","criterias","itemDescription"],["appItemSearchCellDef","Matricule"],["appItemSearchCellDef","Num\xe9ro S\xe9curit\xe9 Sociale"],["appItemSearchCellDef","Adresse Mail"],["icon","fa fa-angle-right","title","Fin de l'Affectation"],[1,"input-container","col-8","d-flex","align-items-center"],["title","Motif",1,"col-2","text-end"],["placeholder","","formControlName","motifFinAffectation",1,"custom-style-textarea","emphase"],["title","Enregistrer",1,"me-1",3,"buttonClicked"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0),e.YNc(1,Ut,75,22,"form",1),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",l.form))},dependencies:[m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,lt.F,j.W,V.h,ct.C,X.Z,pt.p,mt.l,ut.v,dt.K,ft.d,_t.D,ht.T,yt.o,gt.g,bt.K,m.Ov],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:3px 0}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex}.input-container[_ngcontent-%COMP%] + .input-container[_ngcontent-%COMP%]{//margin-left: 32px}.input-textfield-container[_ngcontent-%COMP%]{//width: 250px;margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return o})();function $t(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-employe-bureau-form",3),e.NdJ("formSubmitted",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.editAffectation(l))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("affectationEmployeBureau",t.affectationEmployeBureauDto)("affectationType",t.affectationType)}}function Jt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-employe-bureau-form",3),e.NdJ("formSubmitted",function(l){e.CHM(t);const f=e.oxw();return e.KtG(f.finAffectation(l))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("affectationEmployeBureau",t.affectationEmployeBureauDto)("affectationType",t.affectationType)}}const Qt=[{path:"",component:st,pathMatch:"prefix"},{path:"add",component:(()=>{class o{constructor(t){this.store=t,this.formModel$=this.store.select(N),this.affectationType=Q.X.AFFECT,this.affectationEmployeBureau={id:"",libelle:"",description:"",enteprise:"",filiale:"",batiment:"",site:"",nomBureau:"",nomEmploye:"",matricule:"",motifFinAffectation:"",bureau:null,employe:null,dateDerniereModification:null,dateCreation:null,dateDebutAffectation:null,dateFinAffectation:null,utilisateurCreation:"",utilisateurModification:""}}ngOnInit(){this.store.dispatch(s.resetItem()),this.store.dispatch(s.resetFormModel())}addAffectation(t){this.store.dispatch(s.createItem({item:{libelle:t.libelle,description:t.description,bureau:t.bureau,employe:t.employe}}))}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(i.yh))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employe-bureau-add"]],decls:3,vars:2,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliation","pathLevelTwo","Affectation Employ\xe9 Bureau","pathLevelThree","Ajouter"],[3,"affectationEmployeBureau","affectationType","formSubmitted"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.TgZ(2,"app-employe-bureau-form",2),e.NdJ("formSubmitted",function(Z){return l.addAffectation(Z)}),e.qZA()),2&r&&(e.xp6(2),e.Q6J("affectationEmployeBureau",l.affectationEmployeBureau)("affectationType",l.affectationType))},dependencies:[U.V,K],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})(),pathMatch:"prefix"},{path:"edit/:id",component:(()=>{class o{constructor(t,r){this.store=t,this.route=r,this.formModel$=this.store.select(N),this.affectationEmployeBureau$=this.store.select(z),this.affectationEmployeBureauDto=null,this.affectationType=Q.X.AFFECT,this.subscription=new Y.w0}ngOnInit(){this.store.dispatch(s.resetFormModel()),this.subscription=this.route.params.subscribe(t=>{this.id=t.id,this.id&&this.store.dispatch(s.loadItem({id:this.id}))}),this.affectationEmployeBureau$.subscribe(t=>{null!==t&&(this.affectationEmployeBureauDto={id:t.id,libelle:t.libelle,description:t.description,enteprise:null===t.bureau?"":t.bureau.batiment.site.filiale.entreprise.nomLong,filiale:null===t.bureau?"":t.bureau.batiment.site.filiale.nomLong,batiment:null===t.bureau?"":t.bureau.batiment.code,site:null===t.bureau?"":t.bureau.batiment.site.nomLong,nomBureau:null===t.bureau?"":t.bureau.code,nomEmploye:null===t.employe?"":t.employe.user.firstName+" "+t.employe.user.lastName,matricule:null===t.employe?"":t.employe.matricule,motifFinAffectation:"",bureau:null===t.bureau?null:t.bureau,employe:null===t.employe?null:t.employe,dateDerniereModification:null===t.dateDerniereModification?"":this.formatDate(t.dateDerniereModification),dateCreation:null===t.dateCreation?"":this.formatDate(t.dateCreation),dateDebutAffectation:null===t.dateDebutAffectation?"":this.formatDate(t.dateDebutAffectation),dateFinAffectation:null===t.dateFinAffectation?"":this.formatDate(t.dateFinAffectation),utilisateurCreation:t.utilisateurCreation,utilisateurModification:t.utilisateurModification})})}formatDate(t){if(t){const r=new Date(t);return r.toLocaleDateString()+" \xe0 "+r.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}editAffectation(t){const r={id:t.id,libelle:t.libelle,description:t.description,employe:t.employe,bureau:t.bureau};this.store.dispatch(s.updateItem({id:Number(this.id),item:r}))}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(i.yh),e.Y36(g.gz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employe-bureau-edit"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliation","pathLevelTwo","Affectation Employ\xe9 Bureau","pathLevelThree","Editer"],[3,"affectationEmployeBureau","affectationType","formSubmitted",4,"ngIf"],[3,"affectationEmployeBureau","affectationType","formSubmitted"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,$t,1,2,"app-employe-bureau-form",2)),2&r&&(e.xp6(2),e.Q6J("ngIf",l.affectationEmployeBureauDto))},dependencies:[m.O5,U.V,K],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})(),pathMatch:"prefix"},{path:"desaffect/:id",component:(()=>{class o{constructor(t,r){this.store=t,this.route=r,this.formModel$=this.store.select(N),this.affectationEmployeBureau$=this.store.select(z),this.affectationEmployeBureauDto=null,this.affectationType=Q.X.DESAFFECT,this.subscription=new Y.w0}ngOnInit(){this.store.dispatch(s.resetFormModel()),this.subscription=this.route.params.subscribe(t=>{this.id=t.id,this.id&&this.store.dispatch(s.loadItem({id:this.id}))}),this.affectationEmployeBureau$.subscribe(t=>{null!==t&&(this.affectationEmployeBureauDto={id:t.id,libelle:t.libelle,description:t.description,enteprise:null===t.bureau?"":t.bureau.batiment.site.filiale.entreprise.nomLong,filiale:null===t.bureau?"":t.bureau.batiment.site.filiale.nomLong,batiment:null===t.bureau?"":t.bureau.batiment.code,site:null===t.bureau?"":t.bureau.batiment.site.nomLong,nomBureau:null===t.bureau?"":t.bureau.code,nomEmploye:null===t.employe?"":t.employe.user.firstName+" "+t.employe.user.lastName,matricule:null===t.employe?"":t.employe.matricule,motifFinAffectation:t.motifFinAffectation,bureau:null===t.bureau?null:t.bureau,employe:null===t.employe?null:t.employe,dateDerniereModification:null===t.dateDerniereModification?"":this.formatDate(t.dateDerniereModification),dateCreation:null===t.dateCreation?"":this.formatDate(t.dateCreation),dateDebutAffectation:null===t.dateDebutAffectation?"":this.formatDate(t.dateDebutAffectation),dateFinAffectation:null===t.dateFinAffectation?"":this.formatDate(t.dateFinAffectation),utilisateurCreation:t.utilisateurCreation,utilisateurModification:t.utilisateurModification})})}formatDate(t){if(t){const r=new Date(t);return r.toLocaleDateString()+" \xe0 "+r.toLocaleTimeString()}return null}ngOnDestroy(){this.subscription.unsubscribe()}finAffectation(t){console.log(t);const r={id:t.id,libelle:t.libelle,description:t.description,employe:t.employe,bureau:t.bureau,motifFinAffectation:t.motifFinAffectation};this.store.dispatch(s.decommissionateItem({id:Number(this.id),item:r}))}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(i.yh),e.Y36(g.gz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-employe-bureau-desaffect"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Domiciliation","pathLevelTwo","Affectation Employ\xe9 Bureau","pathLevelThree","Fin d'affectation"],[3,"affectationEmployeBureau","affectationType","formSubmitted",4,"ngIf"],[3,"affectationEmployeBureau","affectationType","formSubmitted"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,Jt,1,2,"app-employe-bureau-form",2)),2&r&&(e.xp6(2),e.Q6J("ngIf",l.affectationEmployeBureauDto))},dependencies:[m.O5,U.V,K],styles:["[_nghost-%COMP%]{width:100%}"]})}return o})(),pathMatch:"prefix"}];let Yt=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({providers:[q],imports:[m.ez,W.L,i.Aw.forFeature("employe-bureaux",ye),u.sQ.forFeature(Fe),h.m,g.Bz.forChild(Qt)]})}return o})()},8819:($,T,a)=>{a.d(T,{F:()=>g});var m=a(9468);let g=(()=>{class i{constructor(){this.disabled=!1,this.buttonClicked=new m.vpe}emitButtonClicked(){this.buttonClicked.emit()}static#e=this.\u0275fac=function(p){return new(p||i)};static#t=this.\u0275cmp=m.Xpm({type:i,selectors:[["app-cancel-button"]],inputs:{title:"title",url:"url",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(p,A){1&p&&(m.TgZ(0,"button",0),m.NdJ("click",function(){return A.emitButtonClicked()}),m._uU(1),m.qZA()),2&p&&(m.Gre("cancel-button ",A.otherclass,""),m.Q6J("disabled",A.disabled),m.xp6(1),m.hij(" ",A.title,"\n"))},styles:[".cancel-button[_ngcontent-%COMP%]{color:#000;border:1px solid #6d7582;background-color:#fff;min-width:120px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:25px;padding:.75rem 0rem;border-radius:3px}"]})}return i})()},4849:($,T,a)=>{a.d(T,{n:()=>A});var m=a(1892),g=a(6814),i=a(8666),u=a(2463),h=a(9468),p=a(166);let A=(()=>{class C{constructor(v,B){this.modalData=v,this.modalRef=B}close(){this.modalRef.close(void 0)}confirmAction(){this.modalRef.close("yes")}static#e=this.\u0275fac=function(B){return new(B||C)(h.Y36(m.S),h.Y36(m.R))};static#t=this.\u0275cmp=h.Xpm({type:C,selectors:[["app-confirm-alert"]],standalone:!0,features:[h.jDz],decls:13,vars:0,consts:[[1,"alert-header","mb-3"],[1,"alert-header-title"],[1,"mb-0"],[1,"pe-3","ps-3","pt-0"],[1,"d-flex","align-items-center","p-2"],[1,"me-3"],["src","assets/images/warning.svg","width","45px","alt",""],[1,"text"],[1,"form-actions"],["otherclass","custom-cancel-button color-warning","title","Oui",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Fermer",3,"buttonClicked"]],template:function(B,P){1&B&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),h._uU(3,"Confirmation de Suppression"),h.qZA()()(),h.TgZ(4,"div",3)(5,"div",4)(6,"div",5),h._UZ(7,"img",6),h.qZA(),h.TgZ(8,"div",7),h._uU(9," Voulez-vous vraiment effectuer cette action ? "),h.qZA()(),h.TgZ(10,"div",8)(11,"app-custom-button",9),h.NdJ("buttonClicked",function(){return P.confirmAction()}),h.qZA(),h.TgZ(12,"app-custom-button",10),h.NdJ("buttonClicked",function(){return P.close()}),h.qZA()()())},dependencies:[g.ez,i.a,u.v,p.x],styles:[".general-info[_ngcontent-%COMP%]{display:flex;padding:5px 0;width:100%}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-textfield-container[_ngcontent-%COMP%]{margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}.alert-header[_ngcontent-%COMP%]{background-color:#ed6f25;color:#fff;padding:.5rem 1rem;display:flex;align-items:center}.alert-header-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.close-icon[_ngcontent-%COMP%]{cursor:pointer}.alert-header-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}input[type=file][_ngcontent-%COMP%]{font-size:13px}.circle-content-error[_ngcontent-%COMP%]{border-radius:50%;border:1px solid #ed6f25;color:#ed6f25;width:70px;height:70px;display:flex;align-items:center;justify-content:center}.circle-content-error[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.text[_ngcontent-%COMP%]{font-size:14px!important}"]})}return C})()},3849:($,T,a)=>{a.d(T,{L:()=>h});var m=a(9468),g=a(2463),i=a(6814),u=a(166);let h=(()=>{class p{constructor(){this.printButtonClicked=new m.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#e=this.\u0275fac=function(F){return new(F||p)};static#t=this.\u0275cmp=m.Xpm({type:p,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[m.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(F,v){1&F&&(m.TgZ(0,"app-custom-button",0),m.NdJ("buttonClicked",function(){return v.emitPrintButtonClicked()}),m.qZA())},dependencies:[i.ez,g.v,u.x],styles:["[_nghost-%COMP%]{display:block}"]})}return p})()}}]);