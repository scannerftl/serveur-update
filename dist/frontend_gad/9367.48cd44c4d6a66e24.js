(self.webpackChunkfrontend_gad=self.webpackChunkfrontend_gad||[]).push([[9367],{9367:(F,S,o)=>{"use strict";o.r(S),o.d(S,{EnvoiMaintenanceModule:()=>Bt});var u=o(6814),d=o(8281),e=o(9468),x=o(2572),E=o(7398),i=o(676);const l="Envoi Maintenance",C=(0,i.PH)(`[${l} API] Load All`),y=(0,i.PH)(`[${l} API] Load All Success`,(0,i.Ky)()),p=(0,i.PH)(`[${l} API] Create`,(0,i.Ky)()),m=(0,i.PH)(`[${l} API] Create Success`,(0,i.Ky)()),M=(0,i.PH)(`[${l} API] Load`,(0,i.Ky)()),h=(0,i.PH)(`[${l} API] Load Success`,(0,i.Ky)()),g=(0,i.PH)(`[${l} API] Create Error`,(0,i.Ky)()),q=(0,i.PH)(`[${l} API] Reset Error`),H=(0,i.PH)(`[${l} API] Reset Error Field`,(0,i.Ky)()),D=(0,i.PH)(`[${l} API] Reset`),K=(0,i.PH)(`[${l} API] Delete`,(0,i.Ky)()),N=(0,i.PH)(`[${l} API] Delete Success`,(0,i.Ky)()),s={loadItems:C,loadItemsSuccess:y,resetItem:D,createItem:p,createItemSuccess:m,loadItem:M,loadItemSuccess:h,updateItem:(0,i.PH)(`[${l} API] Update`,(0,i.Ky)()),updateItemSuccess:(0,i.PH)(`[${l} API] Update Success`,(0,i.Ky)()),deleteItem:K,deleteItemSuccess:N,setError:g,resetError:q,resetErrorField:H,loadFormModel:(0,i.PH)(`[${l} API] Load Form Model`),resetFormModel:(0,i.PH)(`[${l} API] Reset Form Model`),loadFormModelSuccess:(0,i.PH)(`[${l} API] Load Form Model Success`,(0,i.Ky)()),resetSearch:(0,i.PH)(`[${l} API] Reset Search`),search:(0,i.PH)(`[${l} API] Search`,(0,i.Ky)()),changePage:(0,i.PH)(`[${l} API] Change Page`,(0,i.Ky)()),changePageSize:(0,i.PH)(`[${l} API] Change Page Size`,(0,i.Ky)()),downloadFile:(0,i.PH)(`[${l} API] Download File`),downloadFileSuccess:(0,i.PH)(`[${l} API] Download File Success`)},Ee=(0,i.Lq)({formModel:null,searchModel:{},items:[],currentItem:null,page:1,pageSize:15,totalElement:0,errors:null},(0,i.on)(s.loadItemsSuccess,(t,a)=>(console.log(a.items),{...t,items:a.items,totalElement:a.totalElement})),(0,i.on)(s.resetItem,(t,a)=>({...t,currentItem:null})),(0,i.on)(s.createItemSuccess,(t,a)=>({...t})),(0,i.on)(s.deleteItemSuccess,(t,a)=>({...t})),(0,i.on)(s.loadItemSuccess,(t,a)=>({...t,currentItem:a.item})),(0,i.on)(s.updateItemSuccess,(t,a)=>({...t})),(0,i.on)(s.loadFormModel,(t,a)=>({...t,formModel:null})),(0,i.on)(s.loadFormModelSuccess,(t,a)=>({...t,formModel:a.formModel})),(0,i.on)(s.resetSearch,(t,a)=>({...t,searchModel:{}})),(0,i.on)(s.search,(t,a)=>({...t,searchModel:a.searchModel})),(0,i.on)(s.changePage,(t,a)=>({...t,page:a.page})),(0,i.on)(s.changePageSize,(t,a)=>({...t,pageSize:a.pageSize})),(0,i.on)(s.setError,(t,a)=>({...t,errors:a.errors})),(0,i.on)(s.resetError,(t,a)=>({...t,errors:null})),(0,i.on)(s.resetErrorField,(t,a)=>{let n={};return null!==t.errors&&Object.entries(t.errors).forEach(([r,c])=>{r!==a.fieldName&&(n[`${r}`]=c)}),{...t,errors:n}})),I=(0,i.ZF)("envoi-maintenances"),Me=(0,i.P1)(I,t=>t.items),Q=((0,i.P1)(I,t=>t.currentItem),(0,i.P1)(I,t=>t.formModel)),Te=(0,i.P1)(I,t=>t.searchModel),J=(0,i.P1)(I,t=>t.page),R=(0,i.P1)(I,t=>t.pageSize),xe=(0,i.P1)(I,t=>t.totalElement),Ze=(0,i.P1)(I,t=>t.errors);var b=o(95);let w=(()=>{class t{constructor(){}createForm(n){return new b.cw({libelle:new b.NI(n.libelle,{nonNullable:!0,validators:[b.kI.required]}),description:new b.NI(n.description),materiel:new b.NI(n.materiel)})}createSearchForm(){return new b.cw({libelle:new b.NI("",{nonNullable:!0,validators:[b.kI.required]}),description:new b.NI("",{nonNullable:!0,validators:[b.kI.required]})})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var z=o(3849),Se=o(7251),j=o(166),W=o(6327),X=o(8564),V=o(8223),ee=o(602),te=o(1469),ne=o(6326),ie=o(8346),oe=o(1171),ae=o(547),re=o(362);function ye(t,a){1&t&&(e.TgZ(0,"th",28),e._uU(1,"R\xe9f\xe9rence"),e.qZA())}function Ae(t,a){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.refSys)}}function Ie(t,a){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Libell\xe9"),e.qZA())}function Pe(t,a){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.libelle)}}function Fe(t,a){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Description"),e.qZA())}function Ue(t,a){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.description)}}function Le(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"table",21),e.NdJ("itemSelected",function(c){e.CHM(n);const Z=e.oxw(2);return e.KtG(Z.itemSelected(c))}),e.ynx(1,22),e.YNc(2,ye,2,0,"th",23),e.YNc(3,Ae,2,1,"td",24),e.BQk(),e.ynx(4,25),e.YNc(5,Ie,2,0,"th",26),e.YNc(6,Pe,2,1,"td",24),e.BQk(),e.ynx(7,27),e.YNc(8,Fe,2,0,"th",26),e.YNc(9,Ue,2,1,"td",24),e.BQk(),e.qZA()}if(2&t){const n=a.ngIf,r=e.oxw(2);e.Q6J("items",n)("headers",r.headerTable)("selectable",!0)}}function Be(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-crud-list",3),e.NdJ("searchButtonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.searchButtonClicked())})("refreshButtonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.refreshButtonClicked())})("pageSelected",function(c){e.CHM(n);const Z=e.oxw();return e.KtG(Z.pageSelected(c))})("pageSizeChange",function(c){e.CHM(n);const Z=e.oxw();return e.KtG(Z.pageSizeChange(c))})("closeButtonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.closeButtonClicked())}),e.TgZ(1,"div",4)(2,"div",5)(3,"div",6),e._UZ(4,"app-form-label",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-textfield",9),e.qZA()()(),e.TgZ(7,"div",10)(8,"div",11)(9,"div",6),e._UZ(10,"app-form-label",12),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-custom-textfield",13),e.qZA()()(),e.TgZ(13,"div",14)(14,"app-custom-button",15),e.NdJ("buttonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.addButtonClicked())}),e.qZA()(),e.TgZ(15,"div",16),e._UZ(16,"app-custom-button",17),e.TgZ(17,"app-print-button",18),e.NdJ("printButtonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.printButtonClicked())}),e.qZA()(),e.TgZ(18,"div",19),e.YNc(19,Le,10,3,"table",20),e.ALo(20,"async"),e.qZA()()}if(2&t){const n=a.ngIf,r=e.oxw();e.Q6J("itemSelected",r.isItemSelected())("pageSize",n.pageSize)("currentPage",n.page)("totalElements",n.totalElement),e.xp6(1),e.Q6J("formGroup",r.searchForm),e.xp6(6),e.Q6J("formGroup",r.searchForm),e.xp6(12),e.Q6J("ngIf",e.lcZ(20,7,r.items$))}}let $e=(()=>{class t{constructor(n,r,c,Z){this.router=n,this.store=r,this.envoiMaintenanceFormService=c,this.headerTable=["R\xe9f\xe9rence","Libell\xe9","Description"],this.items$=this.store.select(Me),this.page$=this.store.select(J),this.pageSize$=this.store.select(R),this.totalElement$=this.store.select(xe),this.data$=(0,x.a)([this.page$,this.pageSize$,this.totalElement$]).pipe((0,E.U)(([B,Y,v])=>({page:B,pageSize:Y,totalElement:v}))),this.selectedItem=null,this.dateTest=new Date}ngOnInit(){this.searchForm=this.envoiMaintenanceFormService.createSearchForm(),this.store.dispatch(s.loadItems())}addButtonClicked(){this.router.navigate(["parc-informatique","envoi-maintenance","add"])}editButtonClicked(){const n=this.selectedItem?.id;n&&(this.store.dispatch(s.resetItem()),this.router.navigate(["parc-informatique","envoi-maintenance","edit",n]))}deleteButtonClicked(){const n=this.selectedItem;n&&this.store.dispatch(s.deleteItem({item:n}))}itemSelected(n){this.selectedItem=n}pageSelected(n){this.store.dispatch(s.changePage({page:n}))}pageSizeChange(n){this.store.dispatch(s.changePageSize({pageSize:n}))}closeButtonClicked(){this.router.navigate(["parc-informatique"])}isItemSelected(){return null!==this.selectedItem}refreshButtonClicked(){this.searchForm.reset(),this.store.dispatch(s.resetSearch())}searchButtonClicked(){this.store.dispatch(s.search({searchModel:this.searchForm.value}))}printButtonClicked(){this.store.dispatch(s.downloadFile())}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(d.F0),e.Y36(i.yh),e.Y36(w),e.Y36(e.soG))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-envoi-maintenance-list"]],features:[e._Bn([w,{provide:e.soG,useValue:"fr-FR"}])],decls:4,vars:3,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mouvements Equipements","pathLevelTwo","Envois en Maintenance","pathLevelThree","Liste"],["title","Liste des Envois en Maintenance",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked",4,"ngIf"],["title","Liste des Envois en Maintenance",3,"itemSelected","pageSize","currentPage","totalElements","searchButtonClicked","refreshButtonClicked","pageSelected","pageSizeChange","closeButtonClicked"],[1,"normal-search",3,"formGroup"],[1,"d-flex","flex-row","align-items-center"],[1,"text-end","me-1","width-label-search"],["title","Libell\xe9"],[1,"input-textfield-container","col-3"],["placeholder","","otherclass","item-input","formControlName","libelle"],[1,"advance-search",3,"formGroup"],[1,"d-flex","flex-row","mt-2","align-items-center"],["title","Description"],["placeholder","","otherclass","item-input","formControlName","description"],[1,"primary-actions"],["icon","icon-plus btn-icon-add fw-bold","title","Effectuer Un Envoi en Maintenance",1,"me-1",3,"buttonClicked"],[1,"secondary-actions","d-flex"],["customClass","btn btn-sm button-action","title","Exporter","url","export.svg",1,"me-1","ms-1"],[3,"printButtonClicked"],[1,"table-content"],["appDynamicTable","",3,"items","headers","selectable","itemSelected",4,"ngIf"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","R\xe9f\xe9rence"],["app-header-attribute-def-template","",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","table-align-left",4,"appCellDefTemplate"],["appCellDef","Libell\xe9"],["app-header-attribute-def-template","","class","table-align-left ps-2",4,"appHeaderDefTemplate"],["appCellDef","Description"],["app-header-attribute-def-template",""],["app-cell-def-template","",1,"table-align-left"],["app-header-attribute-def-template","",1,"table-align-left","ps-2"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.YNc(2,Be,21,9,"app-crud-list",2),e.ALo(3,"async")),2&r&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,c.data$)))},dependencies:[z.L,u.O5,b.JJ,b.JL,b.sg,b.u,Se._,j.x,W.N,X.D,V.h,ee.u,te.O,ne.q,ie.W,oe.h,ae.Z,re.V,u.Ov],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return t})();var se=o(797),Oe=o(8819),De=o(9543),Ne=o(7426),ke=o(9887),He=o(6219),Ke=o(2113),we=o(5973),qe=o(4944),Ge=o(2093),Ye=o(6136),Qe=o(8513),Je=o(586),Re=o(1327),ze=o(5188);function je(t,a){1&t&&(e.TgZ(0,"th",59),e._uU(1,"Num\xe9ro S\xe9rie "),e.qZA())}function We(t,a){if(1&t&&(e.TgZ(0,"td",60),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.numeroSerie," ")}}function Xe(t,a){1&t&&(e.TgZ(0,"th",59),e._uU(1," Libell\xe9 "),e.qZA())}function Ve(t,a){if(1&t&&(e.TgZ(0,"td",60),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.libelle," ")}}function et(t,a){1&t&&(e.TgZ(0,"th",59),e._uU(1," Description "),e.qZA())}function tt(t,a){if(1&t&&(e.TgZ(0,"td",60),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.description," ")}}function nt(t,a){1&t&&(e.TgZ(0,"th",59),e._uU(1," Etat Actuel "),e.qZA())}function it(t,a){if(1&t&&(e.TgZ(0,"td",60),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.etatEquipement," ")}}function ot(t,a){1&t&&(e.TgZ(0,"table",52),e.ynx(1,53),e.YNc(2,je,2,0,"th",54),e.YNc(3,We,2,1,"td",55),e.BQk(),e.ynx(4,56),e.YNc(5,Xe,2,0,"th",54),e.YNc(6,Ve,2,1,"td",55),e.BQk(),e.ynx(7,57),e.YNc(8,et,2,0,"th",54),e.YNc(9,tt,2,1,"td",55),e.BQk(),e.ynx(10,58),e.YNc(11,nt,2,0,"th",54),e.YNc(12,it,2,1,"td",55),e.BQk(),e.qZA())}function at(t,a){if(1&t&&(e.TgZ(0,"div",49)(1,"app-item-search",50),e.YNc(2,ot,13,0,"table",51),e.qZA()()),2&t){const n=a.ngIf,r=e.oxw(2);e.xp6(1),e.Q6J("headers",r.equipementSelectItemsHeader)("items",n.equipements)("criterias",r.equipementItemCritterias)("itemDescription",r.equipementItemDescription)}}function rt(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Num\xe9ro S\xe9rie"),e.qZA())}function st(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.numeroSerie," ")}}function ct(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Libell\xe9"),e.qZA())}function lt(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij("",n.libelle," ")}}function pt(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Mod\xe8le"),e.qZA())}function mt(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.modelEquip.libelle," ")}}function dt(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Fabricant"),e.qZA())}function ut(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.modelEquip.makerEquip.libelle," ")}}function ht(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Groupe Equipement"),e.qZA())}function ft(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.modelEquip.categoryEquip.groupEquip.libelle," ")}}function _t(t,a){1&t&&(e.TgZ(0,"th",61),e._uU(1,"Cat\xe9gorie"),e.qZA())}function vt(t,a){if(1&t&&(e.TgZ(0,"td",62),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.modelEquip.categoryEquip.groupEquip.libelle," ")}}function gt(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"form",2)(1,"div",3)(2,"app-panel-custom",4)(3,"div",5)(4,"div",6),e._UZ(5,"app-form-label",7),e.TgZ(6,"div",8),e._UZ(7,"app-custom-textfield",9),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",10),e._UZ(10,"app-form-label",11),e.TgZ(11,"div",8),e._UZ(12,"app-custom-textfield",12),e.qZA()(),e.TgZ(13,"div",6),e._UZ(14,"app-form-label",13),e.TgZ(15,"div",14),e._UZ(16,"app-custom-textfield",12),e.qZA()()(),e.TgZ(17,"div",5)(18,"div",10),e._UZ(19,"app-form-label",15),e.TgZ(20,"div",8),e._UZ(21,"app-custom-textfield",12),e.qZA()(),e.TgZ(22,"div",6),e._UZ(23,"app-form-label",16),e.TgZ(24,"div",14),e._UZ(25,"app-custom-textfield",12),e.qZA()()()(),e.TgZ(26,"app-panel-custom",17)(27,"app-tabs",18)(28,"app-tab",19)(29,"div",20)(30,"h6",21),e._uU(31," Envoi en Maintenance "),e.qZA()(),e._UZ(32,"hr",22),e.TgZ(33,"div",23)(34,"div",24)(35,"div",25),e._UZ(36,"app-form-label",26),e.TgZ(37,"div",8)(38,"app-field-error-wrapper",27),e.NdJ("resetField",function(c){e.CHM(n);const Z=e.oxw();return e.KtG(Z.resetBackendError(c))}),e._UZ(39,"app-custom-textfield",28),e.qZA()()()(),e.TgZ(40,"div",29)(41,"div",30),e._UZ(42,"app-form-label",31),e.TgZ(43,"div",8),e._UZ(44,"textarea",32),e.qZA()()()()(),e.TgZ(45,"app-tab",33)(46,"div",34),e.YNc(47,at,3,4,"div",35),e.ALo(48,"async"),e.TgZ(49,"app-custom-button",36),e.NdJ("buttonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.removeEquipement())}),e.qZA()(),e.TgZ(50,"div",5)(51,"table",37),e.NdJ("itemSelected",function(c){e.CHM(n);const Z=e.oxw();return e.KtG(Z.itemSelected(c))}),e.ynx(52,38),e.YNc(53,rt,2,0,"th",39),e.YNc(54,st,2,1,"td",40),e.BQk(),e.ynx(55,41),e.YNc(56,ct,2,0,"th",39),e.YNc(57,lt,2,1,"td",40),e.BQk(),e.ynx(58,42),e.YNc(59,pt,2,0,"th",39),e.YNc(60,mt,2,1,"td",40),e.BQk(),e.ynx(61,43),e.YNc(62,dt,2,0,"th",39),e.YNc(63,ut,2,1,"td",40),e.BQk(),e.ynx(64,44),e.YNc(65,ht,2,0,"th",39),e.YNc(66,ft,2,1,"td",40),e.BQk(),e.ynx(67,45),e.YNc(68,_t,2,0,"th",39),e.YNc(69,vt,2,1,"td",40),e.BQk(),e.qZA()()()()(),e.TgZ(70,"div",46)(71,"app-primary-button",47),e.NdJ("buttonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.submitForm())}),e.qZA(),e.TgZ(72,"app-cancel-button",48),e.NdJ("buttonClicked",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.returnToList())}),e.qZA()()()()}if(2&t){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(5),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(13),e.Q6J("errors",n.errors),e.xp6(9),e.Q6J("ngIf",e.lcZ(48,12,n.formModel$)),e.xp6(2),e.Q6J("disabled",!n.isItemSelected()),e.xp6(2),e.Q6J("items",n.materiels)("headers",n.headerTable)("selectable",!0)}}let bt=(()=>{class t{constructor(n,r,c,Z){this.formService=n,this.modalService=r,this.router=c,this.store=Z,this.formModel$=this.store.select(Q),this.errors=null,this.materiels=[],this.tempMateriels=[],this.selectedItem=null,this.action="",this.formSubmitted=new e.vpe,this.equipementSelectItemsHeader=["Num\xe9ro S\xe9rie","Libell\xe9","Description","Etat Actuel"],this.equipementItemDescription=B=>B.libelle,this.equipementItemCritterias={numeroSerie:"Num\xe9ro S\xe9rie",libelle:"Libell\xe9",description:"Description"},this.headerTable=["Num\xe9ro S\xe9rie","Libell\xe9","Mod\xe8le","Fabricant","Groupe Equipement","Cat\xe9gorie","Etat Actuel"]}ngOnInit(){this.store.dispatch(s.loadFormModel()),this.store.select(Ze).subscribe(n=>{this.errors=n}),this.store.dispatch(s.resetError()),this.form=this.formService.createForm(this.envoiMaintenance),this.form.get("materiel")?.valueChanges.subscribe(n=>{n&&this.initEquipements(n)}),"edit"===this.action&&(this.materiels=this.envoiMaintenance.equipements)}ngOnDestroy(){}submitForm(){if("add"===this.action){const n={...this.form.getRawValue(),equipements:this.materiels};this.formSubmitted.emit(n)}else this.formSubmitted.emit(this.form.getRawValue())}initEquipements(n){const r=[];this.materiels.length>0?(this.materiels.forEach(c=>{r.push(c)}),this.materiels=[],r.forEach(c=>{this.materiels.push(c)}),this.materiels.push(n)):(this.materiels=[],this.materiels.push(n))}removeEquipement(){null!==this.selectedItem&&(this.materiels=this.materiels.filter(n=>n.id!==this.selectedItem?.id),console.log(this.materiels))}returnToList(){this.router.navigateByUrl("parc-informatique/envoi-maintenance")}resetBackendError(n){this.store.dispatch(s.resetErrorField({fieldName:n}))}itemSelected(n){this.selectedItem=n}isItemSelected(){return null!==this.selectedItem}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(w),e.Y36(se.Z),e.Y36(d.F0),e.Y36(i.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-envoi-maintenance-form"]],inputs:{action:"action",envoiMaintenance:"envoiMaintenance"},outputs:{formSubmitted:"formSubmitted"},features:[e._Bn([w])],decls:2,vars:1,consts:[[1,"pe-3","ps-3","pb-3","pt-0"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-main","p-2"],["icon","fa fa-angle-right","title","Historique"],[1,"general-info"],[1,"input-container","col-5"],["title","R\xe9f\xe9rence",1,"w-form","text-end"],[1,"input-textfield-container","col"],["otherclass","emphase h-form","placeholder","",3,"readonly"],[1,"input-container","col-4"],["title","Date Cr\xe9ation",1,"w-form","text-end"],["otherclass","custom-style-form","placeholder","",3,"readonly"],["title","Cr\xe9\xe9 Par",1,"col-4","text-end"],[1,"input-textfield-container","col-7"],["title","Date Derni\xe8re Modif",1,"w-form","text-end"],["title","Modifi\xe9 Par",1,"col-4","text-end"],["icon","fa fa-angle-right","background","background-style custom-padding"],["background","background-tabs"],["tabTitle","Informations g\xe9n\xe9rales"],[1,"d-flex","align-items-center",2,"margin-bottom","0px"],[1,"mb-0","pt-1","text-success","me-auto"],[1,"mt-0"],[1,"general-info","flex-column"],[1,"col-12","mb-2"],[1,"input-container","col"],["title","Libell\xe9",1,"w-form","text-end"],[3,"errors","resetField"],["otherclass","custom-style-form emphase","placeholder","","formControlName","libelle"],[1,"col-12"],[1,"input-container","col","d-flex","align-items-center"],["title","Description",1,"w-form","text-end"],["placeholder","","formControlName","description",1,"custom-style-textarea","emphase"],["tabTitle","Liste des \xe9quipements"],[1,"button-head","d-flex","ms-auto"],["class","col-auto",4,"ngIf"],["otherclass","custom-button-item-search col-auto","icon","icon-trash m-custom btn-icon-delete",3,"disabled","buttonClicked"],["appDynamicTable","",3,"items","headers","selectable","itemSelected"],["appCellDef","Num\xe9ro S\xe9rie"],["app-header-attribute-def-template","","class","custom-head",4,"appHeaderDefTemplate"],["app-cell-def-template","","class","custom-head",4,"appCellDefTemplate"],["appCellDef","Libell\xe9"],["appCellDef","Mod\xe8le"],["appCellDef","Fabricant"],["appCellDef","Groupe Equipement"],["appCellDef","Cat\xe9gorie"],[1,"form-actions"],["title","Enregistrer",1,"me-1",3,"buttonClicked"],["otherclass","custom-cancel-button","title","Annuler",3,"buttonClicked"],[1,"col-auto"],["otherclass","custom-button-item-search col-auto","icon","icon-plus btn-icon-add","formControlName","materiel",3,"headers","items","criterias","itemDescription"],["app-item-search-template-attribute","",4,"appItemSearchTemplate"],["app-item-search-template-attribute",""],["appItemSearchCellDef","Num\xe9ro S\xe9rie"],["app-item-search-header-def-template","","class","custom-head",4,"appItemSearchHeaderDefTemplate"],["app-item-search-cell-def-template","","class","custom-head",4,"appItemSearchCellDefTemplate"],["appItemSearchCellDef","Libell\xe9"],["appItemSearchCellDef","Description"],["appItemSearchCellDef","Etat Actuel"],["app-item-search-header-def-template","",1,"custom-head"],["app-item-search-cell-def-template","",1,"custom-head"],["app-header-attribute-def-template","",1,"custom-head"],["app-cell-def-template","",1,"custom-head"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e.YNc(1,gt,73,14,"form",1),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",c.form))},dependencies:[u.O5,b._Y,b.Fj,b.JJ,b.JL,b.sg,b.u,j.x,Oe.F,W.N,X.D,V.h,ee.u,te.O,ne.q,ie.W,oe.h,De.C,ae.Z,Ne.p,ke.l,He.n,Ke.i,we.v,qe.K,Ge.d,Ye.D,Qe.T,Je.o,Re.g,ze.K,u.Ov],styles:["[_nghost-%COMP%]{font-size:12px}.general-info[_ngcontent-%COMP%]{display:flex;padding:3px 0}.form-main[_ngcontent-%COMP%]{background-color:#e7e8ea;border:1px solid #c7c5c6}.input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.input-container[_ngcontent-%COMP%] + .input-container[_ngcontent-%COMP%]{//margin-left: 32px}.input-textfield-container[_ngcontent-%COMP%]{//width: 250px;margin-left:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]   app-primary-button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return t})(),Ct=(()=>{class t{constructor(n){this.store=n,this.formModel$=this.store.select(Q),this.envoiMaintenanceDto={id:"",libelle:"",description:"",materiel:null,equipements:[]}}ngOnInit(){this.store.dispatch(s.resetItem()),this.store.dispatch(s.resetFormModel())}addEnvoiMaintenance(n){this.store.dispatch(s.createItem({item:{equipements:n.equipements,libelle:n.libelle,description:n.description}}))}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(i.yh))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-envoi-maintenance-add"]],decls:3,vars:1,consts:[[1,"pt-3","ps-3","pe-3","pb-0","mb-0"],["pathLevelOne","Mouvements Equipements","pathLevelTwo","Envois en Maintenance","pathLevelThree","Ajouter"],["action","add",3,"envoiMaintenance","formSubmitted"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-custom-breadcrumb",1),e.qZA(),e.TgZ(2,"app-envoi-maintenance-form",2),e.NdJ("formSubmitted",function(B){return c.addEnvoiMaintenance(B)}),e.qZA()),2&r&&(e.xp6(2),e.Q6J("envoiMaintenance",c.envoiMaintenanceDto))},dependencies:[re.V,bt],styles:["[_nghost-%COMP%]{width:100%}"]})}return t})(),Et=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-envoi-maintenance-edit"]],decls:2,vars:0,template:function(r,c){1&r&&(e.TgZ(0,"p"),e._uU(1,"envoi-rebus-edit works!"),e.qZA())}})}return t})();var _=o(6465),Mt=o(2460),P=o(6328),Tt=o(9026),L=o(6306),G=o(9397),ce=o(1631),T=o(6063),xt=o(9862),A=o(2096),Zt=o(3186),St=o(4664),yt=o(217),At=o(1946),It=o(9989);let le=(()=>{class t extends It.v{getResourceBasePath(){return`${At.y}/envoi-equipement-maintenance`}getPrintAll(){return this.http.post(`${this.url}/${this.getResourceBasePath()}/print/all`,{},{observe:"response",responseType:"blob"})}static#e=this.\u0275fac=function(){let n;return function(c){return(n||(n=e.n5z(t)))(c||t)}}();static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var Pt=o(6366);let Ft=(()=>{class t{constructor(n,r,c,Z,B,Y){this.envoiMaintenanceService=n,this.authService=r,this.actions$=c,this.router=Z,this.modalService=B,this.store=Y,this.loadItems$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.loadItems),(0,Mt.M)(this.store.select(J),this.store.select(R),this.store.select(Te)),(0,P.b)(([v,f,$,k])=>(console.log(f),this.store.dispatch((0,T.Q)()),(0,Tt.$)(this.envoiMaintenanceService.getAllWithPagination(f,$,k),this.envoiMaintenanceService.count(k)).pipe((0,E.U)(([O,$t])=>(this.store.dispatch((0,T.Z)()),s.loadItemsSuccess({items:O,totalElement:$t}))),(0,L.K)(O=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:O})))))))),{dispatch:!0}),this.createItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.createItem),(0,P.b)(v=>(this.store.dispatch((0,T.Q)()),this.envoiMaintenanceService.add(v.item).pipe((0,G.b)(()=>{this.store.dispatch((0,T.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Envoi en maintenance effectu\xe9 avec succ\xe8s"}),this.router.navigateByUrl("parc-informatique/envoi-maintenance")}),(0,E.U)(f=>s.createItemSuccess({item:f})),(0,L.K)(f=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:f})))))))),{dispatch:!0}),this.loadItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.loadItem),(0,ce.z)(v=>this.envoiMaintenanceService.findById(v.id).pipe((0,E.U)(f=>s.loadItemSuccess({item:f})),(0,L.K)(f=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:f}))))))),{dispatch:!0}),this.deleteItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.deleteItem),(0,P.b)(v=>this.envoiMaintenanceService.delete(v.item.id,v.item)),(0,G.b)(()=>{this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Envoi en maintenance supprim\xe9 avec succ\xe8s"})}),(0,E.U)(()=>s.loadItems()),(0,L.K)(v=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:v}))))),{dispatch:!0}),this.updateItem$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.updateItem),(0,P.b)(v=>(this.store.dispatch((0,T.Q)()),this.envoiMaintenanceService.update(v.id,v.item).pipe((0,G.b)(()=>{this.store.dispatch((0,T.Z)()),this.modalService.openAlert({type:"success",title:"Op\xe9ration r\xe9ussie",message:"Envoi en maintenance modifi\xe9 avec succ\xe8s"}),this.router.navigateByUrl("parc-informatique/envoi-maintenance")}),(0,E.U)(f=>s.updateItemSuccess({item:f})),(0,L.K)(f=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:f})))))))),{dispatch:!0}),this.downloadFile$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.downloadFile),(0,ce.z)(v=>(this.store.dispatch((0,T.Q)()),this.envoiMaintenanceService.getPrintAll().pipe((0,E.U)(f=>{console.log(f),this.store.dispatch((0,T.Z)());let $=f.headers.get("content-disposition")?.split(";")[1].split("=")[1];return(0,yt.saveAs)(f.body,$),s.loadItems()}),(0,L.K)(f=>(this.store.dispatch((0,T.Z)()),(0,A.of)(s.setError({errors:f})))))))),{dispatch:!0}),this.loadFormModel$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.loadFormModel),(0,P.b)(()=>this.envoiMaintenanceService.getFormModel()),(0,E.U)(v=>s.loadFormModelSuccess({formModel:v})),(0,L.K)(v=>(0,A.of)(s.setError({errors:v}))))),this.resetSearch$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.resetSearch),(0,P.b)(()=>(0,A.of)(s.changePage({page:1}))))),this.search$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.search),(0,P.b)(()=>(0,A.of)(s.changePage({page:1}))))),this.changePage$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.changePage),(0,E.U)(v=>s.loadItems()))),this.changePageSize$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.changePageSize),(0,P.b)(()=>(0,A.of)(s.changePage({page:1}))))),this.handleError$=(0,_.GW)(()=>this.actions$.pipe((0,_.l4)(s.setError),(0,St.w)(v=>{if(this.store.dispatch((0,T.Q)()),v.errors instanceof xt.UA){if(422===v.errors.status){let f="",$=0;for(const[k,O]of Object.entries(v.errors.error))f+=0===$?O:"\n"+O,$++;this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:f})}if(403===v.errors.status&&this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:"Vous n'avez pas le droit requis pour effectuer cette action"}),401===v.errors.status){let f="Votre token a expir\xe9, veuillez vous reconnecter svp!";return this.authService.removeToken(),this.authService.removeUserInfo(),this.store.dispatch((0,T.Z)()),this.modalService.openAlert({type:"error",title:"Op\xe9ration Erron\xe9e",message:f}),(0,A.of)(Zt.jM())}}return this.store.dispatch((0,T.Z)()),(0,A.of)({type:"noop"})})),{dispatch:!0})}static#e=this.\u0275fac=function(r){return new(r||t)(e.LFG(le),e.LFG(Pt.e),e.LFG(_.eX),e.LFG(d.F0),e.LFG(se.Z),e.LFG(i.yh))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var Ut=o(9207);const Lt=[{path:"",component:$e,pathMatch:"prefix"},{path:"add",component:Ct,pathMatch:"prefix"},{path:"edit/:id",component:Et,pathMatch:"prefix"}];let Bt=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({providers:[le],imports:[z.L,u.ez,i.Aw.forFeature("envoi-maintenances",Ee),_.sQ.forFeature(Ft),Ut.m,d.Bz.forChild(Lt)]})}return t})()},8819:(F,S,o)=>{"use strict";o.d(S,{F:()=>d});var u=o(9468);let d=(()=>{class e{constructor(){this.disabled=!1,this.buttonClicked=new u.vpe}emitButtonClicked(){this.buttonClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=u.Xpm({type:e,selectors:[["app-cancel-button"]],inputs:{title:"title",url:"url",otherclass:"otherclass",disabled:"disabled"},outputs:{buttonClicked:"buttonClicked"},decls:2,vars:5,consts:[[3,"disabled","click"]],template:function(i,l){1&i&&(u.TgZ(0,"button",0),u.NdJ("click",function(){return l.emitButtonClicked()}),u._uU(1),u.qZA()),2&i&&(u.Gre("cancel-button ",l.otherclass,""),u.Q6J("disabled",l.disabled),u.xp6(1),u.hij(" ",l.title,"\n"))},styles:[".cancel-button[_ngcontent-%COMP%]{color:#000;border:1px solid #6d7582;background-color:#fff;min-width:120px;display:flex!important;align-items:center!important;justify-content:center!important;font-size:12px;height:25px;padding:.75rem 0rem;border-radius:3px}"]})}return e})()},3849:(F,S,o)=>{"use strict";o.d(S,{L:()=>E});var u=o(9468),d=o(2463),e=o(6814),x=o(166);let E=(()=>{class i{constructor(){this.printButtonClicked=new u.vpe}emitPrintButtonClicked(){this.printButtonClicked.emit()}static#e=this.\u0275fac=function(y){return new(y||i)};static#t=this.\u0275cmp=u.Xpm({type:i,selectors:[["app-print-button"]],outputs:{printButtonClicked:"printButtonClicked"},standalone:!0,features:[u.jDz],decls:1,vars:0,consts:[["customClass","btn btn-sm button-action","title","Imprimer","url","print.svg",3,"buttonClicked"]],template:function(y,p){1&y&&(u.TgZ(0,"app-custom-button",0),u.NdJ("buttonClicked",function(){return p.emitPrintButtonClicked()}),u.qZA())},dependencies:[e.ez,d.v,x.x],styles:["[_nghost-%COMP%]{display:block}"]})}return i})()},2113:(F,S,o)=>{"use strict";o.d(S,{i:()=>e});var u=o(9468);const d=["*"];let e=(()=>{class x{constructor(){this.tabTitle="",this.active=!1}static#e=this.\u0275fac=function(l){return new(l||x)};static#t=this.\u0275cmp=u.Xpm({type:x,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:d,decls:2,vars:1,consts:[[1,"pane",3,"hidden"]],template:function(l,C){1&l&&(u.F$t(),u.TgZ(0,"div",0),u.Hsn(1),u.qZA()),2&l&&u.Q6J("hidden",!C.active)},styles:[".pane[_ngcontent-%COMP%]{padding:1rem}"]})}return x})()},6219:(F,S,o)=>{"use strict";o.d(S,{n:()=>l});var u=o(2113),d=o(9468),e=o(6814);const x=function(C){return{active:C}};function E(C,y){if(1&C){const p=d.EpF();d.TgZ(0,"li",3),d.NdJ("click",function(){const h=d.CHM(p).$implicit,g=d.oxw();return d.KtG(g.selectTab(h))}),d._uU(1),d.qZA()}if(2&C){const p=y.$implicit;d.Q6J("ngClass",d.VKq(2,x,!0===p.active)),d.xp6(1),d.hij(" ",p.tabTitle," ")}}const i=["*"];let l=(()=>{class C{constructor(){}ngAfterContentInit(){0===this.tabs.filter(m=>m.active).length&&this.selectTab(this.tabs.first)}selectTab(p){this.tabs.toArray().forEach(m=>m.active=!1),p.active=!0}static#e=this.\u0275fac=function(m){return new(m||C)};static#t=this.\u0275cmp=d.Xpm({type:C,selectors:[["app-tabs"]],contentQueries:function(m,M,h){if(1&m&&d.Suo(h,u.i,4),2&m){let g;d.iGM(g=d.CRH())&&(M.tabs=g)}},inputs:{background:"background"},ngContentSelectors:i,decls:5,vars:4,consts:[[1,"tabs-container"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"active-tab-content"],[1,"tab",3,"ngClass","click"]],template:function(m,M){1&m&&(d.F$t(),d.TgZ(0,"div",0)(1,"ul"),d.YNc(2,E,2,4,"li",1),d.qZA(),d.TgZ(3,"div",2),d.Hsn(4),d.qZA()()),2&m&&(d.xp6(1),d.Gre("list-unstyled tab-title-container ",M.background,""),d.xp6(1),d.Q6J("ngForOf",M.tabs))},dependencies:[e.mk,e.sg],styles:['.tabs-container[_ngcontent-%COMP%]{margin:2px;border-top:0px;background-color:#fff}.tab-title-container[_ngcontent-%COMP%]{font-size:.875rem;display:flex;margin-bottom:0}.active-tab-content[_ngcontent-%COMP%]{border:1px solid #c7c5c6;border-top:0px;margin-top:0}.tab-title-container[_ngcontent-%COMP%]:after{content:"";display:inline-block;width:12px;flex-grow:1;border-bottom:1px solid #c7c5c6}.tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:.25rem 1rem;text-align:center;border:0px;border-bottom:1px solid #c7c5c6;cursor:pointer}.tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{border-radius:2px;opacity:90%}.tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #c7c5c6;border-bottom:0px;color:#69696b;font-family:aileronbold;border-top-left-radius:8px;border-top-right-radius:8px}']})}return C})()},217:function(F,S){var o,d;void 0!==(d="function"==typeof(o=function(){"use strict";function x(p,m,M){var h=new XMLHttpRequest;h.open("GET",p),h.responseType="blob",h.onload=function(){y(h.response,m,M)},h.onerror=function(){console.error("could not download file")},h.send()}function E(p){var m=new XMLHttpRequest;m.open("HEAD",p,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function i(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(m)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(p,m,M){var h=l.URL||l.webkitURL,g=document.createElement("a");g.download=m=m||p.name||"download",g.rel="noopener","string"==typeof p?(g.href=p,g.origin===location.origin?i(g):E(g.href)?x(p,m,M):i(g,g.target="_blank")):(g.href=h.createObjectURL(p),setTimeout(function(){h.revokeObjectURL(g.href)},4e4),setTimeout(function(){i(g)},0))}:"msSaveOrOpenBlob"in navigator?function(p,m,M){if(m=m||p.name||"download","string"!=typeof p)navigator.msSaveOrOpenBlob(function e(p,m){return typeof m>"u"?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\ufeff",p],{type:p.type}):p}(p,M),m);else if(E(p))x(p,m,M);else{var h=document.createElement("a");h.href=p,h.target="_blank",setTimeout(function(){i(h)})}}:function(p,m,M,h){if((h=h||open("","_blank"))&&(h.document.title=h.document.body.innerText="downloading..."),"string"==typeof p)return x(p,m,M);var g="application/octet-stream"===p.type,q=/constructor/i.test(l.HTMLElement)||l.safari,H=/CriOS\/[\d]+/.test(navigator.userAgent);if((H||g&&q||C)&&typeof FileReader<"u"){var D=new FileReader;D.onloadend=function(){var U=D.result;U=H?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=U:location=U,h=null},D.readAsDataURL(p)}else{var K=l.URL||l.webkitURL,N=K.createObjectURL(p);h?h.location=N:location.href=N,h=null,setTimeout(function(){K.revokeObjectURL(N)},4e4)}});l.saveAs=y.saveAs=y,F.exports=y})?o.apply(S,[]):o)&&(F.exports=d)}}]);